<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ë¸”ë¡œê·¸ ìë™ ìƒì„±ê¸° - ì‚¬ì§„ë§Œìœ¼ë¡œ ì™„ë²½í•œ í¬ìŠ¤íŒ… ì‘ì„±</title>
    
    <!-- Supabase JavaScript SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Toss Payments SDK -->
    <script src="https://js.tosspayments.com/v1/payment-widget"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #059669;
            --error-color: #dc2626;
            --warning-color: #d97706;
            --background: #ffffff;
            --surface: #f8fafc;
            --border: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
        }

        [data-theme="dark"] {
            --background: #0f172a;
            --surface: #1e293b;
            --border: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .header-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .social-links {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            margin-right: 1rem;
        }

        .social-link {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 10px;
            border-radius: 6px;
            text-decoration: none;
            color: var(--text-secondary);
            transition: all 0.15s ease;
            border: 1px solid transparent;
            font-size: 14px;
            font-weight: 500;
        }

        .social-link:hover {
            background-color: var(--surface);
            border-color: var(--border);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .social-link svg {
            transition: transform 0.15s ease;
        }

        .social-link:hover svg {
            transform: scale(1.1);
        }

        .sponsor-link {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
            border: none;
        }

        .sponsor-link:hover {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
        }

        .youtube-link:hover {
            color: #ff0000;
        }

        .threads-link:hover {
            color: #000000;
        }

        [data-theme="dark"] .threads-link:hover {
            color: #ffffff;
        }

        /* Main Content */
        .main {
            min-height: calc(100vh - 160px);
            padding: 2rem 0;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-color), #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* API Key Section */
        .api-key-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .api-key-section.error {
            border-color: var(--error-color);
            background: #fef2f2;
        }

        [data-theme="dark"] .api-key-section.error {
            background: #1f1a1a;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--background);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s ease;
            text-align: center;
            justify-content: center;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--border);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-error {
            background: var(--error-color);
            color: white;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        /* Photo Upload */
        .photo-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .photo-item {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .photo-preview {
            width: 150px;
            height: 100px;
            border: 2px dashed var(--border);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
            overflow: hidden;
        }

        .photo-preview:hover {
            border-color: var(--primary-color);
            background: var(--surface);
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }

        .photo-content {
            flex: 1;
        }

        /* Language & Theme Controls */
        .select {
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--background);
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--background);
            border-radius: 12px;
            padding: 2rem;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* API ì„¤ì • ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .api-status {
            margin-bottom: 1.5rem;
        }

        .status-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid;
        }

        .status-card.success {
            background: #f0f9f0;
            border-color: #22c55e;
            color: #166534;
        }

        .status-card.error {
            background: #fef2f2;
            border-color: #ef4444;
            color: #991b1b;
        }

        [data-theme="dark"] .status-card.success {
            background: #0a2e0a;
            color: #4ade80;
        }

        [data-theme="dark"] .status-card.error {
            background: #2e0a0a;
            color: #f87171;
        }

        .status-icon {
            font-size: 1.5rem;
        }

        .status-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .status-desc {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .api-input-container {
            display: flex;
            gap: 0.5rem;
        }

        .api-input-container .form-input {
            flex: 1;
        }

        .api-guide {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
        }

        .guide-steps {
            margin: 1rem 0;
        }

        .guide-step {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            align-items: flex-start;
        }

        .guide-step:last-child {
            margin-bottom: 0;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-content strong {
            display: block;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .step-content p {
            margin: 0.25rem 0;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .guide-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }

        .guide-link:hover {
            background: var(--primary-color);
            color: white;
            text-decoration: none;
        }

        .api-info {
            border-top: 1px solid var(--border);
            padding-top: 1rem;
        }

        .info-item {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .info-item:last-child {
            margin-bottom: 0;
        }

        .info-item strong {
            color: var(--text-primary);
        }

        /* í¬ìŠ¤íŒ… ê°•í™” ê¸°ëŠ¥ ìŠ¤íƒ€ì¼ */
        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin: 2rem 0;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border);
            z-index: 1;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: var(--background);
            padding: 0.5rem;
            z-index: 2;
            position: relative;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--border);
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }

        .step.active .step-number {
            background: var(--primary-color);
            color: white;
        }

        .step.completed .step-number {
            background: var(--success-color);
            color: white;
        }

        .step-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-align: center;
            font-weight: 500;
        }

        .step.active .step-text {
            color: var(--primary-color);
            font-weight: 600;
        }

        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .comparison-section h4 {
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 600;
        }

        .content-box {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .enhancement-summary {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
        }

        .reference-item {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.2s ease;
        }

        .reference-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .reference-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .reference-link {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .reference-link:hover {
            text-decoration: underline;
        }

        .reference-stats {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
            border: 1px solid var(--success-color);
        }

        .btn-success:hover {
            background: #047857;
            border-color: #047857;
        }

        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }
            
            .progress-steps {
                flex-direction: column;
                gap: 1rem;
            }
            
            .progress-steps::before {
                display: none;
            }
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 0.75rem 1rem;
            border: none;
            background: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Tone Adjuster */
        .tone-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .tone-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .photo-item {
                flex-direction: column;
            }
            
            .photo-preview {
                width: 100%;
                height: 150px;
            }

            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .tone-controls {
                grid-template-columns: 1fr;
            }
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .text-error { color: var(--error-color); }
        .text-success { color: var(--success-color); }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mt-2 { margin-top: 1rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-1 { gap: 0.5rem; }
        .gap-2 { gap: 1rem; }
        .w-full { width: 100%; }

        /* Footer Styles */
        .footer {
            background: var(--surface);
            border-top: 1px solid var(--border);
            padding: 3rem 0 2rem 0;
            margin-top: 4rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .footer-section p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section li {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 0.5rem;
        }

        .footer-section li:before {
            content: "âœ“";
            color: var(--primary-color);
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .toggle-section {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .toggle-header {
            padding: 1rem 1.5rem;
            background: var(--surface);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease;
        }

        .toggle-header:hover {
            background: var(--border);
        }

        .toggle-header h4 {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .toggle-icon {
            transition: transform 0.2s ease;
            color: var(--text-secondary);
        }

        .toggle-section.active .toggle-icon {
            transform: rotate(180deg);
        }

        .toggle-content {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .toggle-section.active .toggle-content {
            max-height: 1000px;
            padding: 1rem 1.5rem 1.5rem 1.5rem;
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Image Editor Styles */
        .image-container:hover .image-overlay {
            opacity: 1 !important;
        }

        .edit-image-btn:hover {
            background: rgba(255,255,255,1) !important;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2) !important;
        }

        .edit-image-btn:active {
            transform: translateY(0);
        }

        /* Image Editor Modal */
        .image-editor-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .image-editor-content {
            background: var(--surface);
            border-radius: 12px;
            padding: 2rem;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 1px solid var(--border);
        }

        .image-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .image-editor-header h3 {
            color: var(--text-primary);
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            background: var(--border);
            color: var(--text-primary);
        }

        .image-editor-preview {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .image-editor-preview img {
            max-width: 100%;
            max-height: 400px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .image-editor-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .image-editor-form label {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .image-editor-form textarea {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--background);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.2s ease;
        }

        .image-editor-form textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .image-editor-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1rem;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .footer-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .toggle-header {
                padding: 0.75rem 1rem;
            }
            
            .toggle-section.active .toggle-content {
                padding: 1rem;
            }

            .image-editor-content {
                padding: 1.5rem;
                margin: 1rem;
            }

            .image-editor-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">AI ë¸”ë¡œê·¸ ìƒì„±ê¸°</div>
                <div class="social-links">
                    <a href="https://litt.ly/mumulab1203" target="_blank" class="social-link sponsor-link" title="í›„ì›í•˜ê¸°">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2 21l1.5-1.5C5.5 17.5 8 16 12 16s6.5 1.5 8.5 3.5L22 21c0 0-2-4-10-4S2 21 2 21zM12 13c1.1 0 2-.9 2-2 0-.5-.2-1-.5-1.4C12.8 8.6 12 7.9 12 7c0-.8.7-1.5 1.5-1.5S15 6.2 15 7c0 .4-.1.8-.3 1.1-.1.2-.2.4-.2.6 0 .3.1.5.3.7.5.5.7 1.2.7 1.9 0 1.1-.9 2-2 2s-2-.9-2-2c0-.7.3-1.4.7-1.9.2-.2.3-.4.3-.7 0-.2-.1-.4-.2-.6C10.1 7.8 10 7.4 10 7c0-.8.7-1.5 1.5-1.5S13 6.2 13 7c0 .9-.8 1.6-1.5 2.6-.3.4-.5.9-.5 1.4 0 1.1.9 2 2 2z"/>
                        </svg>
                        í›„ì›í•˜ê¸°
                    </a>
                    <a href="https://www.youtube.com/@MUMULABKR" target="_blank" class="social-link youtube-link" title="ë¬´ë¬´ë© ìœ íŠœë¸Œ">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                        ë¬´ë¬´ë© ì±„ë„
                    </a>
                    <a href="https://www.threads.com/@lrinvl1203" target="_blank" class="social-link threads-link" title="ë¬´ë¬´ë© Threads">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.5 12.4v-.045A10.56 10.56 0 0 1 12.007 2C18.623 2.001 22.5 5.88 22.5 12.395c-.001 4.5-2.702 8.596-6.892 10.432l-1.092-2.142C17.481 19.068 19.5 15.948 19.5 12.395 19.5 7.59 16.813 5 12.007 5s-7.493 2.59-7.493 7.395v.045c0 2.508.584 4.658 1.646 6.056C7.49 20.183 9.63 21 12.186 21h.007c1.92 0 3.75-.398 5.293-1.148l1.085 2.15A12.684 12.684 0 0 1 12.186 24zM12 8.395c2.206 0 4 1.794 4 4s-1.794 4-4 4-4-1.794-4-4 1.794-4 4-4z"/>
                        </svg>
                        ë¬´ë¬´ë©
                    </a>
                </div>
                <div class="header-controls">
                    <select id="languageSelect" class="select">
                        <option value="ko">í•œêµ­ì–´</option>
                        <option value="en">English</option>
                        <option value="ja">æ—¥æœ¬èª</option>
                        <option value="zh">ä¸­æ–‡</option>
                        <option value="es">EspaÃ±ol</option>
                        <option value="fr">FranÃ§ais</option>
                    </select>
                    <button id="apiSetupBtn" class="btn btn-secondary btn-small" data-i18n="api_setup_button">ğŸ”‘ API</button>
                    <div id="authContainer">
                        <button id="subscribeBtn" class="btn btn-success btn-small" onclick="openSubscriptionModal()">ğŸ’ êµ¬ë…</button>
                        <button id="loginBtn" class="btn btn-primary btn-small">ğŸ” ë¡œê·¸ì¸</button>
                        <div id="userProfile" class="user-profile" style="display: none;">
                            <div class="user-avatar">ğŸ‘¤</div>
                            <span id="userEmail" class="user-email"></span>
                            <button id="logoutBtn" class="btn btn-secondary btn-small">ë¡œê·¸ì•„ì›ƒ</button>
                        </div>
                    </div>
                    <button id="themeToggle" class="btn btn-secondary btn-small">ğŸŒ™</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Hero Section -->
            <div class="hero">
                <h1 data-i18n="app_title">AI ë¸”ë¡œê·¸ ìë™ ìƒì„±ê¸° - ì‚¬ì§„ë§Œìœ¼ë¡œ ì™„ë²½í•œ í¬ìŠ¤íŒ… ì‘ì„±</h1>
                <p data-i18n="app_subtitle">ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ê³ , ì„¸ë¶€ ì •ë³´ë¥¼ ì¶”ê°€í•˜ë©´ AIê°€ ì „ë¬¸ì ì¸ ë¸”ë¡œê·¸ ê¸€ì„ ìë™ìœ¼ë¡œ ì‘ì„±í•´ ë“œë¦½ë‹ˆë‹¤.</p>
            </div>

            <!-- API Key Status (hidden by default) -->
            <div class="api-key-section hidden" id="apiKeySection">
                <div class="form-group">
                    <label class="form-label" data-i18n="api_key_label">Gemini API í‚¤</label>
                    <input type="password" id="apiKey" class="form-input" placeholder="AIzaSy..." data-i18n-placeholder="api_key_placeholder">
                    <small style="color: var(--text-muted); margin-top: 0.5rem; display: block;" data-i18n="api_key_help">
                        Google AI Studioì—ì„œ ë¬´ë£Œë¡œ API í‚¤ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </small>
                </div>
            </div>

            <!-- Main App Container -->
            <div id="appContainer">
                <!-- Blog Generator Form -->
                <div id="blogForm" class="form-section">
                    <div class="form-group">
                        <label class="form-label" data-i18n="form_category_label">ë¸”ë¡œê·¸ ì¹´í…Œê³ ë¦¬</label>
                        <input type="text" id="category" class="form-input" data-i18n-placeholder="form_category_placeholder">
                    </div>

                    <div class="form-group">
                        <label class="form-label" data-i18n="form_topic_label">ì£¼ì œ / ì£¼ìš” ì•„ì´ë””ì–´</label>
                        <input type="text" id="topic" class="form-input" data-i18n-placeholder="form_topic_placeholder">
                    </div>

                    <div class="photo-section">
                        <h3 class="mb-2" data-i18n="form_photos_title">ì‚¬ì§„ & ì„¤ëª…</h3>
                        <div id="photoContainer"></div>
                        <button type="button" id="addPhotoBtn" class="btn btn-secondary">
                            â• <span data-i18n="form_add_photos_button">ì‚¬ì§„ ì¶”ê°€í•˜ê¸°</span>
                        </button>
                    </div>

                    <div class="text-center">
                        <button type="button" id="reviewBtn" class="btn btn-primary">
                            <span data-i18n="form_review_prompt_button">í”„ë¡¬í”„íŠ¸ ê²€í† </span>
                        </button>
                    </div>
                </div>

                <!-- Loading Section -->
                <div id="loadingSection" class="hidden text-center">
                    <div class="spinner" style="width: 40px; height: 40px; margin-bottom: 1rem;"></div>
                    <p id="loadingMessage" style="color: var(--text-secondary);">AIì˜ ì°½ì˜ë ¥ì„ ì˜ˆì—´ ì¤‘...</p>
                </div>

                <!-- Blog Output Section -->
                <div id="blogOutput" class="hidden">
                    <div class="flex justify-between items-center mb-2">
                        <h2 data-i18n="output_title">ìƒì„±ëœ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸</h2>
                        <div class="flex gap-1">
                            <button id="addContentBtn" class="btn btn-secondary btn-small">
                                <span data-i18n="output_add_modify_button">ì½˜í…ì¸  ì¶”ê°€/ìˆ˜ì •</span>
                            </button>
                            <button id="adjustToneBtn" class="btn btn-secondary btn-small">
                                <span data-i18n="output_adjust_tone_button">í†¤ ì¡°ì ˆ</span>
                            </button>
                            <button id="createAnotherBtn" class="btn btn-secondary btn-small">
                                <span data-i18n="output_create_another_button">ë‹¤ë¥¸ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°</span>
                            </button>
                            <button id="enhancePostBtn" class="btn btn-secondary btn-small">
                                âš¡ <span data-i18n="output_enhance_button">í¬ìŠ¤íŒ… ê°•í™”</span>
                            </button>
                        </div>
                    </div>

                    <div class="tabs">
                        <button class="tab active" data-tab="preview" data-i18n="output_tab_preview">ë¯¸ë¦¬ë³´ê¸°</button>
                        <button class="tab" data-tab="html" data-i18n="output_tab_html">HTML</button>
                        <button class="tab" data-tab="markdown" data-i18n="output_tab_markdown">ë§ˆí¬ë‹¤ìš´</button>
                        <button class="tab" data-tab="text" data-i18n="output_tab_text">í…ìŠ¤íŠ¸</button>
                    </div>

                    <div class="tab-content active" id="previewTab">
                        <div id="blogPreview" style="background: var(--surface); padding: 2rem; border-radius: 8px; border: 1px solid var(--border);"></div>
                    </div>

                    <div class="tab-content" id="htmlTab">
                        <div style="position: relative;">
                            <button class="btn btn-small btn-secondary" style="position: absolute; top: 10px; right: 10px; z-index: 10;" onclick="copyToClipboard('htmlContent')">
                                <span data-i18n="output_copy_html">HTML ë³µì‚¬</span>
                            </button>
                            <pre id="htmlContent" style="background: var(--surface); padding: 2rem; border-radius: 8px; border: 1px solid var(--border); overflow-x: auto; white-space: pre-wrap;"></pre>
                        </div>
                    </div>

                    <div class="tab-content" id="markdownTab">
                        <div style="position: relative;">
                            <button class="btn btn-small btn-secondary" style="position: absolute; top: 10px; right: 10px; z-index: 10;" onclick="copyToClipboard('markdownContent')">
                                <span data-i18n="output_copy_markdown">ë§ˆí¬ë‹¤ìš´ ë³µì‚¬</span>
                            </button>
                            <pre id="markdownContent" style="background: var(--surface); padding: 2rem; border-radius: 8px; border: 1px solid var(--border); overflow-x: auto; white-space: pre-wrap;"></pre>
                        </div>
                    </div>

                    <div class="tab-content" id="textTab">
                        <div style="position: relative;">
                            <button class="btn btn-small btn-secondary" style="position: absolute; top: 10px; right: 10px; z-index: 10;" onclick="copyToClipboard('textContent')">
                                <span data-i18n="output_copy_text">í…ìŠ¤íŠ¸ ë³µì‚¬</span>
                            </button>
                            <pre id="textContent" style="background: var(--surface); padding: 2rem; border-radius: 8px; border: 1px solid var(--border); overflow-x: auto; white-space: pre-wrap;"></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Image Editor Modal -->
    <div id="imageEditorModal" class="image-editor-modal" style="display: none;">
        <div class="image-editor-content">
            <div class="image-editor-header">
                <h3 data-i18n="image_editor_title">ì´ë¯¸ì§€ ìˆ˜ì •í•˜ê¸°</h3>
                <button class="close-btn" onclick="closeImageEditor()">&times;</button>
            </div>
            
            <div class="image-editor-preview">
                <img id="editingImage" src="" alt="í¸ì§‘í•  ì´ë¯¸ì§€">
            </div>
            
            <div class="image-editor-form">
                <label data-i18n="image_editor_prompt_label">ìˆ˜ì • ì§€ì‹œì‚¬í•­</label>
                <textarea id="imageEditPrompt" 
                          placeholder="ì˜ˆ: ë°°ê²½ì„ íŒŒë€ í•˜ëŠ˜ë¡œ ë°”ê¿”ì¤˜, ì‚¬ëŒì„ ì œê±°í•´ì¤˜, ë” ë°ê²Œ ë§Œë“¤ì–´ì¤˜ ë“±" 
                          data-i18n-placeholder="image_editor_prompt_placeholder"></textarea>
                
                <div class="image-editor-actions">
                    <button class="btn btn-secondary" onclick="closeImageEditor()" data-i18n="image_editor_cancel">ì·¨ì†Œ</button>
                    <button class="btn btn-primary" onclick="confirmImageEdit()" data-i18n="image_editor_apply">ë³€ê²½ ì ìš©</button>
                </div>
            </div>
            
            <div id="imageEditingLoader" class="loading-overlay" style="display: none;">
                <div class="loading-spinner"></div>
            </div>
        </div>
    </div>

    <!-- Prompt Review Modal -->
    <div id="promptModal" class="modal">
        <div class="modal-content" style="width: 800px;">
            <h2 class="mb-2" data-i18n="review_title">í”„ë¡¬í”„íŠ¸ ê²€í† </h2>
            <p class="mb-2" style="color: var(--text-secondary);" data-i18n="review_subtitle">AIê°€ ì´ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìˆ˜ì •í•˜ì—¬ ì§€ì¹¨ì„ êµ¬ì²´í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <div class="form-group">
                <label class="form-label" data-i18n="review_word_count_label">ëª©í‘œ ê¸€ì ìˆ˜</label>
                <select id="wordCountSelect" class="form-input">
                    <option value="800" data-i18n="review_wc_option_1">ì•½ 800ì</option>
                    <option value="1500" data-i18n="review_wc_option_2">ì•½ 1500ì</option>
                    <option value="2000" selected data-i18n="review_wc_option_3">ì•½ 2000ì (ê¸°ë³¸)</option>
                    <option value="2500" data-i18n="review_wc_option_4">ì•½ 2500ì ì´ìƒ</option>
                    <option value="custom" data-i18n="review_wc_option_5">ì§ì ‘ ì…ë ¥</option>
                </select>
                <input type="number" id="customWordCount" class="form-input mt-2 hidden" placeholder="1200" min="100" max="10000">
            </div>

            <div class="form-group">
                <label class="form-label">í”„ë¡¬í”„íŠ¸</label>
                <textarea id="promptText" class="form-input form-textarea" rows="10"></textarea>
            </div>

            <div class="flex gap-2 justify-between">
                <button id="promptBackBtn" class="btn btn-secondary" data-i18n="review_back_button">ì–‘ì‹ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
                <button id="confirmGenerateBtn" class="btn btn-primary" data-i18n="review_confirm_button">í™•ì¸ & ìƒì„±</button>
            </div>
        </div>
    </div>

    <!-- Add Content Modal -->
    <div id="addContentModal" class="modal">
        <div class="modal-content" style="width: 800px;">
            <h2 class="mb-2" data-i18n="output_addup_title">ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì— ë‚´ìš© ì¶”ê°€í•˜ê¸°</h2>
            
            <div class="form-group">
                <label class="form-label" data-i18n="output_addup_instructions_label">ì¶”ê°€ ì§€ì¹¨</label>
                <textarea id="addInstructions" class="form-input form-textarea" rows="4" data-i18n-placeholder="output_addup_instructions_placeholder"></textarea>
            </div>

            <div class="form-group">
                <label class="form-label" data-i18n="output_addup_photos_title">ì‚¬ì§„ ë” ì¶”ê°€í•˜ê¸°</label>
                <div id="additionalPhotos"></div>
                <button type="button" id="addMorePhotoBtn" class="btn btn-secondary btn-small mt-2">
                    â• <span data-i18n="output_addup_add_photo_field_button">ì‚¬ì§„ í•„ë“œ ì¶”ê°€</span>
                </button>
            </div>

            <div class="flex gap-2 justify-between">
                <button id="addContentCancelBtn" class="btn btn-secondary" data-i18n="output_addup_cancel_button">ì·¨ì†Œ</button>
                <button id="addContentConfirmBtn" class="btn btn-primary" data-i18n="output_addup_regenerate_button">ì¶”ê°€í•˜ì—¬ ë‹¤ì‹œ ìƒì„±</button>
            </div>
        </div>
    </div>

    <!-- Tone Adjust Modal -->
    <div id="toneModal" class="modal">
        <div class="modal-content" style="width: 800px;">
            <h2 class="mb-2" data-i18n="tone_adjuster_title">ë¸”ë¡œê·¸ ê¸€ í†¤ ì¡°ì ˆí•˜ê¸°</h2>
            
            <div class="tone-controls">
                <div class="tone-group">
                    <label class="form-label" data-i18n="tone_formality">ê²©ì‹</label>
                    <select id="toneFormality" class="form-input">
                        <option value="ì¼ìƒì ">ì¼ìƒì </option>
                        <option value="ë¹„ê³µì‹ì ">ë¹„ê³µì‹ì </option>
                        <option value="ì¤‘ë¦½ì " selected>ì¤‘ë¦½ì </option>
                        <option value="ê³µì‹ì ">ê³µì‹ì </option>
                        <option value="ì „ë¬¸ì ">ì „ë¬¸ì </option>
                    </select>
                </div>

                <div class="tone-group">
                    <label class="form-label" data-i18n="tone_enthusiasm">ì—´ì •</label>
                    <select id="toneEnthusiasm" class="form-input">
                        <option value="ì°¨ë¶„í•¨">ì°¨ë¶„í•¨</option>
                        <option value="í‰ì˜¨í•¨">í‰ì˜¨í•¨</option>
                        <option value="ì¤‘ë¦½ì " selected>ì¤‘ë¦½ì </option>
                        <option value="í™œê¸°ì°¸">í™œê¸°ì°¸</option>
                        <option value="ì—´ì •ì ">ì—´ì •ì </option>
                    </select>
                </div>

                <div class="tone-group">
                    <label class="form-label" data-i18n="tone_confidence">ìì‹ ê°</label>
                    <select id="toneConfidence" class="form-input">
                        <option value="ê°ê´€ì ">ê°ê´€ì </option>
                        <option value="ì‹ ì¤‘í•¨">ì‹ ì¤‘í•¨</option>
                        <option value="ì¤‘ë¦½ì " selected>ì¤‘ë¦½ì </option>
                        <option value="ìì‹ ê°ìˆìŒ">ìì‹ ê°ìˆìŒ</option>
                        <option value="ë‹¨í˜¸í•¨">ë‹¨í˜¸í•¨</option>
                    </select>
                </div>

                <div class="tone-group">
                    <label class="form-label" data-i18n="tone_humor">ìœ ë¨¸</label>
                    <select id="toneHumor" class="form-input">
                        <option value="ì§„ì§€í•¨">ì§„ì§€í•¨</option>
                        <option value="ë¬´ë¯¸ê±´ì¡°">ë¬´ë¯¸ê±´ì¡°</option>
                        <option value="ì¤‘ë¦½ì " selected>ì¤‘ë¦½ì </option>
                        <option value="ì¬ì¹˜ìˆìŒ">ì¬ì¹˜ìˆìŒ</option>
                        <option value="ìœ„íŠ¸ìˆìŒ">ìœ„íŠ¸ìˆìŒ</option>
                    </select>
                </div>

                <div class="tone-group">
                    <label class="form-label" data-i18n="tone_clarity">ëª…í™•ì„±</label>
                    <select id="toneClarity" class="form-input">
                        <option value="ë‹¨ìˆœí•¨">ë‹¨ìˆœí•¨</option>
                        <option value="ê°„ê²°í•¨">ê°„ê²°í•¨</option>
                        <option value="ì¤‘ë¦½ì " selected>ì¤‘ë¦½ì </option>
                        <option value="ìƒì„¸í•¨">ìƒì„¸í•¨</option>
                        <option value="ì „ë¬¸ì ">ì „ë¬¸ì </option>
                    </select>
                </div>
            </div>

            <div class="flex gap-2 justify-between">
                <button id="toneCancelBtn" class="btn btn-secondary" data-i18n="tone_cancel_button">ì·¨ì†Œ</button>
                <button id="toneConfirmBtn" class="btn btn-primary" data-i18n="tone_regenerate_button">ìƒˆë¡œìš´ í†¤ìœ¼ë¡œ ë‹¤ì‹œ ìƒì„±</button>
            </div>
        </div>
    </div>

    <!-- API ì„¤ì • ëª¨ë‹¬ -->
    <div id="apiSetupModal" class="modal">
        <div class="modal-content" style="width: 600px;">
            <h2 class="mb-3" data-i18n="api_setup_title">API ì„¤ì •</h2>
            
            <!-- API í‚¤ í˜„ì¬ ìƒíƒœ -->
            <div class="api-status mb-3">
                <div id="apiStatusConnected" class="status-card success hidden">
                    <div class="status-icon">âœ…</div>
                    <div class="status-info">
                        <div class="status-title" data-i18n="api_status_connected">ì—°ê²°ë¨</div>
                        <div class="status-desc" data-i18n="api_status_connected_desc">API í‚¤ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤</div>
                    </div>
                </div>
                
                <div id="apiStatusDisconnected" class="status-card error">
                    <div class="status-icon">âŒ</div>
                    <div class="status-info">
                        <div class="status-title" data-i18n="api_status_disconnected">ì„¤ì • í•„ìš”</div>
                        <div class="status-desc" data-i18n="api_status_disconnected_desc">AI ë¸”ë¡œê·¸ ìƒì„±ì„ ìœ„í•´ Gemini API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤</div>
                    </div>
                </div>
            </div>

            <!-- API í‚¤ ì…ë ¥ -->
            <div class="form-group">
                <label class="form-label" data-i18n="api_key_label">Gemini API í‚¤</label>
                <div class="api-input-container">
                    <input type="password" id="apiKeyInput" class="form-input" placeholder="AIzaSy..." data-i18n-placeholder="api_key_placeholder">
                    <button type="button" id="toggleApiKey" class="btn btn-secondary btn-small">ğŸ‘ï¸</button>
                </div>
            </div>

            <!-- API í‚¤ ë°œê¸‰ ê°€ì´ë“œ -->
            <div class="api-guide mb-4">
                <h4 class="mb-2" data-i18n="api_guide_title">ğŸ”‘ ë¬´ë£Œ API í‚¤ ë°œê¸‰ë°›ê¸°</h4>
                
                <div class="guide-steps">
                    <div class="guide-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <strong data-i18n="api_guide_step1_title">Google AI Studio ì ‘ì†</strong>
                            <p data-i18n="api_guide_step1_desc">ì•„ë˜ ë§í¬ë¡œ Google AI Studioì— ì ‘ì†í•©ë‹ˆë‹¤</p>
                            <a href="https://aistudio.google.com/app/apikey" target="_blank" class="guide-link">
                                ğŸ”— aistudio.google.com/app/apikey
                            </a>
                        </div>
                    </div>
                    
                    <div class="guide-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <strong data-i18n="api_guide_step2_title">Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸</strong>
                            <p data-i18n="api_guide_step2_desc">Gmail ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”</p>
                        </div>
                    </div>
                    
                    <div class="guide-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <strong data-i18n="api_guide_step3_title">"Create API Key" í´ë¦­</strong>
                            <p data-i18n="api_guide_step3_desc">ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ê¸°ì¡´ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•©ë‹ˆë‹¤</p>
                        </div>
                    </div>
                    
                    <div class="guide-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <strong data-i18n="api_guide_step4_title">API í‚¤ ë³µì‚¬</strong>
                            <p data-i18n="api_guide_step4_desc">"AIzaSy..."ë¡œ ì‹œì‘í•˜ëŠ” API í‚¤ë¥¼ ë³µì‚¬í•˜ì—¬ ìœ„ ì…ë ¥ë€ì— ë¶™ì—¬ë„£ê¸°</p>
                        </div>
                    </div>
                </div>

                <div class="api-info mt-3">
                    <div class="info-item">
                        <strong>ğŸ’° ë¹„ìš©:</strong> <span data-i18n="api_cost_info">ì›” ë¬´ë£Œ í•œë„ ë‚´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥</span>
                    </div>
                    <div class="info-item">
                        <strong>ğŸ”’ ë³´ì•ˆ:</strong> <span data-i18n="api_security_info">API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©° ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</span>
                    </div>
                </div>
            </div>

            <div class="flex gap-2 justify-between">
                <button id="apiSetupCancelBtn" class="btn btn-secondary" data-i18n="api_setup_cancel">ì·¨ì†Œ</button>
                <div class="flex gap-2">
                    <button id="apiTestBtn" class="btn btn-secondary" data-i18n="api_test_button">ì—°ê²° í…ŒìŠ¤íŠ¸</button>
                    <button id="apiSaveBtn" class="btn btn-primary" data-i18n="api_save_button">ì €ì¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- í¬ìŠ¤íŒ… ê°•í™” ëª¨ë‹¬ -->
    <div id="enhanceModal" class="modal">
        <div class="modal-content" style="width: 900px;">
            <h2 class="mb-2" data-i18n="enhance_title">í¬ìŠ¤íŒ… ê°•í™”í•˜ê¸°</h2>
            <p class="mb-3" style="color: var(--text-secondary);" data-i18n="enhance_subtitle">ì…ë ¥í•œ ì¹´í…Œê³ ë¦¬ì™€ ì£¼ì œë¡œ ì¸ê¸° ë¸”ë¡œê·¸ ê¸€ì„ ë¶„ì„í•˜ì—¬ í˜„ì¬ ê¸€ì„ ë³´ì™„í•©ë‹ˆë‹¤.</p>
            
            <div id="enhanceProgress" class="hidden">
                <div class="progress-steps mb-4">
                    <div class="step active" id="step1">
                        <div class="step-number">1</div>
                        <div class="step-text">ì¸ê¸° í¬ìŠ¤íŒ… ê²€ìƒ‰</div>
                    </div>
                    <div class="step" id="step2">
                        <div class="step-number">2</div>
                        <div class="step-text">ë‚´ìš© ë¶„ì„</div>
                    </div>
                    <div class="step" id="step3">
                        <div class="step-number">3</div>
                        <div class="step-text">ë¶€ì¡±í•œ ë‚´ìš© ì‹ë³„</div>
                    </div>
                    <div class="step" id="step4">
                        <div class="step-number">4</div>
                        <div class="step-text">í¬ìŠ¤íŒ… ê°•í™”</div>
                    </div>
                </div>
                
                <div class="progress-content">
                    <div id="searchResults" class="mb-3">
                        <h4>ğŸ“ˆ ì°¸ì¡°í•œ ì¸ê¸° í¬ìŠ¤íŒ…:</h4>
                        <div id="referenceList"></div>
                    </div>
                    
                    <div id="analysisResults" class="mb-3 hidden">
                        <h4>ğŸ” ë¶„ì„ ê²°ê³¼:</h4>
                        <div id="analysisContent"></div>
                    </div>
                    
                    <div id="enhancementPreview" class="hidden">
                        <h4>ğŸ“ ì¶”ê°€/ìˆ˜ì •ë  ë‚´ìš©:</h4>
                        <div id="enhancementContent"></div>
                    </div>
                </div>
            </div>
            
            <div id="enhanceComparison" class="hidden">
                <div class="comparison-container">
                    <div class="comparison-section">
                        <h4>ğŸ“„ ìˆ˜ì • ì „</h4>
                        <div id="beforeContent" class="content-box"></div>
                    </div>
                    <div class="comparison-section">
                        <h4>âœ¨ ìˆ˜ì • í›„</h4>
                        <div id="afterContent" class="content-box"></div>
                    </div>
                </div>
                
                <div class="enhancement-summary mt-3">
                    <h4>ğŸ“Š ê°•í™” ìš”ì•½</h4>
                    <div id="enhancementSummary"></div>
                </div>
            </div>

            <div class="flex gap-2 justify-between mt-4">
                <button id="enhanceCancelBtn" class="btn btn-secondary" data-i18n="enhance_cancel_button">ì·¨ì†Œ</button>
                <div class="flex gap-2">
                    <button id="enhanceStartBtn" class="btn btn-primary" data-i18n="enhance_start_button">ê°•í™” ì‹œì‘</button>
                    <button id="enhanceAcceptBtn" class="btn btn-success hidden" data-i18n="enhance_accept_button">ê°•í™” ì ìš©</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ìƒíƒœ ê´€ë¦¬
        let currentState = {
            apiKey: '',
            language: 'ko',
            theme: 'light',
            photos: [],
            generatedBlog: null,
            isLoading: false,
            editingImageIndex: null,
            isImageEditing: false,
            lastImageEditTime: 0,
            imageEditCount: 0
        };

        // ë‹¤êµ­ì–´ ì§€ì›
        const translations = {
            ko: {
                app_title: 'AI ë¸”ë¡œê·¸ ìë™ ìƒì„±ê¸° - ì‚¬ì§„ë§Œìœ¼ë¡œ ì™„ë²½í•œ í¬ìŠ¤íŒ… ì‘ì„±',
                app_subtitle: 'ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ê³ , ì„¸ë¶€ ì •ë³´ë¥¼ ì¶”ê°€í•˜ë©´ AIê°€ ì „ë¬¸ì ì¸ ë¸”ë¡œê·¸ ê¸€ì„ ìë™ìœ¼ë¡œ ì‘ì„±í•´ ë“œë¦½ë‹ˆë‹¤.',
                api_key_label: 'Gemini API í‚¤',
                api_key_placeholder: 'AIzaSy... (Google AI Studioì—ì„œ ë°›ìœ¼ì„¸ìš”)',
                api_key_help: 'Google AI Studioì—ì„œ ë¬´ë£Œë¡œ API í‚¤ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                form_category_label: 'ë¸”ë¡œê·¸ ì¹´í…Œê³ ë¦¬',
                form_category_placeholder: 'ì˜ˆ: ì—¬í–‰, ìŒì‹, ê¸°ìˆ ',
                form_topic_label: 'ì£¼ì œ / ì£¼ìš” ì•„ì´ë””ì–´',
                form_topic_placeholder: 'ì˜ˆ: ë‚˜ì˜ ë†€ë¼ìš´ ì œì£¼ë„ ì—¬í–‰',
                form_photos_title: 'ì‚¬ì§„ & ì„¤ëª…',
                form_upload_photo: 'ì‚¬ì§„ ì—…ë¡œë“œ',
                form_photo_desc_placeholder: "ì´ ì‚¬ì§„ì„ ì„¤ëª…í•´ì£¼ì„¸ìš” (ì˜ˆ: 'ë°”ë‹¤ ìœ„ë¡œ ì§€ëŠ” ì•„ë¦„ë‹¤ìš´ ì¼ëª°')",
                form_add_photos_button: 'ì‚¬ì§„ ì¶”ê°€í•˜ê¸°',
                form_review_prompt_button: 'í”„ë¡¬í”„íŠ¸ ê²€í† ',
                review_title: 'í”„ë¡¬í”„íŠ¸ ê²€í† ',
                review_subtitle: 'AIê°€ ì´ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìˆ˜ì •í•˜ì—¬ ì§€ì¹¨ì„ êµ¬ì²´í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                review_word_count_label: 'ëª©í‘œ ê¸€ì ìˆ˜',
                review_wc_option_1: 'ì•½ 800ì',
                review_wc_option_2: 'ì•½ 1500ì',
                review_wc_option_3: 'ì•½ 2000ì (ê¸°ë³¸)',
                review_wc_option_4: 'ì•½ 2500ì ì´ìƒ',
                review_wc_option_5: 'ì§ì ‘ ì…ë ¥',
                review_back_button: 'ì–‘ì‹ìœ¼ë¡œ ëŒì•„ê°€ê¸°',
                review_confirm_button: 'í™•ì¸ & ìƒì„±',
                output_title: 'ìƒì„±ëœ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸',
                output_add_modify_button: 'ì½˜í…ì¸  ì¶”ê°€/ìˆ˜ì •',
                output_adjust_tone_button: 'í†¤ ì¡°ì ˆ',
                output_create_another_button: 'ë‹¤ë¥¸ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°',
                output_tab_preview: 'ë¯¸ë¦¬ë³´ê¸°',
                output_tab_html: 'HTML',
                output_tab_markdown: 'ë§ˆí¬ë‹¤ìš´',
                output_tab_text: 'í…ìŠ¤íŠ¸',
                output_copy_html: 'HTML ë³µì‚¬',
                output_copy_markdown: 'ë§ˆí¬ë‹¤ìš´ ë³µì‚¬',
                output_copy_text: 'í…ìŠ¤íŠ¸ ë³µì‚¬',
                output_addup_title: 'ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì— ë‚´ìš© ì¶”ê°€í•˜ê¸°',
                output_addup_instructions_label: 'ì¶”ê°€ ì§€ì¹¨',
                output_addup_instructions_placeholder: 'ì˜ˆ: ìš°ë¦¬ê°€ ë¨¹ì–´ë³¸ í˜„ì§€ ìŒì‹ì— ëŒ€í•œ ì„¹ì…˜ì„ ì¶”ê°€í•´ì¤˜. ê²°ë¡ ì„ ë” ë‚™ê´€ì ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜.',
                output_addup_photos_title: 'ì‚¬ì§„ ë” ì¶”ê°€í•˜ê¸°',
                output_addup_add_photo_field_button: 'ì‚¬ì§„ í•„ë“œ ì¶”ê°€',
                output_addup_cancel_button: 'ì·¨ì†Œ',
                output_addup_regenerate_button: 'ì¶”ê°€í•˜ì—¬ ë‹¤ì‹œ ìƒì„±',
                tone_adjuster_title: 'ë¸”ë¡œê·¸ ê¸€ í†¤ ì¡°ì ˆí•˜ê¸°',
                tone_formality: 'ê²©ì‹',
                tone_enthusiasm: 'ì—´ì •',
                tone_confidence: 'ìì‹ ê°',
                tone_humor: 'ìœ ë¨¸',
                tone_clarity: 'ëª…í™•ì„±',
                tone_cancel_button: 'ì·¨ì†Œ',
                tone_regenerate_button: 'ìƒˆë¡œìš´ í†¤ìœ¼ë¡œ ë‹¤ì‹œ ìƒì„±',
                // í¬ìŠ¤íŒ… ê°•í™” ê´€ë ¨ ë²ˆì—­
                output_enhance_button: 'í¬ìŠ¤íŒ… ê°•í™”',
                enhance_title: 'í¬ìŠ¤íŒ… ê°•í™”í•˜ê¸°',
                enhance_subtitle: 'ì…ë ¥í•œ ì¹´í…Œê³ ë¦¬ì™€ ì£¼ì œë¡œ ì¸ê¸° ë¸”ë¡œê·¸ ê¸€ì„ ë¶„ì„í•˜ì—¬ í˜„ì¬ ê¸€ì„ ë³´ì™„í•©ë‹ˆë‹¤.',
                enhance_cancel_button: 'ì·¨ì†Œ',
                enhance_start_button: 'ê°•í™” ì‹œì‘',
                enhance_accept_button: 'ê°•í™” ì ìš©',
                enhance_no_content_error: 'ë¨¼ì € ë¸”ë¡œê·¸ ê¸€ì„ ìƒì„±í•´ì£¼ì„¸ìš”.',
                // ì´ë¯¸ì§€ ìˆ˜ì • ê´€ë ¨ ë²ˆì—­
                edit_image_button: 'ì´ë¯¸ì§€ ìˆ˜ì •',
                image_editor_title: 'ì´ë¯¸ì§€ ìˆ˜ì •í•˜ê¸°',
                image_editor_prompt_label: 'ìˆ˜ì • ì§€ì‹œì‚¬í•­',
                image_editor_prompt_placeholder: 'ì˜ˆ: ë°°ê²½ì„ íŒŒë€ í•˜ëŠ˜ë¡œ ë°”ê¿”ì¤˜, ì‚¬ëŒì„ ì œê±°í•´ì¤˜, ë” ë°ê²Œ ë§Œë“¤ì–´ì¤˜ ë“±',
                image_editor_cancel: 'ì·¨ì†Œ',
                image_editor_apply: 'ë³€ê²½ ì ìš©',
                // API ì„¤ì • ê´€ë ¨ ë²ˆì—­
                api_setup_button: 'API',
                api_setup_title: 'API ì„¤ì •',
                api_status_connected: 'ì—°ê²°ë¨',
                api_status_connected_desc: 'API í‚¤ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤',
                api_status_disconnected: 'ì„¤ì • í•„ìš”',
                api_status_disconnected_desc: 'AI ë¸”ë¡œê·¸ ìƒì„±ì„ ìœ„í•´ Gemini API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤',
                api_guide_title: 'ğŸ”‘ ë¬´ë£Œ API í‚¤ ë°œê¸‰ë°›ê¸°',
                api_guide_step1_title: 'Google AI Studio ì ‘ì†',
                api_guide_step1_desc: 'ì•„ë˜ ë§í¬ë¡œ Google AI Studioì— ì ‘ì†í•©ë‹ˆë‹¤',
                api_guide_step2_title: 'Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸',
                api_guide_step2_desc: 'Gmail ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”',
                api_guide_step3_title: '"Create API Key" í´ë¦­',
                api_guide_step3_desc: 'ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ê¸°ì¡´ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•©ë‹ˆë‹¤',
                api_guide_step4_title: 'API í‚¤ ë³µì‚¬',
                api_guide_step4_desc: '"AIzaSy..."ë¡œ ì‹œì‘í•˜ëŠ” API í‚¤ë¥¼ ë³µì‚¬í•˜ì—¬ ìœ„ ì…ë ¥ë€ì— ë¶™ì—¬ë„£ê¸°',
                api_cost_info: 'ì›” ë¬´ë£Œ í•œë„ ë‚´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥',
                api_security_info: 'API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©° ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤',
                api_setup_cancel: 'ì·¨ì†Œ',
                api_test_button: 'ì—°ê²° í…ŒìŠ¤íŠ¸',
                api_save_button: 'ì €ì¥',
                error_api_key_required: 'Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.',
                error_form_validation: 'ì¹´í…Œê³ ë¦¬, ì£¼ì œ, ê·¸ë¦¬ê³  ì„¤ëª…ì´ í¬í•¨ëœ ì‚¬ì§„ì„ í•˜ë‚˜ ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.',
                error_generation_failed: 'ë¸”ë¡œê·¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. API í‚¤ë¥¼ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
                success_copied: 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!',
                loading_message_1: "AIì˜ ì°½ì˜ë ¥ì„ ì˜ˆì—´ ì¤‘...",
                loading_message_2: "ì•„ë¦„ë‹¤ìš´ ì‚¬ì§„ë“¤ì„ ë¶„ì„ ì¤‘...",
                loading_message_3: "í¥ë¯¸ë¡œìš´ ì´ì•¼ê¸°ì˜ ì´ˆì•ˆì„ ì‘ì„± ì¤‘...",
                loading_message_4: "ì™„ë²½í•œ ë‹¨ì–´ë“¤ì„ ì°¾ëŠ” ì¤‘...",
                loading_message_5: "ë§ˆì§€ë§‰ ë¬¸ì¥ë“¤ì„ ë‹¤ë“¬ëŠ” ì¤‘...",
                loading_message_6: "ê±°ì˜ ë‹¤ ì™”ì–´ìš”, ë§ˆë²•ì´ ì¼ì–´ë‚˜ê³  ìˆìŠµë‹ˆë‹¤!"
            },
            en: {
                app_title: 'AI Blog Auto Generator - Perfect Posts with Just Photos',
                app_subtitle: 'Upload your photos, add some details, and our AI will automatically create professional blog posts for you.',
                api_key_label: 'Gemini API Key',
                api_key_placeholder: 'AIzaSy... (Get it from Google AI Studio)',
                api_key_help: 'You can get a free API key from Google AI Studio.',
                form_category_label: 'Blog Category',
                form_category_placeholder: 'e.g., Travel, Food, Technology',
                form_topic_label: 'Topic / Main Idea',
                form_topic_placeholder: 'e.g., My amazing trip to Jeju Island',
                form_photos_title: 'Photos & Descriptions',
                form_upload_photo: 'Upload Photo',
                form_photo_desc_placeholder: "Describe this photo (e.g., 'A beautiful sunset over the ocean')",
                form_add_photos_button: 'Add More Photos',
                form_review_prompt_button: 'Review Prompt',
                review_title: 'Review Your Prompt',
                review_subtitle: 'The AI will use this prompt to generate your blog post. You can edit it below to refine the instructions.',
                review_word_count_label: 'Target Word Count',
                review_wc_option_1: 'Approx. 800 words',
                review_wc_option_2: 'Approx. 1500 words',
                review_wc_option_3: 'Approx. 2000 words (Default)',
                review_wc_option_4: 'Approx. 2500+ words',
                review_wc_option_5: 'Custom',
                review_back_button: 'Back to Form',
                review_confirm_button: 'Confirm & Generate',
                output_title: 'Your Generated Blog Post',
                output_add_modify_button: 'Add/Modify Content',
                output_adjust_tone_button: 'Adjust Tone',
                output_create_another_button: 'Create Another Blog Post',
                output_tab_preview: 'Preview',
                output_tab_html: 'HTML',
                output_tab_markdown: 'Markdown',
                output_tab_text: 'Text',
                output_copy_html: 'Copy HTML',
                output_copy_markdown: 'Copy Markdown',
                output_copy_text: 'Copy Text',
                output_addup_title: 'Add to Your Blog Post',
                output_addup_instructions_label: 'Additional Instructions',
                output_addup_instructions_placeholder: 'e.g., Add a section about the local food we tried. Make the conclusion more optimistic.',
                output_addup_photos_title: 'Add More Photos',
                output_addup_add_photo_field_button: 'Add Photo Field',
                output_addup_cancel_button: 'Cancel',
                output_addup_regenerate_button: 'Regenerate with Additions',
                tone_adjuster_title: 'Adjust the Tone of Your Post',
                tone_formality: 'Formality',
                tone_enthusiasm: 'Enthusiasm',
                tone_confidence: 'Confidence',
                tone_humor: 'Humor',
                tone_clarity: 'Clarity',
                tone_cancel_button: 'Cancel',
                tone_regenerate_button: 'Regenerate with New Tone',
                // Post enhancement related translations
                output_enhance_button: 'Enhance Post',
                enhance_title: 'Enhance Your Post',
                enhance_subtitle: 'Analyze popular blog posts in your category and topic to improve your current content.',
                enhance_cancel_button: 'Cancel',
                enhance_start_button: 'Start Enhancement',
                enhance_accept_button: 'Apply Enhancement',
                enhance_no_content_error: 'Please generate a blog post first.',
                // Image editing related translations
                edit_image_button: 'Edit Image',
                image_editor_title: 'Edit Image',
                image_editor_prompt_label: 'Editing Instructions',
                image_editor_prompt_placeholder: 'e.g., Change the background to blue sky, remove the person, make it brighter, etc.',
                image_editor_cancel: 'Cancel',
                image_editor_apply: 'Apply Changes',
                // API Setup translations
                api_setup_button: 'API',
                api_setup_title: 'API Setup',
                api_status_connected: 'Connected',
                api_status_connected_desc: 'API key is configured successfully',
                api_status_disconnected: 'Setup Required',
                api_status_disconnected_desc: 'Gemini API key is required for AI blog generation',
                api_guide_title: 'ğŸ”‘ Get Free API Key',
                api_guide_step1_title: 'Visit Google AI Studio',
                api_guide_step1_desc: 'Go to Google AI Studio using the link below',
                api_guide_step2_title: 'Sign in with Google Account',
                api_guide_step2_desc: 'Log in with your Gmail account',
                api_guide_step3_title: 'Click "Create API Key"',
                api_guide_step3_desc: 'Select a new project or choose an existing project',
                api_guide_step4_title: 'Copy API Key',
                api_guide_step4_desc: 'Copy the API key starting with "AIzaSy..." and paste it in the input field above',
                api_cost_info: 'Available within monthly free quota',
                api_security_info: 'API key is stored only in your browser and not sent to our servers',
                api_setup_cancel: 'Cancel',
                api_test_button: 'Test Connection',
                api_save_button: 'Save',
                error_api_key_required: 'Please enter your Gemini API key.',
                error_form_validation: 'Please fill in the category, topic, and at least one photo with a description.',
                error_generation_failed: 'Failed to generate blog post. Please check your API key and try again.',
                success_copied: 'Copied!',
                loading_message_1: "Warming up the AI's creativity...",
                loading_message_2: "Analyzing your beautiful photos...",
                loading_message_3: "Drafting a compelling story...",
                loading_message_4: "Finding the perfect words...",
                loading_message_5: "Polishing the final sentences...",
                loading_message_6: "Almost there, the magic is happening!"
            }
        };

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            addInitialPhoto();
        });

        function initializeApp() {
            // í…Œë§ˆ ì´ˆê¸°í™”
            const savedTheme = localStorage.getItem('theme') || 'light';
            setTheme(savedTheme);
            
            // ì–¸ì–´ ì´ˆê¸°í™”
            updateLanguage(currentState.language);
            
            // API í‚¤ ì´ˆê¸°í™”
            const savedApiKey = localStorage.getItem('gemini_api_key') || '';
            if (savedApiKey) {
                document.getElementById('apiKey').value = savedApiKey;
                currentState.apiKey = savedApiKey;
                updateApiStatus(savedApiKey);
            } else {
                updateApiStatus('');
            }
        }

        function setupEventListeners() {
            // í…Œë§ˆ í† ê¸€
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (ESCë¡œ ëª¨ë‹¬ ë‹«ê¸°)
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    // ì´ë¯¸ì§€ ì—ë””í„° ëª¨ë‹¬ì´ ì—´ë ¤ìˆìœ¼ë©´ ë‹«ê¸°
                    if (document.getElementById('imageEditorModal').style.display !== 'none') {
                        closeImageEditor();
                        e.preventDefault();
                    }
                }
            });
            
            // ì–¸ì–´ ì„ íƒ
            document.getElementById('languageSelect').addEventListener('change', (e) => {
                updateLanguage(e.target.value);
            });

            // ì‚¬ì§„ ì¶”ê°€ ë²„íŠ¼
            document.getElementById('addPhotoBtn').addEventListener('click', addPhotoField);

            // í”„ë¡¬í”„íŠ¸ ê²€í†  ë²„íŠ¼
            document.getElementById('reviewBtn').addEventListener('click', openPromptReview);

            // ëª¨ë‹¬ ì´ë²¤íŠ¸ë“¤
            setupModalEvents();

            // íƒ­ ì´ë²¤íŠ¸ë“¤
            setupTabEvents();

            // ê¸€ììˆ˜ ì„ íƒ ì´ë²¤íŠ¸
            document.getElementById('wordCountSelect').addEventListener('change', function() {
                const customInput = document.getElementById('customWordCount');
                if (this.value === 'custom') {
                    customInput.classList.remove('hidden');
                } else {
                    customInput.classList.add('hidden');
                }
            });
        }

        function setupModalEvents() {
            // í”„ë¡¬í”„íŠ¸ ëª¨ë‹¬
            document.getElementById('promptBackBtn').addEventListener('click', () => {
                document.getElementById('promptModal').classList.remove('show');
            });
            document.getElementById('confirmGenerateBtn').addEventListener('click', generateBlogPost);

            // ì½˜í…ì¸  ì¶”ê°€ ëª¨ë‹¬
            document.getElementById('addContentBtn').addEventListener('click', openAddContentModal);
            document.getElementById('addContentCancelBtn').addEventListener('click', () => {
                document.getElementById('addContentModal').classList.remove('show');
            });
            document.getElementById('addContentConfirmBtn').addEventListener('click', addContentToBlog);
            document.getElementById('addMorePhotoBtn').addEventListener('click', addAdditionalPhoto);

            // í†¤ ì¡°ì • ëª¨ë‹¬
            document.getElementById('adjustToneBtn').addEventListener('click', openToneModal);
            document.getElementById('toneCancelBtn').addEventListener('click', () => {
                document.getElementById('toneModal').classList.remove('show');
            });
            document.getElementById('toneConfirmBtn').addEventListener('click', adjustTone);

            // ë‹¤ë¥¸ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°
            document.getElementById('createAnotherBtn').addEventListener('click', resetApp);

            // í¬ìŠ¤íŒ… ê°•í™” ê¸°ëŠ¥
            document.getElementById('enhancePostBtn').addEventListener('click', openEnhanceModal);
            document.getElementById('enhanceCancelBtn').addEventListener('click', closeEnhanceModal);
            document.getElementById('enhanceStartBtn').addEventListener('click', startEnhancement);
            document.getElementById('enhanceAcceptBtn').addEventListener('click', acceptEnhancement);

            // API ì„¤ì • ê¸°ëŠ¥
            document.getElementById('apiSetupBtn').addEventListener('click', openApiSetupModal);
            document.getElementById('apiSetupCancelBtn').addEventListener('click', closeApiSetupModal);
            document.getElementById('toggleApiKey').addEventListener('click', toggleApiKeyVisibility);
            document.getElementById('apiTestBtn').addEventListener('click', testApiConnection);
            document.getElementById('apiSaveBtn').addEventListener('click', saveApiKey);

            // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('show');
                    }
                });
            });
        }

        function setupTabEvents() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    
                    // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
                    
                    // ì„ íƒëœ íƒ­ í™œì„±í™”
                    tab.classList.add('active');
                    document.getElementById(tabName + 'Tab').classList.add('active');
                });
            });
        }

        function toggleTheme() {
            const newTheme = currentState.theme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        function setTheme(theme) {
            currentState.theme = theme;
            document.body.dataset.theme = theme;
            document.getElementById('themeToggle').textContent = theme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
            localStorage.setItem('theme', theme);
        }

        function updateLanguage(lang) {
            currentState.language = lang;
            document.getElementById('languageSelect').value = lang;
            
            // ëª¨ë“  ë‹¤êµ­ì–´ ìš”ì†Œ ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.dataset.i18n;
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            // placeholder ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.dataset.i18nPlaceholder;
                if (translations[lang] && translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
        }

        function t(key) {
            return translations[currentState.language][key] || key;
        }

        function addInitialPhoto() {
            addPhotoField();
        }

        function addPhotoField() {
            const container = document.getElementById('photoContainer');
            const photoId = Date.now();
            
            const photoDiv = document.createElement('div');
            photoDiv.className = 'photo-item';
            photoDiv.dataset.photoId = photoId;
            
            photoDiv.innerHTML = `
                <div class="photo-preview" onclick="document.getElementById('file-${photoId}').click()">
                    <div class="upload-placeholder">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21,15 16,10 5,21"/>
                        </svg>
                        <span>${t('form_upload_photo')}</span>
                    </div>
                    <input type="file" id="file-${photoId}" accept="image/*" style="display: none;" onchange="handlePhotoUpload(${photoId}, this)">
                </div>
                <div class="photo-content">
                    <textarea class="form-input form-textarea" placeholder="${t('form_photo_desc_placeholder')}" rows="3" onchange="updatePhotoDescription(${photoId}, this.value)"></textarea>
                    <button type="button" class="btn btn-error btn-small mt-2" onclick="removePhoto(${photoId})">
                        ğŸ—‘ï¸ ì‚­ì œ
                    </button>
                </div>
            `;
            
            container.appendChild(photoDiv);
            
            // ì‚¬ì§„ ê°ì²´ ì´ˆê¸°í™”
            currentState.photos.push({
                id: photoId,
                file: null,
                description: '',
                base64: '',
                mimeType: ''
            });
        }

        function handlePhotoUpload(photoId, input) {
            const file = input.files[0];
            if (!file) return;

            const photoIndex = currentState.photos.findIndex(p => p.id === photoId);
            if (photoIndex === -1) return;

            // ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.querySelector(`[data-photo-id="${photoId}"] .photo-preview`);
                preview.innerHTML = `<img src="${e.target.result}" alt="Preview" style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px;">`;
            };
            reader.readAsDataURL(file);

            // base64ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥
            const base64Reader = new FileReader();
            base64Reader.onload = function(e) {
                const base64String = e.target.result.split(',')[1];
                currentState.photos[photoIndex] = {
                    ...currentState.photos[photoIndex],
                    file: file,
                    base64: base64String,
                    mimeType: file.type
                };
            };
            base64Reader.readAsDataURL(file);
        }

        function updatePhotoDescription(photoId, description) {
            const photoIndex = currentState.photos.findIndex(p => p.id === photoId);
            if (photoIndex !== -1) {
                currentState.photos[photoIndex].description = description;
            }
        }

        function removePhoto(photoId) {
            // DOMì—ì„œ ì œê±°
            const photoElement = document.querySelector(`[data-photo-id="${photoId}"]`);
            photoElement.remove();
            
            // ìƒíƒœì—ì„œ ì œê±°
            currentState.photos = currentState.photos.filter(p => p.id !== photoId);
        }

        function openPromptReview() {
            // í¼ ê²€ì¦
            const category = document.getElementById('category').value.trim();
            const topic = document.getElementById('topic').value.trim();
            const validPhotos = currentState.photos.filter(p => p.file && p.description.trim());

            if (!category || !topic || validPhotos.length === 0) {
                alert(t('error_form_validation'));
                return;
            }

            // í”„ë¡¬í”„íŠ¸ ìƒì„±
            const prompt = generatePrompt(category, topic, validPhotos);
            document.getElementById('promptText').value = prompt;
            
            // ëª¨ë‹¬ í‘œì‹œ
            document.getElementById('promptModal').classList.add('show');
        }

        function generatePrompt(category, topic, photos) {
            const photoDescriptions = photos.map((p, i) => `- Photo ${i + 1}: ${p.description}`).join('\n');
            
            if (currentState.language === 'ko') {
                return `# AI ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ìƒì„± ê°€ì´ë“œë¼ì¸

## 1. ëª©í‘œ ë° ëª©ì 
ë¸”ë¡œê·¸ ê¸€ ì‘ì„±ì€ ê³ í’ˆì§ˆì˜ ì •ë³´ì„± ê¸€ì„ ì‘ì„±í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. ê¸€ì€ ë…ìì—ê²Œ ê°€ì¹˜ë¥¼ ì œê³µí•˜ê³  ë…ìì˜ ê´€ì‹¬ì„ ëŒ ìˆ˜ ìˆëŠ” ë‚´ìš©ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

## 2. ê¸€ì˜ í†¤ê³¼ ìŠ¤íƒ€ì¼
- ë…ìì—ê²Œ ì¹œê·¼í•˜ê³ , ì ‘ê·¼í•˜ê¸° ì‰¬ìš´ ì–¸ì–´ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
- ê°„ê²°í•˜ê³  ëª…ë£Œí•œ ë¬¸ì¥ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- **ê°€ë…ì„± ìµœì í™”**: ëŒ€ì œëª©(#), ì¤‘ì œëª©(##), ì†Œì œëª©(###)ì„ ì‚¬ìš©í•˜ì—¬ ì½˜í…ì¸ ì˜ ê³„ì¸µ êµ¬ì¡°ë¥¼ ëª…í™•í•˜ê²Œ í•©ë‹ˆë‹¤.
- ì¤‘ìš”í•œ í‚¤ì›Œë“œë‚˜ ê°•ì¡°í•˜ê³  ì‹¶ì€ ë¬¸ì¥ì€ **êµµì€ ê¸€ì”¨**ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.

## 3. ê¸€ì˜ êµ¬ì¡°
### ì œëª©:
- ì œëª©ì€ ì£¼ì œë¥¼ ê°„ê²°í•˜ê³  ë§¤ë ¥ì ìœ¼ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.
- **ê²€ìƒ‰ì–´ ìµœì í™”(SEO)**ë¥¼ ê³ ë ¤í•˜ì—¬ ì œëª©ì„ ì‘ì„±í•©ë‹ˆë‹¤.

### ë³¸ë¬¸:
- ì„¸ë¶€ ë‚´ìš©ì„ ì²´ê³„ì ìœ¼ë¡œ ì „ê°œí•©ë‹ˆë‹¤.
- **ì¤‘ìš”**: ë³¸ë¬¸ ë‚´ìš© ì¤‘ ì‚¬ì§„ì´ ë“¤ì–´ê°ˆ ê°€ì¥ ì ì ˆí•œ ìœ„ì¹˜ì— \`[IMAGE-1]\`, \`[IMAGE-2]\`ì™€ ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ë°˜ë“œì‹œ ì‚½ì…í•´ì£¼ì„¸ìš”.
- ê° í”Œë ˆì´ìŠ¤í™€ë”ëŠ” ì œê³µëœ ì‚¬ì§„ ìˆœì„œì™€ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

## 4. ê¸€ì˜ ê¸¸ì´
- ì´ ë¸”ë¡œê·¸ ê¸€ì€ **ì•½ 2000ì**ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.

---

**[ìƒì„± ìš”ì²­]**
ìœ„ ê°€ì´ë“œë¼ì¸ì— ë”°ë¼ ì•„ë˜ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì™„ì „í•œ í•œêµ­ì–´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”. ìµœì¢… ê²°ê³¼ë¬¼ì€ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì£¼ì„¸ìš”:

\`\`\`json
{
  "title": "ë§¤ë ¥ì ì¸ ë¸”ë¡œê·¸ ì œëª©",
  "content": "ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¸”ë¡œê·¸ ë‚´ìš© (ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë” í¬í•¨)",
  "image_captions": ["ì´ë¯¸ì§€ 1 ìº¡ì…˜", "ì´ë¯¸ì§€ 2 ìº¡ì…˜", ...]
}
\`\`\`

- **ë¸”ë¡œê·¸ ì¹´í…Œê³ ë¦¬:** ${category}
- **ì£¼ìš” í† í”½/ì•„ì´ë””ì–´:** ${topic}
- **í¬í•¨í•  ì‚¬ì§„ ë° ì„¤ëª… (ìˆœì„œëŒ€ë¡œ ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ë³¸ë¬¸ì— ì‚½ì…):**
${photoDescriptions}`;
            } else {
                return `# AI Blog Post Generation Guidelines

## 1. Goal and Objective
Write a high-quality, informative blog post that provides value to readers and captures their interest.

## 2. Tone and Style
- Use friendly and accessible language.
- Use concise and clear sentences.
- **Optimize for Readability**: Use main headings (#), subheadings (##), and minor headings (###) to create a clear content hierarchy.
- Emphasize important keywords using **bold text**.

## 3. Post Structure
### Title:
- The title should be a concise and appealing summary of the topic.
- Consider **Search Engine Optimization (SEO)**.

### Body:
- Develop the main content in a structured manner.
- **Important**: Insert placeholders like \`[IMAGE-1]\`, \`[IMAGE-2]\` at the most appropriate locations in the text.
- Each placeholder must correspond to the order of the provided photos.

## 4. Post Length
- Please write this blog post to be **approximately 2000 characters**.

---

**[Generation Request]**
Based on the guidelines above, please generate a complete blog post in English using the following information. Please provide the final output in JSON format:

\`\`\`json
{
  "title": "Engaging Blog Title",
  "content": "Blog content in Markdown format (with image placeholders)",
  "image_captions": ["Image 1 caption", "Image 2 caption", ...]
}
\`\`\`

- **Blog Category:** ${category}
- **Main Topic/Idea:** ${topic}
- **Photos and Descriptions to Include:**
${photoDescriptions}`;
            }
        }

        async function generateBlogPost() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (!apiKey) {
                showError(t('error_api_key_required'));
                document.getElementById('apiKeySection').classList.add('error');
                return;
            }

            // API í‚¤ ì €ì¥ ë° ì—ëŸ¬ ìƒíƒœ ì œê±°
            currentState.apiKey = apiKey;
            document.getElementById('apiKeySection').classList.remove('error');

            // í”„ë¡¬í”„íŠ¸ ê°€ì ¸ì˜¤ê¸°
            let prompt = document.getElementById('promptText').value.trim();
            
            // ê¸€ììˆ˜ ì„¤ì • ì ìš©
            const wordCount = document.getElementById('wordCountSelect').value;
            const customCount = document.getElementById('customWordCount').value;
            
            if (wordCount === 'custom' && customCount) {
                if (currentState.language === 'ko') {
                    prompt = prompt.replace(/\*\*ì•½ \d+ì(\sì´ìƒ)?\*\*/, `**ì•½ ${customCount}ì**`);
                } else {
                    prompt = prompt.replace(/\*\*approximately \d+ characters(\s or more)?\*\*/, `**approximately ${customCount} characters**`);
                }
            } else if (wordCount !== 'custom') {
                const suffix = wordCount === '2500' ? (currentState.language === 'ko' ? ' ì´ìƒ' : ' or more') : '';
                if (currentState.language === 'ko') {
                    prompt = prompt.replace(/\*\*ì•½ \d+ì(\sì´ìƒ)?\*\*/, `**ì•½ ${wordCount}ì${suffix}**`);
                } else {
                    prompt = prompt.replace(/\*\*approximately \d+ characters(\s or more)?\*\*/, `**approximately ${wordCount} characters${suffix}**`);
                }
            }

            // ëª¨ë‹¬ ë‹«ê¸° ë° ë¡œë”© ì‹œì‘
            document.getElementById('promptModal').classList.remove('show');
            showLoading(true);

            try {
                const validPhotos = currentState.photos.filter(p => p.file && p.description.trim());
                const result = await callGeminiAPI(prompt, validPhotos);
                
                currentState.generatedBlog = result;
                showBlogOutput(result, validPhotos);
                showLoading(false);
                
            } catch (error) {
                console.error('Blog generation failed:', error);
                showError(t('error_generation_failed'));
                showLoading(false);
            }
        }

        async function callGeminiAPI(prompt, photos) {
            const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent';
            
            const imageParts = photos.map(photo => ({
                inlineData: {
                    data: photo.base64,
                    mimeType: photo.mimeType
                }
            }));

            const requestBody = {
                contents: [{
                    parts: [
                        { text: prompt },
                        ...imageParts
                    ]
                }],
                generationConfig: {
                    responseMimeType: "application/json",
                    temperature: 0.7,
                    responseSchema: {
                        type: "object",
                        properties: {
                            title: {
                                type: "string",
                                description: "A catchy and SEO-friendly title for the blog post."
                            },
                            content: {
                                type: "string",
                                description: "The full content of the blog post in Markdown format."
                            },
                            image_captions: {
                                type: "array",
                                items: {
                                    type: "string"
                                },
                                description: "An array of rewritten, engaging captions for each photo."
                            }
                        },
                        required: ["title", "content", "image_captions"]
                    }
                }
            };

            const response = await fetch(`${API_URL}?key=${currentState.apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestBody)
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(`API Error: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
            }

            const data = await response.json();
            const responseText = data.candidates?.[0]?.content?.parts?.[0]?.text;
            
            if (!responseText) {
                throw new Error('No response text from API');
            }

            // JSON íŒŒì‹±
            let cleanedText = responseText.trim();
            const jsonMatch = cleanedText.match(/```(?:json)?\s*([\s\S]*?)\s*```/);
            if (jsonMatch) {
                cleanedText = jsonMatch[1];
            }

            try {
                const blogObject = JSON.parse(cleanedText);
                
                if (!blogObject.title || !blogObject.content || !Array.isArray(blogObject.image_captions)) {
                    throw new Error('Invalid response structure');
                }
                
                return blogObject;
            } catch (parseError) {
                console.error('JSON parsing failed:', cleanedText);
                throw new Error('Failed to parse API response');
            }
        }

        function showLoading(show) {
            currentState.isLoading = show;
            const loadingSection = document.getElementById('loadingSection');
            const blogForm = document.getElementById('blogForm');
            const blogOutput = document.getElementById('blogOutput');
            
            if (show) {
                loadingSection.classList.remove('hidden');
                blogForm.classList.add('hidden');
                blogOutput.classList.add('hidden');
                
                // ë¡œë”© ë©”ì‹œì§€ ìˆœí™˜
                const messages = [
                    t('loading_message_1'),
                    t('loading_message_2'),
                    t('loading_message_3'),
                    t('loading_message_4'),
                    t('loading_message_5'),
                    t('loading_message_6')
                ];
                
                let messageIndex = 0;
                const messageElement = document.getElementById('loadingMessage');
                
                const updateMessage = () => {
                    messageElement.textContent = messages[messageIndex];
                    messageIndex = (messageIndex + 1) % messages.length;
                };
                
                updateMessage();
                currentState.loadingInterval = setInterval(updateMessage, 3000);
                
            } else {
                loadingSection.classList.add('hidden');
                if (currentState.loadingInterval) {
                    clearInterval(currentState.loadingInterval);
                }
            }
        }

        function showBlogOutput(blog, photos) {
            document.getElementById('blogForm').classList.add('hidden');
            document.getElementById('blogOutput').classList.remove('hidden');
            
            // ì½˜í…ì¸  ìƒì„±
            const htmlContent = convertMarkdownToHtml(blog.content, blog.image_captions, photos);
            const textContent = convertMarkdownToText(blog.content);
            
            // ê° íƒ­ ì½˜í…ì¸  ì—…ë°ì´íŠ¸
            document.getElementById('blogPreview').innerHTML = htmlContent;
            document.getElementById('htmlContent').textContent = htmlContent;
            document.getElementById('markdownContent').textContent = blog.content;
            document.getElementById('textContent').textContent = textContent;
        }

        function convertMarkdownToHtml(markdown, captions, photos) {
            let html = markdown
                // ì œëª© ë³€í™˜
                .replace(/^### (.*$)/gm, '<h3>$1</h3>')
                .replace(/^## (.*$)/gm, '<h2>$1</h2>')
                .replace(/^# (.*$)/gm, '<h1>$1</h1>')
                
                // êµµì€ ê¸€ì”¨
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                
                // ê¸°ìš¸ì„
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                
                // ì¤„ë°”ê¿ˆì„ <p> íƒœê·¸ë¡œ
                .split('\n\n')
                .map(paragraph => {
                    if (paragraph.trim() && !paragraph.startsWith('<h') && !paragraph.includes('[IMAGE-')) {
                        return `<p>${paragraph.replace(/\n/g, '<br>')}</p>`;
                    }
                    return paragraph.replace(/\n/g, '<br>');
                })
                .join('\n');

            // ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë” êµì²´ (hover ì‹œ ìˆ˜ì • ë²„íŠ¼ ì¶”ê°€)
            for (let i = 0; i < photos.length; i++) {
                const imageTag = `<figure style="margin: 2rem 0; text-align: center; position: relative;" class="image-container group">
                    <div style="position: relative; display: inline-block;">
                        <img src="data:${photos[i].mimeType};base64,${photos[i].base64}" alt="${captions[i] || photos[i].description}" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" class="blog-image" data-image-index="${i}">
                        <div class="image-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 100%); border-radius: 8px; opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px);">
                            <button onclick="openImageEditor(${i})" class="edit-image-btn" style="display: flex; align-items: center; gap: 8px; padding: 12px 16px; background: rgba(255,255,255,0.9); color: #333; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.2s ease; backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0,0,0,0.15);" data-i18n="edit_image_button">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="flex-shrink: 0;">
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                                ì´ë¯¸ì§€ ìˆ˜ì •
                            </button>
                        </div>
                    </div>
                    <figcaption style="margin-top: 0.5rem; color: var(--text-secondary); font-style: italic;">${captions[i] || photos[i].description}</figcaption>
                </figure>`;
                html = html.replace(`[IMAGE-${i + 1}]`, imageTag);
            }

            return html;
        }

        function convertMarkdownToText(markdown) {
            return markdown
                .replace(/^#{1,6}\s/gm, '')
                .replace(/\*\*(.*?)\*\*/g, '$1')
                .replace(/\*(.*?)\*/g, '$1')
                .replace(/\[IMAGE-\d+\]/g, '[ì´ë¯¸ì§€]')
                .replace(/\n{3,}/g, '\n\n')
                .trim();
        }

        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                const button = element.parentElement.querySelector('button');
                const originalText = button.textContent;
                button.textContent = t('success_copied');
                
                setTimeout(() => {
                    button.innerHTML = `<span data-i18n="${elementId.replace('Content', '').replace(/^(.)/, (match) => `output_copy_${match.toLowerCase()}`)}"></span>`;
                    updateLanguage(currentState.language);
                }, 2000);
            }).catch(err => {
                console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
            });
        }

        function openAddContentModal() {
            document.getElementById('addContentModal').classList.add('show');
            document.getElementById('additionalPhotos').innerHTML = '';
        }

        function addAdditionalPhoto() {
            const container = document.getElementById('additionalPhotos');
            const photoId = Date.now();
            
            const photoDiv = document.createElement('div');
            photoDiv.className = 'photo-item';
            photoDiv.dataset.additionalPhotoId = photoId;
            
            photoDiv.innerHTML = `
                <div class="photo-preview" onclick="document.getElementById('additional-file-${photoId}').click()">
                    <div class="upload-placeholder">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21,15 16,10 5,21"/>
                        </svg>
                        <span>${t('form_upload_photo')}</span>
                    </div>
                    <input type="file" id="additional-file-${photoId}" accept="image/*" style="display: none;" onchange="handleAdditionalPhotoUpload(${photoId}, this)">
                </div>
                <div class="photo-content">
                    <textarea class="form-input form-textarea" placeholder="${t('form_photo_desc_placeholder')}" rows="3"></textarea>
                    <button type="button" class="btn btn-error btn-small mt-2" onclick="removeAdditionalPhoto(${photoId})">
                        ğŸ—‘ï¸ ì‚­ì œ
                    </button>
                </div>
            `;
            
            container.appendChild(photoDiv);
        }

        function handleAdditionalPhotoUpload(photoId, input) {
            const file = input.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.querySelector(`[data-additional-photo-id="${photoId}"] .photo-preview`);
                preview.innerHTML = `<img src="${e.target.result}" alt="Preview" style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px;">`;
            };
            reader.readAsDataURL(file);
        }

        function removeAdditionalPhoto(photoId) {
            const photoElement = document.querySelector(`[data-additional-photo-id="${photoId}"]`);
            photoElement.remove();
        }

        async function addContentToBlog() {
            // í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ ì²´í¬
            if (window.premiumUtils && !window.premiumUtils.checkFeature('advanced_editing')) {
                window.premiumUtils.showUpgrade();
                return;
            }

            // ì‚¬ìš©ëŸ‰ ì²´í¬
            if (window.premiumUtils && !window.premiumUtils.isPremium() && !window.premiumManager?.checkUsageLimits()) {
                if (window.premiumManager) {
                    window.premiumManager.showUsageLimitModal();
                }
                return;
            }

            const instructions = document.getElementById('addInstructions').value.trim();
            const additionalPhotoElements = document.querySelectorAll('[data-additional-photo-id]');
            
            // ì¶”ê°€ ì‚¬ì§„ë“¤ ì²˜ë¦¬
            const additionalPhotos = [];
            for (let element of additionalPhotoElements) {
                const photoId = element.dataset.additionalPhotoId;
                const fileInput = document.getElementById(`additional-file-${photoId}`);
                const textarea = element.querySelector('textarea');
                
                if (fileInput.files[0] && textarea.value.trim()) {
                    const file = fileInput.files[0];
                    const base64 = await fileToBase64(file);
                    
                    additionalPhotos.push({
                        id: photoId,
                        file: file,
                        description: textarea.value.trim(),
                        base64: base64.split(',')[1],
                        mimeType: file.type
                    });
                }
            }

            if (!instructions && additionalPhotos.length === 0) {
                alert(t('output_addup_validation_error_empty'));
                return;
            }

            // ëª¨ë“  ì‚¬ì§„ í•©ì¹˜ê¸° (ê¸°ì¡´ + ì¶”ê°€)
            const allPhotos = [...currentState.photos.filter(p => p.file), ...additionalPhotos];
            
            // ì¶”ê°€ í”„ë¡¬í”„íŠ¸ ìƒì„±
            const addUpPrompt = generateAddUpPrompt(instructions, currentState.generatedBlog, allPhotos);
            
            // ëª¨ë‹¬ ë‹«ê¸° ë° ë¡œë”© ì‹œì‘
            document.getElementById('addContentModal').classList.remove('show');
            showLoading(true);

            try {
                const result = await callGeminiAPI(addUpPrompt, allPhotos);
                
                currentState.generatedBlog = result;
                currentState.photos = allPhotos; // ì‚¬ì§„ ëª©ë¡ ì—…ë°ì´íŠ¸
                showBlogOutput(result, allPhotos);
                showLoading(false);
                
                // ì‚¬ìš©ëŸ‰ ì¦ê°€
                if (window.premiumUtils) {
                    window.premiumUtils.incrementUsage('request');
                }
                
            } catch (error) {
                console.error('Add content failed:', error);
                showError(t('error_generation_failed'));
                showLoading(false);
            }
        }

        function generateAddUpPrompt(instructions, currentBlog, allPhotos) {
            const photoDescriptions = allPhotos.map((p, i) => `- Photo ${i + 1}: ${p.description}`).join('\n');
            
            if (currentState.language === 'ko') {
                return `# AI ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ìˆ˜ì • ë° í™•ì¥ ê°€ì´ë“œë¼ì¸

## 1. ëª©í‘œ
ê¸°ì¡´ì— ì‘ì„±ëœ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©ìì˜ ì¶”ê°€ ì§€ì¹¨ì— ë”°ë¼ ìˆ˜ì •í•˜ê³  í™•ì¥í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. ê¸°ì¡´ ê¸€ì˜ í†¤, ìŠ¤íƒ€ì¼, êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë©´ì„œ ìƒˆë¡œìš´ ë‚´ìš©ì„ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©í•´ì•¼ í•©ë‹ˆë‹¤.

## 2. ê¸°ì¡´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë‚´ìš©
### ì œëª©:
${currentBlog.title}

### ë³¸ë¬¸ (Markdown):
\`\`\`markdown
${currentBlog.content}
\`\`\`

## 3. ì‚¬ìš©ì ì¶”ê°€ ìš”ì²­ì‚¬í•­
ë‹¤ìŒì€ ì‚¬ìš©ìê°€ ìš”ì²­í•œ ìˆ˜ì • ë° ì¶”ê°€ ë‚´ìš©ì…ë‹ˆë‹¤. ì´ ë‚´ìš©ì„ ê¸°ì¡´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì— ë°˜ì˜í•´ì£¼ì„¸ìš”.
- **ì¶”ê°€ ì§€ì¹¨:** ${instructions || "ì—†ìŒ"}

## 4. ì „ì²´ ì‚¬ì§„ ëª©ë¡
ìˆ˜ì •ëœ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì—ëŠ” ì•„ë˜ì˜ ëª¨ë“  ì‚¬ì§„ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ê¸°ì¡´ ì‚¬ì§„ê³¼ ìƒˆë¡œ ì¶”ê°€ëœ ì‚¬ì§„ì´ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë³¸ë¬¸ ë‚´ìš©ì— ë§ê²Œ ê° ì‚¬ì§„ì˜ ìœ„ì¹˜ë¥¼ ì¬ë°°ì¹˜í•˜ê³ , ê°€ì¥ ì ì ˆí•œ ê³³ì— \`[IMAGE-1]\`, \`[IMAGE-2]\`... ì™€ ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì‚½ì…í•´ì£¼ì„¸ìš”.
- **ì‚¬ìš©í•  ì‚¬ì§„ ë° ì„¤ëª… (ìˆœì„œëŒ€ë¡œ ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ë³¸ë¬¸ì— ì‚½ì…):**
${photoDescriptions}

## 5. ìµœì¢… ê²°ê³¼ë¬¼ ìš”êµ¬ì‚¬í•­
- ê¸°ì¡´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ê³¼ ìƒˆë¡œìš´ ìš”ì²­ì‚¬í•­ì„ ì™„ë²½í•˜ê²Œ í†µí•©í•˜ì—¬ **í•˜ë‚˜ì˜ ì™„ì„±ëœ ìƒˆ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸**ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.
- ìµœì¢… ê²°ê³¼ë¬¼ì€ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì£¼ì„¸ìš”:

\`\`\`json
{
  "title": "ìˆ˜ì •ëœ ë¸”ë¡œê·¸ ì œëª©",
  "content": "ìˆ˜ì •ëœ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¸”ë¡œê·¸ ë‚´ìš©",
  "image_captions": ["ëª¨ë“  ì´ë¯¸ì§€ì— ëŒ€í•œ ìº¡ì…˜ ë°°ì—´"]
}
\`\`\`

---

**[ìˆ˜ì • ë° í™•ì¥ ìš”ì²­]**
ìœ„ ê°€ì´ë“œë¼ì¸ê³¼ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì™„ì „í•œ í•œêµ­ì–´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì¬ìƒì„±í•´ì£¼ì„¸ìš”.`;
            } else {
                return `# AI Blog Post Revision and Expansion Guidelines

## 1. Goal
The goal is to revise and expand a previously generated blog post based on the user's additional instructions. The new content should be seamlessly integrated while maintaining the original tone, style, and structure.

## 2. Existing Blog Post Content
### Title:
${currentBlog.title}

### Body (Markdown):
\`\`\`markdown
${currentBlog.content}
\`\`\`

## 3. User's Additional Requests
The following are the user's requested revisions and additions. Please incorporate these into the existing blog post.
- **Additional Instructions:** ${instructions || "None"}

## 4. Full List of Photos
The revised blog post must use all of the photos listed below, including both original and newly added ones. Please rearrange the placement of each photo as needed to fit the content, and insert placeholders like \`[IMAGE-1]\`, \`[IMAGE-2]\`... in the most appropriate locations.
- **Photos to Use (insert image placeholders in order):**
${photoDescriptions}

## 5. Final Output Requirements
- Perfectly integrate the existing blog post content with the new requests to generate **one complete, new blog post**.
- The final output must be in JSON format:

\`\`\`json
{
  "title": "Updated Blog Title",
  "content": "Updated blog content in Markdown format",
  "image_captions": ["Array of captions for all images"]
}
\`\`\`

---

**[Revision and Expansion Request]**
Based on the guidelines and information above, please regenerate a complete blog post in English.`;
            }
        }

        function openToneModal() {
            document.getElementById('toneModal').classList.add('show');
        }

        async function adjustTone() {
            // í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ ì²´í¬
            if (window.premiumUtils && !window.premiumUtils.checkFeature('advanced_editing')) {
                window.premiumUtils.showUpgrade();
                return;
            }

            // ì‚¬ìš©ëŸ‰ ì²´í¬
            if (window.premiumUtils && !window.premiumUtils.isPremium() && !window.premiumManager?.checkUsageLimits()) {
                if (window.premiumManager) {
                    window.premiumManager.showUsageLimitModal();
                }
                return;
            }

            const toneSettings = {
                formality: document.getElementById('toneFormality').value,
                enthusiasm: document.getElementById('toneEnthusiasm').value,
                confidence: document.getElementById('toneConfidence').value,
                humor: document.getElementById('toneHumor').value,
                clarity: document.getElementById('toneClarity').value
            };

            // í†¤ ì¡°ì • í”„ë¡¬í”„íŠ¸ ìƒì„±
            const allPhotos = currentState.photos.filter(p => p.file);
            const tonePrompt = generateToneAdjustPrompt(toneSettings, currentState.generatedBlog, allPhotos);
            
            // ëª¨ë‹¬ ë‹«ê¸° ë° ë¡œë”© ì‹œì‘
            document.getElementById('toneModal').classList.remove('show');
            showLoading(true);

            try {
                const result = await callGeminiAPI(tonePrompt, allPhotos);
                
                currentState.generatedBlog = result;
                showBlogOutput(result, allPhotos);
                showLoading(false);
                
                // ì‚¬ìš©ëŸ‰ ì¦ê°€
                if (window.premiumUtils) {
                    window.premiumUtils.incrementUsage('request');
                }
                
            } catch (error) {
                console.error('Tone adjustment failed:', error);
                showError(t('error_generation_failed'));
                showLoading(false);
            }
        }

        function generateToneAdjustPrompt(toneSettings, currentBlog, allPhotos) {
            const photoDescriptions = allPhotos.map((p, i) => `- Photo ${i + 1}: ${p.description}`).join('\n');
            
            if (currentState.language === 'ko') {
                return `# AI ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ í†¤ ì¡°ì ˆ ê°€ì´ë“œë¼ì¸

## 1. ëª©í‘œ
ê¸°ì¡´ì— ì‘ì„±ëœ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì˜ **í†¤ê³¼ ìŠ¤íƒ€ì¼**ì„ ì‚¬ìš©ìì˜ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ë‹¤ì‹œ ì‘ì„±í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. ê¸€ì˜ í•µì‹¬ ë‚´ìš©, êµ¬ì¡°, ê·¸ë¦¬ê³  ì‚¬ì§„ ë°°ì¹˜ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.

## 2. ê¸°ì¡´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ë‚´ìš©
### ì œëª©:
${currentBlog.title}

### ë³¸ë¬¸ (Markdown):
\`\`\`markdown
${currentBlog.content}
\`\`\`

## 3. ìƒˆë¡œìš´ í†¤ ìš”êµ¬ì‚¬í•­
ì•„ë˜ì˜ í†¤ ì§€í‘œì— ë”°ë¼ ê¸€ì˜ ì „ì²´ì ì¸ ë¶„ìœ„ê¸°ë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”. ë‹¨ì–´ ì„ íƒ, ë¬¸ì¥ êµ¬ì¡°, í‘œí˜„ ë°©ì‹ ë“±ì„ ì¡°ì ˆí•˜ì—¬ ìƒˆë¡œìš´ í†¤ì„ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

- **ê²©ì‹ (Formality):** ${toneSettings.formality}
- **ì—´ì • (Enthusiasm):** ${toneSettings.enthusiasm}
- **ìì‹ ê° (Confidence):** ${toneSettings.confidence}
- **ìœ ë¨¸ (Humor):** ${toneSettings.humor}
- **ëª…í™•ì„± (Clarity):** ${toneSettings.clarity}

## 4. ì‚¬ì§„ ëª©ë¡
ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì— ì‚¬ìš©ëœ ì‚¬ì§„ ëª©ë¡ì…ë‹ˆë‹¤. í†¤ì„ ì¡°ì ˆí•  ë•Œ, ì‚¬ì§„ê³¼ ê´€ë ¨ëœ ë‚´ìš©ì´ ì–´ìƒ‰í•´ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ê³ , **ì‚¬ì§„ ìº¡ì…˜('image_captions')** ë˜í•œ ìƒˆë¡œìš´ í†¤ì— ë§ê²Œ ìì—°ìŠ¤ëŸ½ê²Œ ìˆ˜ì •í•´ì£¼ì„¸ìš”.
- **ì‚¬ìš©ëœ ì‚¬ì§„ ë° ì„¤ëª…:**
${photoDescriptions}

## 5. ìµœì¢… ê²°ê³¼ë¬¼ ìš”êµ¬ì‚¬í•­
- **í•µì‹¬ ë‚´ìš©ê³¼ êµ¬ì¡°ëŠ” ë³€ê²½í•˜ì§€ ë§ˆì„¸ìš”.** ì˜¤ì§ ê¸€ì˜ í†¤ê³¼ ìŠ¤íƒ€ì¼ë§Œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.
- ë³¸ë¬¸ ë‚´ì˜ ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë”(\`[IMAGE-1]\` ë“±)ëŠ” ì›ë˜ ìœ„ì¹˜ë¥¼ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.
- ìµœì¢… ê²°ê³¼ë¬¼ì€ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì£¼ì„¸ìš”:

\`\`\`json
{
  "title": "${currentBlog.title}",
  "content": "ìƒˆë¡œìš´ í†¤ìœ¼ë¡œ ìˆ˜ì •ëœ ë§ˆí¬ë‹¤ìš´ ë‚´ìš©",
  "image_captions": ["ìƒˆë¡œìš´ í†¤ì— ë§ëŠ” ì´ë¯¸ì§€ ìº¡ì…˜ë“¤"]
}
\`\`\`

---

**[í†¤ ì¡°ì ˆ ì¬ì‘ì„± ìš”ì²­]**
ìœ„ ê°€ì´ë“œë¼ì¸ê³¼ ìƒˆë¡œìš´ í†¤ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼, ê¸°ì¡´ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ í•œêµ­ì–´ë¡œ ë‹¤ì‹œ ì‘ì„±í•´ì£¼ì„¸ìš”.`;
            } else {
                return `# AI Blog Post Tone Adjustment Guidelines

## 1. Goal
The primary goal is to rewrite an existing blog post to match new **tone and style** requirements provided by the user. The core content, structure, and photo placements must remain the same.

## 2. Existing Blog Post Content
### Title:
${currentBlog.title}

### Body (Markdown):
\`\`\`markdown
${currentBlog.content}
\`\`\`

## 3. New Tone Requirements
Please revise the overall feel of the post according to the following tone metrics. This should be reflected in word choice, sentence structure, and phrasing.

- **Formality:** ${toneSettings.formality}
- **Enthusiasm:** ${toneSettings.enthusiasm}
- **Confidence:** ${toneSettings.confidence}
- **Humor:** ${toneSettings.humor}
- **Clarity:** ${toneSettings.clarity}

## 4. Photo List
This is the list of photos used in the blog post. As you adjust the tone, ensure the content related to the photos remains relevant, and please **rewrite the photo captions ('image_captions')** to naturally fit the new tone.
- **Photos Used:**
${photoDescriptions}

## 5. Final Output Requirements
- **Do not change the core content or structure.** The rewrite should only affect the tone and style.
- Image placeholders (\`[IMAGE-1]\`, etc.) in the body must be preserved in their original locations.
- The final output must be in JSON format:

\`\`\`json
{
  "title": "${currentBlog.title}",
  "content": "Tone-adjusted markdown content",
  "image_captions": ["Tone-adjusted image captions"]
}
\`\`\`

---

**[Tone Adjustment Rewrite Request]**
Based on the guidelines and new tone requirements above, please rewrite the blog post in English.`;
            }
        }

        function resetApp() {
            // ìƒíƒœ ì´ˆê¸°í™”
            currentState.generatedBlog = null;
            currentState.photos = [];
            
            // UI ì´ˆê¸°í™”
            document.getElementById('blogForm').classList.remove('hidden');
            document.getElementById('blogOutput').classList.add('hidden');
            document.getElementById('category').value = '';
            document.getElementById('topic').value = '';
            document.getElementById('photoContainer').innerHTML = '';
            
            // ì´ˆê¸° ì‚¬ì§„ í•„ë“œ ì¶”ê°€
            addInitialPhoto();
        }

        // í¬ìŠ¤íŒ… ê°•í™” ê¸°ëŠ¥ë“¤
        function openEnhanceModal() {
            if (!currentState.generatedBlog) {
                alert(t('enhance_no_content_error'));
                return;
            }
            
            // ëª¨ë‹¬ ì´ˆê¸°í™”
            resetEnhanceModal();
            document.getElementById('enhanceModal').classList.add('show');
        }

        function closeEnhanceModal() {
            document.getElementById('enhanceModal').classList.remove('show');
        }

        function resetEnhanceModal() {
            // ì§„í–‰ ìƒíƒœ ë¦¬ì…‹
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index === 0) step.classList.add('active');
            });
            
            // ì»¨í…ì¸  ì˜ì—­ ìˆ¨ê¸°ê¸°
            document.getElementById('enhanceProgress').classList.add('hidden');
            document.getElementById('enhanceComparison').classList.add('hidden');
            
            // ë²„íŠ¼ ìƒíƒœ ë¦¬ì…‹
            document.getElementById('enhanceStartBtn').classList.remove('hidden');
            document.getElementById('enhanceAcceptBtn').classList.add('hidden');
            
            // ê²°ê³¼ ì´ˆê¸°í™”
            document.getElementById('referenceList').innerHTML = '';
            document.getElementById('analysisContent').innerHTML = '';
            document.getElementById('enhancementContent').innerHTML = '';
            document.getElementById('beforeContent').innerHTML = '';
            document.getElementById('afterContent').innerHTML = '';
            document.getElementById('enhancementSummary').innerHTML = '';
        }

        async function startEnhancement() {
            try {
                // ì§„í–‰ í™”ë©´ í‘œì‹œ
                document.getElementById('enhanceProgress').classList.remove('hidden');
                document.getElementById('enhanceStartBtn').classList.add('hidden');
                
                const category = document.getElementById('category').value.trim();
                const topic = document.getElementById('topic').value.trim();
                
                if (!category || !topic) {
                    alert('ì¹´í…Œê³ ë¦¬ì™€ ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // 1ë‹¨ê³„: ì¸ê¸° í¬ìŠ¤íŒ… ê²€ìƒ‰
                await updateStep(1, 'ì¸ê¸° í¬ìŠ¤íŒ… ê²€ìƒ‰ ì¤‘...');
                const references = await searchPopularPosts(category, topic);
                displayReferences(references);
                completeStep(1);

                // 2ë‹¨ê³„: ë‚´ìš© ë¶„ì„
                await updateStep(2, 'ì°¸ì¡° í¬ìŠ¤íŒ… ë¶„ì„ ì¤‘...');
                const analysis = await analyzeContent(references, currentState.generatedBlog);
                displayAnalysis(analysis);
                completeStep(2);

                // 3ë‹¨ê³„: ë¶€ì¡±í•œ ë‚´ìš© ì‹ë³„
                await updateStep(3, 'ë¶€ì¡±í•œ ë‚´ìš© ì‹ë³„ ì¤‘...');
                const gaps = await identifyContentGaps(analysis);
                displayContentGaps(gaps);
                completeStep(3);

                // 4ë‹¨ê³„: í¬ìŠ¤íŒ… ê°•í™”
                await updateStep(4, 'í¬ìŠ¤íŒ… ê°•í™” ì¤‘...');
                const enhancedContent = await enhanceContent(gaps, currentState.generatedBlog);
                displayEnhancement(enhancedContent);
                completeStep(4);

                // ë¹„êµ í™”ë©´ í‘œì‹œ
                document.getElementById('enhanceComparison').classList.remove('hidden');
                document.getElementById('enhanceAcceptBtn').classList.remove('hidden');

            } catch (error) {
                console.error('Enhancement error:', error);
                alert('í¬ìŠ¤íŒ… ê°•í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        async function updateStep(stepNumber, message) {
            const step = document.getElementById(`step${stepNumber}`);
            step.classList.add('active');
            step.querySelector('.step-text').textContent = message;
        }

        function completeStep(stepNumber) {
            const step = document.getElementById(`step${stepNumber}`);
            step.classList.remove('active');
            step.classList.add('completed');
        }

        async function searchPopularPosts(category, topic) {
            const searchQuery = `${category} ${topic} ë¸”ë¡œê·¸`;
            
            try {
                // ì‹¤ì œ ì›¹ ê²€ìƒ‰ì„ í†µí•œ ì¸ê¸° í¬ìŠ¤íŒ… ìˆ˜ì§‘
                // ì—¬ëŸ¬ ê²€ìƒ‰ ì—”ì§„ê³¼ í”Œë«í¼ì—ì„œ ë°ì´í„° ìˆ˜ì§‘
                const searchResults = await Promise.allSettled([
                    searchNaverBlog(category, topic),
                    searchGooglePosts(category, topic),
                    searchWordPressPosts(category, topic)
                ]);
                
                const allResults = [];
                searchResults.forEach(result => {
                    if (result.status === 'fulfilled' && result.value) {
                        allResults.push(...result.value);
                    }
                });
                
                // ì¡°íšŒìˆ˜ì™€ ê³µìœ ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìƒìœ„ 3ê°œ ì„ íƒ
                const topPosts = allResults
                    .sort((a, b) => (b.views + b.shares * 10) - (a.views + a.shares * 10))
                    .slice(0, 3);
                
                if (topPosts.length > 0) {
                    return topPosts;
                }
            } catch (error) {
                console.warn('ì‹¤ì œ ê²€ìƒ‰ API í˜¸ì¶œ ì‹¤íŒ¨, ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° ì‚¬ìš©:', error);
            }
            
            // ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° (ì‹¤ì œ API ì‹¤íŒ¨ ì‹œ ëŒ€ì²´)
            await new Promise(resolve => setTimeout(resolve, 1500));
            return [
                {
                    title: `${topic} ì™„ë²½ ê°€ì´ë“œ: ì´ˆë³´ìë¥¼ ìœ„í•œ ë‹¨ê³„ë³„ ì„¤ëª…`,
                    url: `https://blog.naver.com/example1/${topic.replace(/\s+/g, '')}`,
                    views: 15420,
                    shares: 342,
                    excerpt: `${topic}ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ê³¼ ì‹¤ìš©ì ì¸ íŒë“¤ì„ ì œê³µí•˜ëŠ” ì¸ê¸° í¬ìŠ¤íŒ…ì…ë‹ˆë‹¤.`,
                    content: `${topic}ì€ ë§¤ìš° ì¤‘ìš”í•œ ì£¼ì œì…ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ê¸°ë³¸ ê°œë…ë¶€í„° ê³ ê¸‰ í™œìš©ë²•ê¹Œì§€ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.`
                },
                {
                    title: `${category}ì˜ ìƒˆë¡œìš´ íŠ¸ë Œë“œ: ${topic} í™œìš©ë²•`,
                    url: `https://tistory.com/example2/${topic.replace(/\s+/g, '')}`,
                    views: 12850,
                    shares: 298,
                    excerpt: `ìµœì‹  íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•œ ${topic} í™œìš© ë°©ë²•ê³¼ ì‹¤ì œ ì‚¬ë¡€ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.`,
                    content: `${category} ë¶„ì•¼ì—ì„œ ${topic}ì´ ì–´ë–»ê²Œ í™œìš©ë˜ê³  ìˆëŠ”ì§€ ì‹¤ì œ ì‚¬ë¡€ì™€ í•¨ê»˜ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.`
                },
                {
                    title: `ì „ë¬¸ê°€ê°€ ì•Œë ¤ì£¼ëŠ” ${topic} ë…¸í•˜ìš°`,
                    url: `https://medium.com/example3/${topic.replace(/\s+/g, '')}`,
                    views: 8760,
                    shares: 156,
                    excerpt: `ì—…ê³„ ì „ë¬¸ê°€ê°€ ì§ì ‘ ê³µìœ í•˜ëŠ” ${topic}ì— ëŒ€í•œ ì „ë¬¸ ì§€ì‹ê³¼ ê²½í—˜ë‹´ì…ë‹ˆë‹¤.`,
                    content: `10ë…„ ê²½ë ¥ì˜ ì „ë¬¸ê°€ë¡œì„œ ${topic}ì— ëŒ€í•´ ê¼­ ì•Œì•„ì•¼ í•  í•µì‹¬ í¬ì¸íŠ¸ë“¤ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.`
                }
            ];
        }

        // ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ (ì‹¤ì œ êµ¬í˜„ ì‹œ ë„¤ì´ë²„ ê²€ìƒ‰ API ì‚¬ìš©)
        async function searchNaverBlog(category, topic) {
            // ì‹¤ì œë¡œëŠ” ë„¤ì´ë²„ ê²€ìƒ‰ API ë˜ëŠ” í¬ë¡¤ë§ì„ í†µí•´ êµ¬í˜„
            // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
            return null;
        }

        // Google Custom Searchë¥¼ í†µí•œ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ê²€ìƒ‰
        async function searchGooglePosts(category, topic) {
            // Google Custom Search APIë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„
            // ì‹¤ì œ API í‚¤ê°€ í•„ìš”í•˜ë©°, ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
            return null;
        }

        // ì›Œë“œí”„ë ˆìŠ¤ ë¸”ë¡œê·¸ ê²€ìƒ‰
        async function searchWordPressPosts(category, topic) {
            // ì›Œë“œí”„ë ˆìŠ¤ REST APIë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„
            // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
            return null;
        }

        function displayReferences(references) {
            const container = document.getElementById('referenceList');
            container.innerHTML = references.map(ref => `
                <div class="reference-item">
                    <div class="reference-title">${ref.title}</div>
                    <a href="${ref.url}" target="_blank" class="reference-link">
                        ${ref.url} ğŸ“
                    </a>
                    <div class="reference-stats">
                        <span>ì¡°íšŒìˆ˜: ${ref.views.toLocaleString()}</span>
                        <span>ê³µìœ : ${ref.shares.toLocaleString()}</span>
                    </div>
                    <p style="margin-top: 0.5rem; font-size: 0.875rem; color: var(--text-secondary);">
                        ${ref.excerpt}
                    </p>
                </div>
            `).join('');
            
            document.getElementById('searchResults').classList.remove('hidden');
        }

        async function analyzeContent(references, currentContent) {
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // AIë¥¼ ì‚¬ìš©í•˜ì—¬ ì°¸ì¡° í¬ìŠ¤íŒ…ê³¼ í˜„ì¬ ê¸€ì„ ë¹„êµ ë¶„ì„
            const prompt = `
ë‹¤ìŒ ì°¸ì¡° í¬ìŠ¤íŒ…ë“¤ê³¼ í˜„ì¬ ì‘ì„±ëœ ë¸”ë¡œê·¸ ê¸€ì„ ë¶„ì„í•˜ì—¬ ë¹„êµí•´ì£¼ì„¸ìš”.

ì°¸ì¡° í¬ìŠ¤íŒ…ë“¤:
${references.map(ref => `ì œëª©: ${ref.title}\në‚´ìš©: ${ref.content}`).join('\n\n')}

í˜„ì¬ ê¸€:
${currentContent.content}

ë¶„ì„ ê²°ê³¼ë¥¼ JSON í˜•íƒœë¡œ ì œê³µí•´ì£¼ì„¸ìš”:
{
    "commonTopics": ["ê³µí†µìœ¼ë¡œ ë‹¤ë£¨ëŠ” ì£¼ì œë“¤"],
    "missingTopics": ["í˜„ì¬ ê¸€ì—ì„œ ëˆ„ë½ëœ ì¤‘ìš” ì£¼ì œë“¤"],
    "strengths": ["í˜„ì¬ ê¸€ì˜ ê°•ì ë“¤"],
    "weaknesses": ["í˜„ì¬ ê¸€ì˜ ì•½ì ë“¤"]
}
            `.trim();

            try {
                const response = await callGeminiAPI(prompt);
                return JSON.parse(response);
            } catch (error) {
                // ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
                return {
                    commonTopics: ["ê¸°ë³¸ ê°œë…", "ì‹¤ìš©ì  í™œìš©ë²•"],
                    missingTopics: ["ìµœì‹  íŠ¸ë Œë“œ", "ì „ë¬¸ê°€ íŒ", "ì‹¤ì œ ì‚¬ë¡€", "ì£¼ì˜ì‚¬í•­"],
                    strengths: ["êµ¬ì¡°ì  ì„¤ëª…", "ëª…í™•í•œ í‘œí˜„"],
                    weaknesses: ["ê¹Šì´ ë¶€ì¡±", "ì‹¤ì œ ê²½í—˜ ë¶€ì¡±", "ìµœì‹  ì •ë³´ ë¶€ì¡±"]
                };
            }
        }

        function displayAnalysis(analysis) {
            const container = document.getElementById('analysisContent');
            container.innerHTML = `
                <div style="margin-bottom: 1rem;">
                    <h5 style="color: var(--success-color); margin-bottom: 0.5rem;">âœ… í˜„ì¬ ê¸€ì˜ ê°•ì </h5>
                    <ul style="margin-left: 1rem;">
                        ${analysis.strengths.map(strength => `<li>${strength}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="margin-bottom: 1rem;">
                    <h5 style="color: var(--error-color); margin-bottom: 0.5rem;">âŒ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„</h5>
                    <ul style="margin-left: 1rem;">
                        ${analysis.weaknesses.map(weakness => `<li>${weakness}</li>`).join('')}
                    </ul>
                </div>
                
                <div>
                    <h5 style="color: var(--warning-color); margin-bottom: 0.5rem;">ğŸ“ ì¶”ê°€í•˜ë©´ ì¢‹ì€ ë‚´ìš©</h5>
                    <ul style="margin-left: 1rem;">
                        ${analysis.missingTopics.map(topic => `<li>${topic}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            document.getElementById('analysisResults').classList.remove('hidden');
        }

        async function identifyContentGaps(analysis) {
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            return {
                gaps: analysis.missingTopics,
                recommendations: [
                    "ìµœì‹  íŠ¸ë Œë“œ ì •ë³´ ì¶”ê°€",
                    "ì‹¤ì œ ì‚¬ë¡€ ë° ê²½í—˜ë‹´ í¬í•¨",
                    "ì „ë¬¸ê°€ ì˜ê²¬ ë° íŒ ë³´ê°•",
                    "ì£¼ì˜ì‚¬í•­ ë° ë¬¸ì œ í•´ê²° ë°©ë²• ì¶”ê°€"
                ]
            };
        }

        function displayContentGaps(gaps) {
            const container = document.getElementById('enhancementContent');
            container.innerHTML = `
                <div style="background: var(--warning-color); color: white; padding: 0.75rem; border-radius: 6px; margin-bottom: 1rem;">
                    <strong>ğŸ“‹ ì¶”ê°€ë  ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°</strong>
                </div>
                
                <div>
                    <h5 style="margin-bottom: 0.5rem;">ğŸ”§ ê°œì„  ì‚¬í•­:</h5>
                    <ul style="margin-left: 1rem;">
                        ${gaps.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            document.getElementById('enhancementPreview').classList.remove('hidden');
        }

        async function enhanceContent(gaps, originalContent) {
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            const enhancePrompt = `
ë‹¤ìŒì€ í˜„ì¬ ì‘ì„±ëœ ë¸”ë¡œê·¸ ê¸€ì…ë‹ˆë‹¤:

${originalContent.content}

ì´ ê¸€ì„ ê°œì„ í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ìš”ì†Œë“¤ì„ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©í•´ì£¼ì„¸ìš”:
${gaps.recommendations.join('\n')}

ì¤‘ìš”í•œ ì¡°ê±´:
1. ì›ë³¸ ê¸€ì˜ êµ¬ì¡°ì™€ í†¤ì„ ì™„ì „íˆ ìœ ì§€í•˜ì„¸ìš”
2. ê¸°ì¡´ ë‚´ìš©ì„ ì‚­ì œí•˜ì§€ ë§ê³ , ë³´ì™„ë§Œ í•˜ì„¸ìš”
3. ì‘ì—… ì™„ë£Œ ë©”ì‹œì§€ë‚˜ "ì¶”ê°€ëœ ë‚´ìš©" ê°™ì€ ë©”íƒ€ ì •ë³´ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”
4. ìì—°ìŠ¤ëŸ½ê³  ì¼ê´€ëœ íë¦„ìœ¼ë¡œ ë‚´ìš©ì„ í™•ì¥í•˜ì„¸ìš”
5. ì‹¤ì œ ì •ë³´ì™€ êµ¬ì²´ì ì¸ ë‚´ìš©ìœ¼ë¡œ ë³´ì™„í•˜ì„¸ìš”

ë‹¤ìŒ JSON í˜•íƒœë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
{
    "enhanced_content": "ìì—°ìŠ¤ëŸ½ê²Œ ê°•í™”ëœ ì „ì²´ ë¸”ë¡œê·¸ ê¸€ ë‚´ìš©",
    "changes_made": ["êµ¬ì²´ì ì¸ ê°œì„ ì‚¬í•­ë“¤"],
    "added_sections": ["ë³´ì™„ëœ ë‚´ìš© ì˜ì—­ë“¤"]
}
            `.trim();

            try {
                const response = await callGeminiAPI(enhancePrompt);
                const result = JSON.parse(response);
                
                return {
                    original: originalContent.content,
                    enhanced: result.enhanced_content,
                    changes: result.changes_made,
                    additions: result.added_sections
                };
            } catch (error) {
                console.error('Enhancement API error:', error);
                // ì¹´í…Œê³ ë¦¬ì™€ ì£¼ì œì— ë§ëŠ” ì‹¤ì œì ì¸ ë³´ì™„ ë‚´ìš© ìƒì„±
                const category = document.getElementById('category').value.trim();
                const topic = document.getElementById('topic').value.trim();
                const originalText = originalContent.content;
                
                // ì¹´í…Œê³ ë¦¬ë³„ ë§ì¶¤í˜• ë³´ì™„ ë‚´ìš© ìƒì„±
                const enhancements = getContextualEnhancements(category, topic, originalText);
                
                // ì›ë³¸ í…ìŠ¤íŠ¸ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ê³ , ë§ˆì§€ë§‰ì—ë§Œ ì‹¤ìš©ì ì¸ ì„¹ì…˜ ì¶”ê°€
                const enhancedText = originalText + enhancements.additionalSections;
                
                return {
                    original: originalContent.content,
                    enhanced: enhancedText,
                    changes: enhancements.changes,
                    additions: enhancements.additions
                };
            }
        }

        function getContextualEnhancements(category, topic, originalText) {
            // ì›ë³¸ í…ìŠ¤íŠ¸ ë¶„ì„ì„ í†µí•œ ë™ì  ì¹´í…Œê³ ë¦¬ ë° í‚¤ì›Œë“œ ì¶”ì¶œ
            const content = (category + ' ' + topic + ' ' + originalText).toLowerCase();
            
            // ë‹¤ì–‘í•œ ë„ë©”ì¸ í‚¤ì›Œë“œ íŒ¨í„´ ì •ì˜
            const domainPatterns = {
                travel: ['ì—¬í–‰', 'travel', 'ë°œë¦¬', 'íƒœêµ­', 'ì¼ë³¸', 'í˜¸í…”', 'í•­ê³µ', 'ê´€ê´‘', 'íœ´ê°€', 'ë°°ë‚­ì—¬í–‰', 'í•´ì™¸', 'êµ­ë‚´ì—¬í–‰', 'ë§›ì§‘', 'ëª…ì†Œ', 'trip', 'vacation', 'tour'],
                food: ['ìŒì‹', 'ìš”ë¦¬', 'ë§›ì§‘', 'ë ˆì‹œí”¼', 'food', 'recipe', 'ì…°í”„', 'ì¡°ë¦¬', 'ì‹ë‹¹', 'ì¹´í˜', 'ë¨¹ë°©', 'ë””ì €íŠ¸', 'ë² ì´í‚¹', 'ìˆ ', 'ì™€ì¸', 'cooking', 'restaurant'],
                tech: ['ê¸°ìˆ ', 'it', 'ê°œë°œ', 'tech', 'í”„ë¡œê·¸ë˜ë°', 'ì»´í“¨í„°', 'ì†Œí”„íŠ¸ì›¨ì–´', 'ì•±', 'ì›¹', 'ai', 'ì¸ê³µì§€ëŠ¥', 'coding', 'programming', 'development'],
                health: ['ê±´ê°•', 'ìš´ë™', 'í”¼íŠ¸ë‹ˆìŠ¤', 'health', 'fitness', 'ë‹¤ì´ì–´íŠ¸', 'ìš”ê°€', 'í—¬ìŠ¤', 'ì›°ë¹™', 'ì˜ì–‘', 'workout', 'diet', 'wellness', 'ì˜í•™'],
                lifestyle: ['ë¼ì´í”„ìŠ¤íƒ€ì¼', 'lifestyle', 'ì¼ìƒ', 'ì·¨ë¯¸', 'ì¸í…Œë¦¬ì–´', 'íŒ¨ì…˜', 'fashion', 'ë·°í‹°', 'beauty', 'ë…ì„œ', 'ì˜í™”', 'ìŒì•…', 'hobby'],
                business: ['ë¹„ì¦ˆë‹ˆìŠ¤', 'business', 'ì°½ì—…', 'íˆ¬ì', 'ê²½ì˜', 'ë§ˆì¼€íŒ…', 'startup', 'investment', 'ë¶€ë™ì‚°', 'ê²½ì œ', 'finance', 'ìê¸°ê³„ë°œ'],
                education: ['êµìœ¡', 'education', 'í•™ìŠµ', 'ê³µë¶€', 'í•™êµ', 'ëŒ€í•™', 'ìê²©ì¦', 'ì‹œí—˜', 'study', 'learning', 'ê°•ì˜', 'íŠœí† ë¦¬ì–¼'],
                art: ['ì˜ˆìˆ ', 'art', 'ê·¸ë¦¼', 'ì‚¬ì§„', 'ë””ìì¸', 'design', 'ì°½ì‘', 'ë¯¸ìˆ ', 'ìŒì•…', 'music', 'ë¬¸í•™', 'photography', 'creative'],
                nature: ['ìì—°', 'nature', 'í™˜ê²½', 'ë™ë¬¼', 'ì‹ë¬¼', 'ìƒíƒœ', 'ìº í•‘', 'camping', 'ë“±ì‚°', 'hiking', 'ë°”ë‹¤', 'ì‚°', 'ìˆ²', 'outdoor'],
                family: ['ê°€ì¡±', 'family', 'ìœ¡ì•„', 'ì•„ì´', 'ë¶€ëª¨', 'parenting', 'ê²°í˜¼', 'marriage', 'ì„ì‹ ', 'ì¶œì‚°', 'êµìœ¡', 'kids', 'children']
            };
            
            // ë„ë©”ì¸ë³„ ì ìˆ˜ ê³„ì‚°
            let domainScores = {};
            for (const [domain, keywords] of Object.entries(domainPatterns)) {
                domainScores[domain] = keywords.filter(keyword => content.includes(keyword)).length;
            }
            
            // ê°€ì¥ ë†’ì€ ì ìˆ˜ì˜ ë„ë©”ì¸ ì„ íƒ (ë™ì ì¼ ê²½ìš° ì²« ë²ˆì§¸ ì„ íƒ)
            const primaryDomain = Object.keys(domainScores).reduce((a, b) => 
                domainScores[a] >= domainScores[b] ? a : b
            );
            
            // ë„ë©”ì¸ë³„ ë§ì¶¤í˜• ê°•í™” ë‚´ìš© ìƒì„±
            return generateDomainSpecificEnhancements(primaryDomain, category, topic, originalText, domainScores);
        }

        function generateDomainSpecificEnhancements(domain, category, topic, originalText, scores) {
            // ë„ë©”ì¸ë³„ ì „ë¬¸ ê°•í™” ë¡œì§
            const enhancements = {
                travel: {
                    sections: generateTravelEnhancements(originalText, topic),
                    changes: ["í˜„ì§€ ê°€ì´ë“œ ì •ë³´ ì¶”ê°€", "ì—¬í–‰ê° í›„ê¸° ë³´ê°•", "ì‹¤ìš© ì—¬í–‰ íŒ í¬í•¨", "í˜„ì§€ ì£¼ì˜ì‚¬í•­ ê°€ì´ë“œ", "ì˜ˆì‚° ë° êµí†µí¸ ì •ë³´"],
                    additions: ["ì—¬í–‰ ì‹¤ìš© íŒ", "í˜„ì§€ ë¬¸í™” ì •ë³´", "ì•ˆì „ ê°€ì´ë“œ", "ì˜ˆì‚° ê³„íš", "êµí†µí¸ ì•ˆë‚´"]
                },
                food: {
                    sections: generateFoodEnhancements(originalText, topic),
                    changes: ["ì „ë¬¸ ì…°í”„ ì¡°ì–¸ ì¶”ê°€", "ì¡°ë¦¬ ê¸°ë²• ì„¸ë¶€ì‚¬í•­", "ì¬ë£Œ ì„ íƒ ê°€ì´ë“œ", "ì•ˆì „ ì¡°ë¦¬ë²•", "ë³´ê´€ ë°©ë²• ì •ë³´"],
                    additions: ["ì „ë¬¸ ì…°í”„ íŒ", "ì¡°ë¦¬ ì•ˆì „ ê°€ì´ë“œ", "ì¬ë£Œ ì„ íƒë²•", "ë³´ê´€ ë° ìœ„ìƒ", "í”Œë ˆì´íŒ… ê¸°ë²•"]
                },
                tech: {
                    sections: generateTechEnhancements(originalText, topic),
                    changes: ["ê°œë°œì ì»¤ë®¤ë‹ˆí‹° ì •ë³´", "ìµœì‹  ë²„ì „ ê¸°ëŠ¥", "ì‹¤ë¬´ íŒ¨í„´ ì„¤ëª…", "ì„±ëŠ¥ ìµœì í™”", "ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€"],
                    additions: ["ì„±ëŠ¥ ìµœì í™”", "ë³´ì•ˆ ê°€ì´ë“œ", "ë””ë²„ê¹… ì „ëµ", "ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬", "í…ŒìŠ¤íŒ… ë°©ë²•"]
                },
                health: {
                    sections: generateHealthEnhancements(originalText, topic),
                    changes: ["ì „ë¬¸ê°€ ì¡°ì–¸ ì¶”ê°€", "ì•ˆì „ ìˆ˜ì¹™ ì •ë³´", "ê°œì¸ë³„ ë§ì¶¤ ê°€ì´ë“œ", "ë¶€ìƒ ì˜ˆë°©ë²•", "ì˜ì–‘ ê´€ë¦¬ ì •ë³´"],
                    additions: ["ì „ë¬¸ê°€ ì¡°ì–¸", "ì•ˆì „ ìˆ˜ì¹™", "ë¶€ìƒ ì˜ˆë°©", "ì˜ì–‘ ê´€ë¦¬", "ê°œì¸ ë§ì¶¤ ê³„íš"]
                },
                lifestyle: {
                    sections: generateLifestyleEnhancements(originalText, topic),
                    changes: ["ë¼ì´í”„ìŠ¤íƒ€ì¼ ì „ë¬¸ê°€ íŒ", "ì‹¤ìš©ì  í™œìš©ë²•", "íŠ¸ë Œë“œ ì •ë³´", "ê°œì¸ ë§ì¶¤ ê°€ì´ë“œ", "ì§€ì† ê°€ëŠ¥í•œ ë°©ë²•"],
                    additions: ["ì „ë¬¸ê°€ íŒ", "ì‹¤ìš© í™œìš©ë²•", "ìµœì‹  íŠ¸ë Œë“œ", "ê°œì¸ ë§ì¶¤", "ì§€ì† ê°€ëŠ¥ì„±"]
                },
                business: {
                    sections: generateBusinessEnhancements(originalText, topic),
                    changes: ["ì „ë¬¸ê°€ ì¸ì‚¬ì´íŠ¸", "ì‹¤ë¬´ ê²½í—˜ ì •ë³´", "ì‹œì¥ ë¶„ì„ ìë£Œ", "ì„±ê³µ ì‚¬ë¡€", "ìœ„í—˜ ê´€ë¦¬ ë°©ë²•"],
                    additions: ["ì „ë¬¸ê°€ ì¸ì‚¬ì´íŠ¸", "ì‹¤ë¬´ ê²½í—˜", "ì‹œì¥ ë¶„ì„", "ì„±ê³µ ì‚¬ë¡€", "ìœ„í—˜ ê´€ë¦¬"]
                },
                education: {
                    sections: generateEducationEnhancements(originalText, topic),
                    changes: ["êµìœ¡ ì „ë¬¸ê°€ ì¡°ì–¸", "í•™ìŠµ íš¨ìœ¨ í–¥ìƒë²•", "ì‹¤ë¬´ ì ìš© ë°©ë²•", "í‰ê°€ ê¸°ì¤€", "ì§€ì† í•™ìŠµ ê°€ì´ë“œ"],
                    additions: ["ì „ë¬¸ê°€ ì¡°ì–¸", "íš¨ìœ¨ í•™ìŠµë²•", "ì‹¤ë¬´ ì ìš©", "í‰ê°€ ë°©ë²•", "ì§€ì† í•™ìŠµ"]
                },
                art: {
                    sections: generateArtEnhancements(originalText, topic),
                    changes: ["ì˜ˆìˆ ê°€ ê´€ì  ì¶”ê°€", "ì°½ì‘ ê¸°ë²• ì •ë³´", "ì—­ì‚¬ì  ë§¥ë½", "ê°ìƒ í¬ì¸íŠ¸", "ì‹¤ìŠµ ê°€ì´ë“œ"],
                    additions: ["ì˜ˆìˆ ê°€ ê´€ì ", "ì°½ì‘ ê¸°ë²•", "ì—­ì‚¬ì  ë§¥ë½", "ê°ìƒë²•", "ì‹¤ìŠµ ë°©ë²•"]
                },
                nature: {
                    sections: generateNatureEnhancements(originalText, topic),
                    changes: ["ìì—° ì „ë¬¸ê°€ ì •ë³´", "í™˜ê²½ ë³´í˜¸ ë°©ë²•", "ê´€ì°° í¬ì¸íŠ¸", "ì•ˆì „ ìˆ˜ì¹™", "ì§€ì† ê°€ëŠ¥ì„±"],
                    additions: ["ì „ë¬¸ê°€ ì •ë³´", "í™˜ê²½ ë³´í˜¸", "ê´€ì°° í¬ì¸íŠ¸", "ì•ˆì „ ìˆ˜ì¹™", "ì§€ì† ê°€ëŠ¥ì„±"]
                },
                family: {
                    sections: generateFamilyEnhancements(originalText, topic),
                    changes: ["ìœ¡ì•„ ì „ë¬¸ê°€ ì¡°ì–¸", "ë°œë‹¬ ë‹¨ê³„ë³„ ê°€ì´ë“œ", "ì•ˆì „ ê´€ë¦¬ë²•", "êµìœ¡ ë°©ë²•", "ê°€ì¡± ì†Œí†µë²•"],
                    additions: ["ì „ë¬¸ê°€ ì¡°ì–¸", "ë°œë‹¬ ê°€ì´ë“œ", "ì•ˆì „ ê´€ë¦¬", "êµìœ¡ ë°©ë²•", "ì†Œí†µë²•"]
                }
            };
            
            // ì„ íƒëœ ë„ë©”ì¸ì˜ ê°•í™” ë‚´ìš© ë°˜í™˜, ì—†ìœ¼ë©´ ë²”ìš© ê°•í™” ë‚´ìš©
            const selectedEnhancement = enhancements[domain] || {
                sections: generateUniversalEnhancements(originalText, topic, category),
                changes: ["ì „ë¬¸ê°€ ê²½í—˜ ì •ë³´", "ì‹¤ìš© íŒ ì¶”ê°€", "ë‹¨ê³„ë³„ ì ‘ê·¼ë²•", "íš¨ê³¼ ê·¹ëŒ€í™” ë°©ë²•", "ì§€ì† ì‹¤ì²œ ê°€ì´ë“œ"],
                additions: ["ì „ë¬¸ê°€ íŒ", "ì‹¤ìš© ì •ë³´", "ë‹¨ê³„ë³„ ê°€ì´ë“œ", "íš¨ê³¼ ê·¹ëŒ€í™”", "ì§€ì† ê°€ëŠ¥ì„±"]
            };
            
            return {
                contextualInfo: [], // ì›ë³¸ í…ìŠ¤íŠ¸ ìˆ˜ì • ì—†ìŒ
                additionalSections: selectedEnhancement.sections,
                changes: selectedEnhancement.changes,
                additions: selectedEnhancement.additions,
                detectedDomain: domain,
                confidence: Math.max(...Object.values(scores)) / Math.max(1, Object.values(scores).reduce((a, b) => a + b, 0))
            };
        }

        // ìŠ¤ë§ˆíŠ¸í•œ ì—¬í–‰ ì»¨í…ì¸  ê°•í™” í•¨ìˆ˜
        function generateTravelEnhancements(originalText, topic) {
            const topicLower = topic.toLowerCase();
            const textLower = originalText.toLowerCase();
            
            let enhancements = [];
            
            // í…ìŠ¤íŠ¸ ë¶„ì„í•´ì„œ ê´€ë ¨ëœ ì‹¤ìš© ì •ë³´ë§Œ ì¶”ê°€
            if (textLower.includes('ì„œí•‘') || textLower.includes('surf')) {
                enhancements.push(`\n## ğŸ„â€â™‚ï¸ ì„œí•‘ ì‹¤ìš© ê°€ì´ë“œ\n\nâ€¢ **ë² ìŠ¤íŠ¸ íƒ€ì´ë°**: ì˜¤ì „ 6-9ì‹œ, ë°”ëŒì´ ì”ì”í•œ ì‹œê°„ëŒ€\nâ€¢ **ì¥ë¹„ ë Œíƒˆ**: ë³´ë“œ í•˜ë£¨ 150,000ë£¨í”¼ì•„ (~â‚©12,000)\nâ€¢ **ê°•ìŠµë¹„**: ê°œì¸ë ˆìŠ¨ 1ì‹œê°„ 400,000ë£¨í”¼ì•„ (~â‚©32,000)\nâ€¢ **ì´ˆë³´ ì¶”ì²œ**: ìš¸ë£¨ì™€ëšœ ë¹„ì¹˜ë³´ë‹¤ ë”ë¸”ì‹ìŠ¤ ë¹„ì¹˜ê°€ íŒŒë„ê°€ ì™„ë§Œí•¨`);
            }
            
            if (textLower.includes('ì¹´í˜') || textLower.includes('ë§›ì§‘') || textLower.includes('ìŒì‹')) {
                enhancements.push(`\n## ğŸ½ï¸ ë§›ì§‘ & ì¹´í˜ ì •ë³´\n\nâ€¢ **í˜„ì§€ì¸ ë§›ì§‘**: ì™€ë£½ ë‚˜ì‹œ ì•„ì–Œ ì´ë¶€ ë§Œêµ¬(Warung Nasi Ayam Ibu Mangku) - ë‚˜ì‹œì•„ì–Œ 35,000ë£¨í”¼ì•„\nâ€¢ **ì„œì–‘ì‹**: La Plancha í•´ë³€ í´ëŸ½ - í‰ê·  1ì¸ 250,000ë£¨í”¼ì•„\nâ€¢ **ì¹´í˜ ì¶”ì²œ**: Deus Ex Machina, The Shady Shack (ë¹„ê±´ ë©”ë‰´ ìœ ëª…)\nâ€¢ **í˜„ì§€ ë””ì €íŠ¸**: ì—ìŠ¤ ìº„í(Es Campur) - ì „í†µ íŒ¥ë¹™ìˆ˜ 25,000ë£¨í”¼ì•„`);
            }
            
            if (textLower.includes('ìˆ™ì†Œ') || textLower.includes('í˜¸í…”') || textLower.includes('ë¹Œë¼')) {
                enhancements.push(`\n## ğŸ¨ ìˆ™ë°• íŒ\n\nâ€¢ **ê°€ì„±ë¹„ í˜¸ìŠ¤í…”**: 1ë°• 15-30ë§Œì›ëŒ€ (ì—ì–´ì»¨, ìˆ˜ì˜ì¥ í¬í•¨)\nâ€¢ **ì¤‘ê¸‰ í˜¸í…”**: 1ë°• 50-80ë§Œì›ëŒ€ (ì¡°ì‹ í¬í•¨, í•´ë³€ ì ‘ê·¼ ìš©ì´)\nâ€¢ **ëŸ­ì…”ë¦¬ ë¹Œë¼**: 1ë°• 150-300ë§Œì›ëŒ€ (ì „ìš© ìˆ˜ì˜ì¥, 24ì‹œê°„ ì„œë¹„ìŠ¤)\nâ€¢ **ì˜ˆì•½ íŒ**: í˜„ì§€ ë„ì°© í›„ ì§ì ‘ ì˜ˆì•½í•˜ë©´ 30% í• ì¸ ê°€ëŠ¥`);
            }
            
            // ê¸°ë³¸ì ì¸ ì‹¤ìš© ì •ë³´ëŠ” í•­ìƒ í¬í•¨
            enhancements.push(`\n## ğŸ’¡ í•„ìˆ˜ ì—¬í–‰ ì •ë³´\n\nâ€¢ **êµí†µë¹„**: ê³µí•­-ì§±êµ¬ íƒì‹œ 250,000ë£¨í”¼ì•„ (~â‚©20,000), ê·¸ë© ì´ìš© ì¶”ì²œ\nâ€¢ **í˜„ì§€ êµí†µ**: ìŠ¤ì¿ í„° ë Œíƒˆ í•˜ë£¨ 70,000ë£¨í”¼ì•„ (~â‚©5,600), êµ­ì œë©´í—ˆ í•„ìˆ˜\nâ€¢ **í™˜ì „**: 1ë§Œì› = ì•½ 120,000ë£¨í”¼ì•„ (2024ë…„ ê¸°ì¤€)\nâ€¢ **íŒ ë¬¸í™”**: ë ˆìŠ¤í† ë‘ 10%, ë§ˆì‚¬ì§€ 20,000ë£¨í”¼ì•„, íƒì‹œ ë°˜ì˜¬ë¦¼`);
            
            enhancements.push(`\n## âš ï¸ ì£¼ì˜ì‚¬í•­\n\nâ€¢ **ì„±ìˆ˜ê¸°**: 7-8ì›”, 12ì›”-1ì›” (ìˆ™ë°•ë¹„ 2ë°°, ë¯¸ë¦¬ ì˜ˆì•½ í•„ìˆ˜)\nâ€¢ **ìš°ê¸°**: 11ì›”-3ì›” (ì˜¤í›„ ìŠ¤ì½œ ë¹ˆë²ˆ, ìš°ì‚° í•„ìˆ˜)\nâ€¢ **ì•ˆì „**: í•´ë³€ ë°¤ëŠ¦ì€ ì‹œê°„ í˜¼ì ë‹¤ë‹ˆê¸° ê¸ˆì§€\nâ€¢ **í˜‘ìƒ**: ê´€ê´‘ì§€ ê°€ê²©ì€ í˜‘ìƒ ê°€ëŠ¥ (íŠ¹íˆ ì•„íŠ¸ë§ˆì¼“, ê¸°ë…í’ˆì )`);
            
            return enhancements.join('');
        }

        // ìŠ¤ë§ˆíŠ¸í•œ ìš”ë¦¬ ì»¨í…ì¸  ê°•í™” í•¨ìˆ˜  
        function generateFoodEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ì¬ë£Œ') || textLower.includes('ingredient')) {
                enhancements.push(`\n## ğŸ›’ ì¬ë£Œ ì„ íƒ ê°€ì´ë“œ\n\nâ€¢ **ì‹ ì„ ë„ ì²´í¬**: ìœ¡ë¥˜ëŠ” íƒ„ë ¥ì„±, ì±„ì†ŒëŠ” ìƒ‰ê¹”ê³¼ ìˆ˜ë¶„ê° í™•ì¸\nâ€¢ **ëŒ€ì²´ì¬ë£Œ**: í’ˆì ˆ ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ëŒ€ì•ˆ ì¬ë£Œ ëª©ë¡\nâ€¢ **ë³´ê´€ë²•**: ì¬ë£Œë³„ ìµœì  ë³´ê´€ ì˜¨ë„ì™€ ê¸°ê°„\nâ€¢ **êµ¬ë§¤ íŒ**: ëŒ€í˜•ë§ˆíŠ¸ vs ì „í†µì‹œì¥ ê°€ê²© ë¹„êµ`);
            }
            
            if (textLower.includes('ì¡°ë¦¬') || textLower.includes('ìš”ë¦¬') || textLower.includes('ë§Œë“¤ê¸°')) {
                enhancements.push(`\n## ğŸ‘¨â€ğŸ³ ì¡°ë¦¬ í•µì‹¬ ê¸°ë²•\n\nâ€¢ **í™”ë ¥ ì¡°ì ˆ**: ì„¼ ë¶ˆ-ì¤‘ ë¶ˆ-ì•½ë¶ˆ ì „í™˜ íƒ€ì´ë°\nâ€¢ **ê°„ ë§ì¶”ê¸°**: ì¡°ë¦¬ ì¤‘ê°„ì¤‘ê°„ ë§›ë³´ë©° ë‹¨ê³„ë³„ ê°„ ì¡°ì ˆ\nâ€¢ **í…ìŠ¤ì²˜**: ìŒì‹ë³„ ìµœì  ì‹ê°ì„ ìœ„í•œ ì¡°ë¦¬ ì‹œê°„\nâ€¢ **í”Œë ˆì´íŒ…**: ìƒ‰ê¹” ë°°ì¹˜ì™€ ê³ ëª…ìœ¼ë¡œ ë¹„ì£¼ì–¼ ì™„ì„±`);
            }
            
            enhancements.push(`\n## ğŸ’¡ ì‹¤íŒ¨ ë°©ì§€ íŒ\n\nâ€¢ **í”í•œ ì‹¤ìˆ˜**: ê³¼ë„í•œ ê°„, ë„ˆë¬´ ì„¼ ë¶ˆ ì‚¬ìš©, ì¬ë£Œ íˆ¬ì… ìˆœì„œ ì˜¤ë¥˜\nâ€¢ **ì‘ê¸‰ì²˜ì¹˜**: ë„ˆë¬´ ì§œê±°ë‚˜ ë§¤ìš¸ ë•Œ ëŒ€ì²˜ë²•\nâ€¢ **ì‹œê°„ ê´€ë¦¬**: ë™ì‹œ ì¡°ë¦¬ë¥¼ ìœ„í•œ ì¤€ë¹„ ìˆœì„œ\nâ€¢ **ë„êµ¬ í™œìš©**: ê¸°ë³¸ ì¡°ë¦¬ë„êµ¬ 200% í™œìš©ë²•`);
            
            return enhancements.join('');
        }

        // ìŠ¤ë§ˆíŠ¸í•œ ê¸°ìˆ  ì»¨í…ì¸  ê°•í™” í•¨ìˆ˜
        function generateTechEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ì½”ë“œ') || textLower.includes('í”„ë¡œê·¸ë˜ë°')) {
                enhancements.push(`\n## ğŸ’» ì‹¤ë¬´ ì½”ë“œ ì˜ˆì‹œ\n\nâ€¢ **ì—ëŸ¬ ì²˜ë¦¬**: try-catch ë¸”ë¡ í™œìš©í•œ ì•ˆì •ì ì¸ ì½”ë“œ\nâ€¢ **ì„±ëŠ¥ ìµœì í™”**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¤„ì´ëŠ” êµ¬ì²´ì  ê¸°ë²•\nâ€¢ **ì½”ë“œ ë¦¬ë·°**: íŒ€ í˜‘ì—…ì„ ìœ„í•œ ê°€ë…ì„± ê°œì„ \nâ€¢ **í…ŒìŠ¤íŠ¸**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±ìœ¼ë¡œ ë²„ê·¸ ì‚¬ì „ ë°©ì§€`);
            }
            
            enhancements.push(`\n## ğŸ”§ ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ\n\nâ€¢ **ë²„ì „ ê´€ë¦¬**: Git í™œìš©í•œ íš¨ìœ¨ì ì¸ í˜‘ì—… ë°©ë²•\nâ€¢ **ë””ë²„ê¹…**: ë‹¨ê³„ë³„ ë¬¸ì œ í•´ê²° í”„ë¡œì„¸ìŠ¤\nâ€¢ **ë¬¸ì„œí™”**: ì½”ë“œ ì˜ë„ ëª…í™•íˆ ì „ë‹¬í•˜ëŠ” ì£¼ì„ ì‘ì„±ë²•\nâ€¢ **ë°°í¬**: ì‹¤ì œ ì„œë¹„ìŠ¤ í™˜ê²½ ê³ ë ¤ì‚¬í•­`);
            
            return enhancements.join('');
        }

        function generateHealthEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ìš´ë™') || textLower.includes('exercise')) {
                enhancements.push(`\n## ğŸ’ª ì „ë¬¸ íŠ¸ë ˆì´ë„ˆ ì¡°ì–¸\n\nâ€¢ **ì˜¬ë°”ë¥¸ ìì„¸**: ë¶€ìƒ ì˜ˆë°©ê³¼ íš¨ê³¼ ê·¹ëŒ€í™”ë¥¼ ìœ„í•œ ì •í™•í•œ í¼\nâ€¢ **ìš´ë™ ê°•ë„**: ê°œì¸ ì²´ë ¥ì— ë§ëŠ” ì ì ˆí•œ ê°•ë„ ì„¤ì •ë²•\nâ€¢ **íœ´ì‹ì˜ ì¤‘ìš”ì„±**: ê·¼ìœ¡ íšŒë³µê³¼ ì„±ì¥ì„ ìœ„í•œ íœ´ì‹ ê³„íš\nâ€¢ **ì˜ì–‘ ê´€ë¦¬**: ìš´ë™ íš¨ê³¼ë¥¼ ë†’ì´ëŠ” ì‹ë‹¨ ê°€ì´ë“œ`);
            }
            
            enhancements.push(`\n## âš ï¸ ì•ˆì „ ìˆ˜ì¹™ & ì£¼ì˜ì‚¬í•­\n\nâ€¢ **ë¶€ìƒ ì˜ˆë°©**: ìš´ë™ ì „í›„ ìŠ¤íŠ¸ë ˆì¹­ê³¼ ì›Œë°ì—…ì˜ ì¤‘ìš”ì„±\nâ€¢ **ê³¼ë„í•œ ìš´ë™ ìœ„í—˜**: ì˜¤ë²„íŠ¸ë ˆì´ë‹ ì¦ìƒê³¼ ì˜ˆë°©ë²•\nâ€¢ **ê±´ê°• ìƒíƒœ ì²´í¬**: ìš´ë™ ì‹œì‘ ì „ í™•ì¸í•´ì•¼ í•  ê±´ê°• ì§€í‘œ\nâ€¢ **ì „ë¬¸ì˜ ìƒë‹´**: ê¸°ì¡´ ì§ˆí™˜ì´ ìˆëŠ” ê²½ìš° ì£¼ì˜ì‚¬í•­`);
            
            return enhancements.join('');
        }

        function generateLifestyleEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ì¸í…Œë¦¬ì–´') || textLower.includes('interior')) {
                enhancements.push(`\n## ğŸ  ì¸í…Œë¦¬ì–´ ì „ë¬¸ê°€ íŒ\n\nâ€¢ **ê³µê°„ í™œìš©**: ì‘ì€ ê³µê°„ì„ ë„“ì–´ ë³´ì´ê²Œ í•˜ëŠ” ë°°ì¹˜ë²•\nâ€¢ **ì»¬ëŸ¬ ë§¤ì¹­**: ì¡°í™”ë¡œìš´ ìƒ‰ìƒ ì¡°í•©ìœ¼ë¡œ ë¶„ìœ„ê¸° ì—°ì¶œ\nâ€¢ **ì¡°ëª… í™œìš©**: ìì—°ê´‘ê³¼ ì¸ê³µì¡°ëª…ì˜ ê· í˜•ì¡íŒ í™œìš©\nâ€¢ **ì˜ˆì‚° ê´€ë¦¬**: ë¹„ìš© ëŒ€ë¹„ íš¨ê³¼ì ì¸ ì¸í…Œë¦¬ì–´ ìš°ì„ ìˆœìœ„`);
            } else if (textLower.includes('íŒ¨ì…˜') || textLower.includes('fashion')) {
                enhancements.push(`\n## ğŸ‘— íŒ¨ì…˜ ìŠ¤íƒ€ì¼ë¦¬ìŠ¤íŠ¸ ì¡°ì–¸\n\nâ€¢ **ì²´í˜•ë³„ ìŠ¤íƒ€ì¼ë§**: ê°œì¸ ì²´í˜•ì— ë§ëŠ” ì˜· ì„ íƒë²•\nâ€¢ **ì»¬ëŸ¬ ë§¤ì¹­**: í”¼ë¶€í†¤ì— ì–´ìš¸ë¦¬ëŠ” ìƒ‰ìƒ ì°¾ê¸°\nâ€¢ **íŠ¸ë Œë“œ í™œìš©**: ìœ í–‰ì„ ê°œì„±ì— ë§ê²Œ ì ìš©í•˜ëŠ” ë°©ë²•\nâ€¢ **ì˜ˆì‚° ê´€ë¦¬**: í•©ë¦¬ì  ê°€ê²©ìœ¼ë¡œ ìŠ¤íƒ€ì¼ ì™„ì„±í•˜ê¸°`);
            }
            
            enhancements.push(`\n## âœ¨ ë¼ì´í”„ìŠ¤íƒ€ì¼ í–¥ìƒ íŒ\n\nâ€¢ **ì§€ì† ê°€ëŠ¥í•œ ìŠµê´€**: ì˜¤ë˜ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ì‹¤ì²œ ë°©ë²•\nâ€¢ **ê°œì¸ ë§ì¶¤**: ìì‹ ì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼ì— ë§ëŠ” ì ìš©ë²•\nâ€¢ **íš¨ìœ¨ì„± ê·¹ëŒ€í™”**: ì‹œê°„ê³¼ ë¹„ìš©ì„ ì ˆì•½í•˜ëŠ” ìŠ¤ë§ˆíŠ¸í•œ ë°©ë²•\nâ€¢ **ë§Œì¡±ë„ í–¥ìƒ**: ì‘ì€ ë³€í™”ë¡œ í° ë§Œì¡±ê° ì–»ê¸°`);
            
            return enhancements.join('');
        }

        function generateBusinessEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ì°½ì—…') || textLower.includes('startup')) {
                enhancements.push(`\n## ğŸš€ ì°½ì—… ì „ë¬¸ê°€ ì¸ì‚¬ì´íŠ¸\n\nâ€¢ **ì‹œì¥ ê²€ì¦**: ì•„ì´ë””ì–´ì˜ ì‹œì¥ì„± í™•ì¸í•˜ëŠ” êµ¬ì²´ì  ë°©ë²•\nâ€¢ **ìê¸ˆ ì¡°ë‹¬**: ì´ˆê¸° ìë³¸ í™•ë³´ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ ê²½ë¡œ\nâ€¢ **íŒ€ êµ¬ì„±**: ì„±ê³µì ì¸ ìŠ¤íƒ€íŠ¸ì—…ì„ ìœ„í•œ í•µì‹¬ ì¸ì¬ ì˜ì…\nâ€¢ **ìœ„í—˜ ê´€ë¦¬**: ì°½ì—… ê³¼ì •ì—ì„œ ë§ˆì£¼í•  ìˆ˜ ìˆëŠ” ë¦¬ìŠ¤í¬ ëŒ€ë¹„`);
            } else if (textLower.includes('íˆ¬ì') || textLower.includes('investment')) {
                enhancements.push(`\n## ğŸ“ˆ íˆ¬ì ì „ë¬¸ê°€ ì¡°ì–¸\n\nâ€¢ **ë¦¬ìŠ¤í¬ ê´€ë¦¬**: í¬íŠ¸í´ë¦¬ì˜¤ ë‹¤ì–‘í™”ë¥¼ í†µí•œ ìœ„í—˜ ë¶„ì‚°\nâ€¢ **ì‹œì¥ ë¶„ì„**: íˆ¬ì ëŒ€ìƒì˜ í€ë”ë©˜í„¸ ë¶„ì„ë²•\nâ€¢ **íƒ€ì´ë°**: ì‹œì¥ ì‚¬ì´í´ì— ë”°ë¥¸ íˆ¬ì ì „ëµ\nâ€¢ **ì„¸ê¸ˆ íš¨ìœ¨**: íˆ¬ì ìˆ˜ìµì— ëŒ€í•œ ì„¸ê¸ˆ ìµœì í™” ë°©ë²•`);
            }
            
            enhancements.push(`\n## ğŸ’¼ ì‹¤ë¬´ ê²½í—˜ & ë…¸í•˜ìš°\n\nâ€¢ **ë„¤íŠ¸ì›Œí‚¹**: íš¨ê³¼ì ì¸ ì¸ë§¥ êµ¬ì¶•ê³¼ ê´€ê³„ ìœ ì§€ë²•\nâ€¢ **ì„±ê³¼ ì¸¡ì •**: KPI ì„¤ì •ê³¼ ì„±ê³¼ ë¶„ì„ ë°©ë²•ë¡ \nâ€¢ **ì§€ì† ì„±ì¥**: ì•ˆì •ì ì´ê³  ì§€ì†ì ì¸ ì„±ì¥ ì „ëµ\nâ€¢ **ìœ„ê¸° ëŒ€ì‘**: ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ì—ì„œì˜ ëŒ€ì²˜ ë°©ì•ˆ`);
            
            return enhancements.join('');
        }

        function generateEducationEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('í•™ìŠµ') || textLower.includes('study')) {
                enhancements.push(`\n## ğŸ“š í•™ìŠµ íš¨ìœ¨ ê·¹ëŒ€í™” ë°©ë²•\n\nâ€¢ **ê¸°ì–µë²•**: ì¥ê¸° ê¸°ì–µìœ¼ë¡œ ì €ì¥í•˜ëŠ” íš¨ê³¼ì ì¸ í•™ìŠµ ê¸°ë²•\nâ€¢ **ì§‘ì¤‘ë ¥ í–¥ìƒ**: ì£¼ì˜ë ¥ ë¶„ì‚° ì—†ì´ ëª°ì…í•˜ëŠ” í™˜ê²½ ì¡°ì„±ë²•\nâ€¢ **ë³µìŠµ ì „ëµ**: ì—ë¹™í•˜ìš°ìŠ¤ ë§ê° ê³¡ì„ ì„ í™œìš©í•œ ë°˜ë³µ í•™ìŠµ\nâ€¢ **ì‹¤ë¬´ ì ìš©**: ë°°ìš´ ë‚´ìš©ì„ ì‹¤ì œ ì—…ë¬´ì— ì ìš©í•˜ëŠ” ë°©ë²•`);
            }
            
            enhancements.push(`\n## ğŸ¯ êµìœ¡ ì „ë¬¸ê°€ ê°€ì´ë“œ\n\nâ€¢ **ê°œì¸ë³„ í•™ìŠµ ìŠ¤íƒ€ì¼**: ì‹œê°ì , ì²­ê°ì , ì²´í—˜ì  í•™ìŠµë²• í™œìš©\nâ€¢ **ëª©í‘œ ì„¤ì •**: SMART ê¸°ë²•ìœ¼ë¡œ êµ¬ì²´ì ì¸ í•™ìŠµ ëª©í‘œ ìˆ˜ë¦½\nâ€¢ **í‰ê°€ì™€ í”¼ë“œë°±**: í•™ìŠµ ì§„ë„ ì²´í¬ì™€ ê°œì„ ì  íŒŒì•…\nâ€¢ **ì§€ì† í•™ìŠµ**: í‰ìƒ í•™ìŠµì„ ìœ„í•œ ë™ê¸° ë¶€ì—¬ì™€ ìŠµê´€ í˜•ì„±`);
            
            return enhancements.join('');
        }

        function generateArtEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ê·¸ë¦¼') || textLower.includes('painting')) {
                enhancements.push(`\n## ğŸ¨ ì˜ˆìˆ ê°€ ì°½ì‘ ê¸°ë²•\n\nâ€¢ **í‘œí˜„ ê¸°ë²•**: ë‹¤ì–‘í•œ ë§¤ì²´ì™€ ë„êµ¬ì˜ íŠ¹ì„± í™œìš©ë²•\nâ€¢ **êµ¬ë„ì™€ ìƒ‰ê°**: ì‹œê°ì  ê· í˜•ê³¼ ê°ì • í‘œí˜„ì„ ìœ„í•œ ìƒ‰ìƒ ì´ë¡ \nâ€¢ **ì°½ì‘ ê³¼ì •**: ì•„ì´ë””ì–´ ë°œìƒë¶€í„° ì™„ì„±ê¹Œì§€ì˜ ì²´ê³„ì  ì ‘ê·¼\nâ€¢ **ê°œì„± ê°œë°œ**: ìì‹ ë§Œì˜ ë…íŠ¹í•œ ìŠ¤íƒ€ì¼ ì°¾ê³  ë°œì „ì‹œí‚¤ê¸°`);
            } else if (textLower.includes('ì‚¬ì§„') || textLower.includes('photography')) {
                enhancements.push(`\n## ğŸ“¸ ì‚¬ì§„ì‘ê°€ ì „ë¬¸ íŒ\n\nâ€¢ **êµ¬ë„ì™€ ì•µê¸€**: í”¼ì‚¬ì²´ë¥¼ ë‹ë³´ì´ê²Œ í•˜ëŠ” ì´¬ì˜ êµ¬ë„ë²•\nâ€¢ **ë¹›ê³¼ ê·¸ë¦¼ì**: ìì—°ê´‘ê³¼ ì¸ê³µì¡°ëª… í™œìš©í•œ ë¶„ìœ„ê¸° ì—°ì¶œ\nâ€¢ **í›„ë³´ì • ê¸°ìˆ **: ì‚¬ì§„ì˜ ì™„ì„±ë„ë¥¼ ë†’ì´ëŠ” í¸ì§‘ ë…¸í•˜ìš°\nâ€¢ **ì¥ë¹„ í™œìš©**: ì¹´ë©”ë¼ì™€ ë Œì¦ˆ íŠ¹ì„±ì„ ì‚´ë¦° ì´¬ì˜ë²•`);
            }
            
            enhancements.push(`\n## ğŸŒŸ ì˜ˆìˆ  ê°ìƒê³¼ ë¹„í‰\n\nâ€¢ **ì‘í’ˆ ë¶„ì„**: ì˜ˆìˆ  ì‘í’ˆì˜ ì˜ë„ì™€ ë©”ì‹œì§€ í•´ì„ë²•\nâ€¢ **ì—­ì‚¬ì  ë§¥ë½**: ì‹œëŒ€ì  ë°°ê²½ê³¼ ì˜ˆìˆ ì‚¬ì  ì˜ë¯¸ ì´í•´\nâ€¢ **ê°œì¸ì  ê°ìƒ**: ì£¼ê´€ì  ê°ìƒì„ ê°ê´€ì ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ë°©ë²•\nâ€¢ **ì°½ì‘ ì˜ê°**: ë‹¤ë¥¸ ì‘í’ˆì—ì„œ ì˜ê°ì„ ì–»ëŠ” íš¨ê³¼ì ì¸ ë°©ë²•`);
            
            return enhancements.join('');
        }

        function generateNatureEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ë“±ì‚°') || textLower.includes('hiking')) {
                enhancements.push(`\n## ğŸ”ï¸ ë“±ì‚° ì „ë¬¸ê°€ ê°€ì´ë“œ\n\nâ€¢ **ì½”ìŠ¤ ì„ íƒ**: ì²´ë ¥ê³¼ ê²½í—˜ì— ë§ëŠ” ì•ˆì „í•œ ë“±ì‚°ë¡œ ì„ ë³„\nâ€¢ **ì¥ë¹„ ì¤€ë¹„**: ê³„ì ˆê³¼ ì½”ìŠ¤ë³„ í•„ìˆ˜ ì¥ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸\nâ€¢ **ì•ˆì „ ìˆ˜ì¹™**: ì‚°í–‰ ì¤‘ ì‘ê¸‰ìƒí™© ëŒ€ì²˜ë²•ê³¼ ì˜ˆë°©ë²•\nâ€¢ **ìì—° ë³´í˜¸**: ë“±ì‚°ê°ì´ ì§€ì¼œì•¼ í•  í™˜ê²½ ë³´í˜¸ ì›ì¹™`);
            } else if (textLower.includes('ìº í•‘') || textLower.includes('camping')) {
                enhancements.push(`\n## ğŸ•ï¸ ìº í•‘ ë§ˆìŠ¤í„° ë…¸í•˜ìš°\n\nâ€¢ **ìº í•‘ì¥ ì„ íƒ**: ì´ˆë³´ìë¶€í„° ìˆ™ë ¨ìê¹Œì§€ ì í•©í•œ ìº í•‘ì§€ ì¶”ì²œ\nâ€¢ **í…íŠ¸ ì„¤ì¹˜**: ë‚ ì”¨ì™€ ì§€í˜•ì„ ê³ ë ¤í•œ ì•ˆì „í•œ ì„¤ì¹˜ë²•\nâ€¢ **ìº í•‘ ìš”ë¦¬**: ì•¼ì™¸ì—ì„œ ì‰½ê³  ë§›ìˆê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìš”ë¦¬ë²•\nâ€¢ **ìì—°ê³¼ì˜ ê³µì¡´**: Leave No Trace ì›ì¹™ ì‹¤ì²œë²•`);
            }
            
            enhancements.push(`\n## ğŸŒ¿ ìì—° ê´€ì°°ê³¼ ë³´í˜¸\n\nâ€¢ **ìƒíƒœ ê´€ì°°**: ë™ì‹ë¬¼ ê´€ì°° ì‹œ ì§€ì¼œì•¼ í•  ì˜ˆì˜ì™€ ë°©ë²•\nâ€¢ **í™˜ê²½ ë³´í˜¸**: ê°œì¸ì´ ì‹¤ì²œí•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ í™˜ê²½ ë³´í˜¸ í™œë™\nâ€¢ **ê³„ì ˆë³„ íŠ¹ì„±**: ì‚¬ê³„ì ˆ ìì—°ì˜ ë³€í™”ì™€ ê´€ì°° í¬ì¸íŠ¸\nâ€¢ **ì§€ì† ê°€ëŠ¥ì„±**: ìì—°ì„ ë³´í˜¸í•˜ë©´ì„œ ì¦ê¸°ëŠ” í˜„ëª…í•œ ë°©ë²•`);
            
            return enhancements.join('');
        }

        function generateFamilyEnhancements(originalText, topic) {
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            if (textLower.includes('ìœ¡ì•„') || textLower.includes('parenting')) {
                enhancements.push(`\n## ğŸ‘¶ ìœ¡ì•„ ì „ë¬¸ê°€ ì¡°ì–¸\n\nâ€¢ **ë°œë‹¬ ë‹¨ê³„ë³„ íŠ¹ì„±**: ì›”ë ¹ë³„ ì•„ì´ì˜ ë°œë‹¬ íŠ¹ì§•ê³¼ ì ì ˆí•œ ìê·¹\nâ€¢ **ì–‘ìœ¡ ìŠ¤í‚¬**: ì•„ì´ì™€ì˜ íš¨ê³¼ì ì¸ ì†Œí†µê³¼ í›ˆìœ¡ ë°©ë²•\nâ€¢ **ì˜ì–‘ ê´€ë¦¬**: ì„±ì¥ê¸° ì•„ì´ì—ê²Œ í•„ìš”í•œ ê· í˜• ì¡íŒ ì‹ë‹¨\nâ€¢ **ì•ˆì „ ê´€ë¦¬**: ê°€ì • ë‚´ ì•„ì´ ì•ˆì „ì‚¬ê³  ì˜ˆë°©ë²•`);
            } else if (textLower.includes('êµìœ¡') || textLower.includes('education')) {
                enhancements.push(`\n## ğŸ“– ê°€ì • êµìœ¡ ê°€ì´ë“œ\n\nâ€¢ **í•™ìŠµ ë™ê¸°**: ì•„ì´ì˜ í•™ìŠµ ì˜ìš•ì„ ë†’ì´ëŠ” ê²©ë ¤ ë°©ë²•\nâ€¢ **ì°½ì˜ì„± ê°œë°œ**: ë†€ì´ë¥¼ í†µí•œ ì°½ì˜ì  ì‚¬ê³ ë ¥ ì¦ì§„ë²•\nâ€¢ **ë…ì„œ ìŠµê´€**: ì±… ì½ê¸°ë¥¼ ì¢‹ì•„í•˜ëŠ” ì•„ì´ë¡œ í‚¤ìš°ëŠ” ë°©ë²•\nâ€¢ **ì§„ë¡œ ì§€ë„**: ì•„ì´ì˜ ì ì„±ê³¼ í¥ë¯¸ ë°œê²¬í•˜ê³  ì§€ì›í•˜ê¸°`);
            }
            
            enhancements.push(`\n## ğŸ’• ê°€ì¡± ê´€ê³„ ì¦ì§„ë²•\n\nâ€¢ **ì†Œí†µì˜ ê¸°ìˆ **: ê°€ì¡± êµ¬ì„±ì› ê°„ ê±´ê°•í•œ ì˜ì‚¬ì†Œí†µ ë°©ë²•\nâ€¢ **ê°ˆë“± í•´ê²°**: ê°€ì • ë‚´ ê°ˆë“±ì„ í˜„ëª…í•˜ê²Œ í•´ê²°í•˜ëŠ” ë…¸í•˜ìš°\nâ€¢ **ì¶”ì–µ ë§Œë“¤ê¸°**: ê°€ì¡±ë§Œì˜ íŠ¹ë³„í•œ ì¶”ì–µì„ ë§Œë“œëŠ” í™œë™ë“¤\nâ€¢ **ì›Œë¼ë°¸**: ì¼ê³¼ ê°€ì •ì˜ ê· í˜• ì¡íŒ ìƒí™œ ê´€ë¦¬ë²•`);
            
            return enhancements.join('');
        }

        function generateUniversalEnhancements(originalText, topic, category) {
            // ë‚´ìš©ì´ íŠ¹ì • ë„ë©”ì¸ì— ì†í•˜ì§€ ì•Šê±°ë‚˜ ë¶„ë¥˜ê°€ ì• ë§¤í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë²”ìš© ê°•í™”
            const textLower = originalText.toLowerCase();
            let enhancements = [];
            
            // í‚¤ì›Œë“œ ê¸°ë°˜ ë™ì  ì„¹ì…˜ ìƒì„±
            const hasSteps = textLower.includes('ë°©ë²•') || textLower.includes('ë‹¨ê³„') || textLower.includes('how');
            const hasTips = textLower.includes('íŒ') || textLower.includes('ë…¸í•˜ìš°') || textLower.includes('tip');
            const hasWarning = textLower.includes('ì£¼ì˜') || textLower.includes('ìœ„í—˜') || textLower.includes('ì¡°ì‹¬');
            
            if (hasSteps) {
                enhancements.push(`\n## ğŸ“‹ ë‹¨ê³„ë³„ ì‹¤í–‰ ê°€ì´ë“œ\n\nâ€¢ **ì²´ê³„ì  ì ‘ê·¼**: ìˆœì„œëŒ€ë¡œ ë”°ë¼í•˜ë©´ ì„±ê³µí•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì  ë‹¨ê³„\nâ€¢ **ì¤€ë¹„ì‚¬í•­**: ì‹œì‘í•˜ê¸° ì „ì— ë¯¸ë¦¬ ì¤€ë¹„í•´ì•¼ í•  ê²ƒë“¤\nâ€¢ **ì²´í¬í¬ì¸íŠ¸**: ê° ë‹¨ê³„ì—ì„œ í™•ì¸í•´ì•¼ í•  ì¤‘ìš” ì‚¬í•­ë“¤\nâ€¢ **ë¬¸ì œ í•´ê²°**: ì§„í–‰ ì¤‘ ë§‰í˜”ì„ ë•Œ ëŒ€ì²˜ ë°©ë²•`);
            }
            
            if (hasTips) {
                enhancements.push(`\n## ğŸ’¡ ì „ë¬¸ê°€ ì‹¤ìš© íŒ\n\nâ€¢ **íš¨ìœ¨ì„± ì¦ëŒ€**: ì‹œê°„ê³¼ ë…¸ë ¥ì„ ì ˆì•½í•˜ëŠ” ìŠ¤ë§ˆíŠ¸í•œ ë°©ë²•\nâ€¢ **í’ˆì§ˆ í–¥ìƒ**: ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•œ ì„¸ë¶€ ê¸°ë²•ë“¤\nâ€¢ **ë¹„ìš© ì ˆì•½**: í•©ë¦¬ì ì¸ ë¹„ìš©ìœ¼ë¡œ ëª©í‘œ ë‹¬ì„±í•˜ëŠ” ë…¸í•˜ìš°\nâ€¢ **ì§€ì† ê°€ëŠ¥ì„±**: ê¾¸ì¤€íˆ ì‹¤ì²œí•  ìˆ˜ ìˆëŠ” í˜„ì‹¤ì  ë°©ë²•`);
            }
            
            if (hasWarning) {
                enhancements.push(`\n## âš ï¸ ì£¼ì˜ì‚¬í•­ & ì•ˆì „ ê°€ì´ë“œ\n\nâ€¢ **ìœ„í—˜ ìš”ì†Œ**: ë¯¸ë¦¬ ì•Œì•„ë‘ì–´ì•¼ í•  ì ì¬ì  ìœ„í—˜ë“¤\nâ€¢ **ì˜ˆë°© ì¡°ì¹˜**: ë¬¸ì œ ë°œìƒì„ ë¯¸ì—°ì— ë°©ì§€í•˜ëŠ” ë°©ë²•\nâ€¢ **ëŒ€ì²˜ ë°©ì•ˆ**: ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™© ë°œìƒ ì‹œ ëŒ€ì‘ë²•\nâ€¢ **ì „ë¬¸ê°€ ìƒë‹´**: ë„ì›€ì´ í•„ìš”í•œ ê²½ìš° ë¬¸ì˜í•  ê³³`);
            }
            
            // ê¸°ë³¸ ë²”ìš© ì„¹ì…˜ (í•­ìƒ í¬í•¨)
            enhancements.push(`\n## ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸ ìš”ì•½\n\nâ€¢ **ì„±ê³µ ìš”ì¸**: ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œë“¤\nâ€¢ **ê°œì¸ ë§ì¶¤**: ê°ìì˜ ìƒí™©ì— ë§ê²Œ ì¡°ì •í•˜ëŠ” ë°©ë²•\nâ€¢ **ì§€ì†ì  ê°œì„ **: ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ìœ„í•œ ì ê²€ê³¼ ê°œì„  ì‚¬í•­\nâ€¢ **í™•ì¥ í™œìš©**: ì´ ê²½í—˜ì„ ë‹¤ë¥¸ ë¶„ì•¼ì— ì‘ìš©í•˜ëŠ” ë°©ë²•`);
            
            return enhancements.join('');
        }

        // ì´ë¯¸ì§€ ìˆ˜ì • ê´€ë ¨ í•¨ìˆ˜ë“¤
        function openImageEditor(imageIndex) {
            const photo = currentState.photos[imageIndex];
            if (!photo) {
                alert('ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            currentState.editingImageIndex = imageIndex;
            
            // ëª¨ë‹¬ì— ì´ë¯¸ì§€ í‘œì‹œ
            const imageElement = document.getElementById('editingImage');
            imageElement.src = `data:${photo.mimeType};base64,${photo.base64}`;
            
            // í”„ë¡¬í”„íŠ¸ ì´ˆê¸°í™”
            document.getElementById('imageEditPrompt').value = '';
            
            // ëª¨ë‹¬ í‘œì‹œ
            document.getElementById('imageEditorModal').style.display = 'flex';
            
            // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”
            document.body.style.overflow = 'hidden';
        }

        function closeImageEditor() {
            document.getElementById('imageEditorModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            currentState.editingImageIndex = null;
            currentState.isImageEditing = false;
            
            // ë¡œë”© ìƒíƒœ ìˆ¨ê¸°ê¸°
            document.getElementById('imageEditingLoader').style.display = 'none';
        }

        async function confirmImageEdit() {
            const prompt = document.getElementById('imageEditPrompt').value.trim();
            if (!prompt) {
                alert('ìˆ˜ì • ì§€ì‹œì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (currentState.editingImageIndex === null) {
                alert('ìˆ˜ì •í•  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!currentState.apiKey) {
                alert('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì‚¬ìš©ëŸ‰ ì œí•œ ì²´í¬
            const currentTime = Date.now();
            const timeSinceLastEdit = currentTime - currentState.lastImageEditTime;
            
            // 1ë¶„ ë‚´ì— 5íšŒ ì´ìƒ ì‚¬ìš© ì‹œ ê²½ê³ 
            if (timeSinceLastEdit < 60000 && currentState.imageEditCount >= 5) {
                const remainingTime = Math.ceil((60000 - timeSinceLastEdit) / 1000);
                if (!confirm(`âš ï¸ ì ì‹œë§Œìš”! ë„ˆë¬´ ë§ì€ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.\n\nâ€¢ ${remainingTime}ì´ˆ í›„ì— ë‹¤ì‹œ ì‹œë„í•˜ì‹œê±°ë‚˜\nâ€¢ ê³„ì†í•˜ì‹œë©´ API í•œë„ ì´ˆê³¼ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤\n\nê·¸ë˜ë„ ê³„ì† í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    return;
                }
            }

            // 30ì´ˆ ë‚´ ì¬ì‹œë„ ì‹œ ê²½ê³ 
            if (timeSinceLastEdit < 30000 && currentState.imageEditCount > 0) {
                const remainingTime = Math.ceil((30000 - timeSinceLastEdit) / 1000);
                showNotification(`ğŸ’¡ API íš¨ìœ¨ì„±ì„ ìœ„í•´ ${remainingTime}ì´ˆ ë” ê¸°ë‹¤ë¦¬ì‹œëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.`, 'info');
            }

            try {
                // ë¡œë”© ì‹œì‘
                currentState.isImageEditing = true;
                document.getElementById('imageEditingLoader').style.display = 'flex';
                
                const originalPhoto = currentState.photos[currentState.editingImageIndex];
                
                // ì‚¬ìš©ëŸ‰ ì¶”ì  ì—…ë°ì´íŠ¸
                const currentTime = Date.now();
                if (currentTime - currentState.lastImageEditTime > 60000) {
                    // 1ë¶„ì´ ì§€ë‚˜ë©´ ì¹´ìš´í„° ë¦¬ì…‹
                    currentState.imageEditCount = 0;
                }
                currentState.lastImageEditTime = currentTime;
                currentState.imageEditCount++;
                
                const newBase64 = await editBlogPostImage(originalPhoto, prompt);
                
                // ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
                currentState.photos[currentState.editingImageIndex].base64 = newBase64;
                
                // ëª¨ë‹¬ ë‹«ê¸°
                closeImageEditor();
                
                // ì„±ê³µ ì•Œë¦¼
                showNotification('ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                
                // API ìƒíƒœ ì—…ë°ì´íŠ¸ (ì‚¬ìš©ëŸ‰ í‘œì‹œ ê°±ì‹ )
                updateApiStatus(currentState.apiKey);
                
                // ë¸”ë¡œê·¸ ì¬í‘œì‹œ (ì´ë¯¸ì§€ê°€ ì—…ë°ì´íŠ¸ë¨)
                if (currentState.generatedBlog) {
                    showBlogOutput(currentState.generatedBlog);
                }
                
            } catch (error) {
                console.error('Image editing error:', error);
                showNotification(error.message || 'ì´ë¯¸ì§€ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            } finally {
                // ë¡œë”© ì¢…ë£Œ
                currentState.isImageEditing = false;
                document.getElementById('imageEditingLoader').style.display = 'none';
            }
        }

        async function editBlogPostImage(originalPhoto, prompt) {
            if (!currentState.apiKey) {
                throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }

            const requestBody = {
                contents: [{
                    parts: [
                        {
                            inline_data: {
                                mime_type: originalPhoto.mimeType,
                                data: originalPhoto.base64
                            }
                        },
                        {
                            text: `Edit this image: ${prompt}. Please modify the image according to the instruction while keeping the overall composition and style consistent.`
                        }
                    ]
                }]
            };

            try {
                // nano banana ëª¨ë¸(gemini-2.5-flash-image-preview) ì‚¬ìš©
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${currentState.apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    const statusCode = response.status;
                    const errorMessage = errorData.error?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
                    
                    // êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ ì œê³µ
                    if (statusCode === 400 && errorMessage.includes('model not found')) {
                        throw new Error('âš ï¸ í˜„ì¬ API í‚¤ë¡œëŠ” ì´ë¯¸ì§€ í¸ì§‘ ëª¨ë¸(gemini-2.5-flash-image-preview)ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\nâ€¢ Google AI Studioì—ì„œ ì´ë¯¸ì§€ ìƒì„± ê¸°ëŠ¥ì´ í™œì„±í™”ëœ API í‚¤ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.\nâ€¢ ë˜ëŠ” ëŒ€ê¸° ëª©ë¡ì—ì„œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ìš”ì²­í•˜ì„¸ìš”.');
                    }
                    
                    if (statusCode === 429) {
                        throw new Error('ğŸ“Š API í˜¸ì¶œëŸ‰ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.\n\nğŸ”§ í•´ê²° ë°©ë²•:\nâ€¢ Google AI Studio (https://aistudio.google.com) ì—ì„œ ìš”ê¸ˆì œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”\nâ€¢ ë¬´ë£Œ ìš”ê¸ˆì œ: ë¶„ë‹¹ 15íšŒ, ì¼ì¼ 1,500íšŒ ì œí•œ\nâ€¢ ìœ ë£Œ ìš”ê¸ˆì œë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ ë” ë§ì€ í˜¸ì¶œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤\nâ€¢ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš” (1-2ë¶„ ëŒ€ê¸° ê¶Œì¥)\n\nğŸ’¡ íŒ: ì´ë¯¸ì§€ í¸ì§‘ì€ í† í°ì„ ë§ì´ ì‚¬ìš©í•˜ë¯€ë¡œ í•„ìš”í•  ë•Œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.');
                    }
                    
                    if (statusCode === 403) {
                        throw new Error('ğŸ” API ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\n\nâ€¢ API í‚¤ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”\nâ€¢ Google AI Studioì—ì„œ ì´ë¯¸ì§€ ìƒì„± ê¸°ëŠ¥ ê¶Œí•œì„ í™•ì¸í•´ì£¼ì„¸ìš”\nâ€¢ API í‚¤ê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”');
                    }
                    
                    if (statusCode >= 500) {
                        throw new Error('ğŸ”§ Google ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n\nâ€¢ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”\nâ€¢ ë¬¸ì œê°€ ê³„ì†ë˜ë©´ Google AI Status í˜ì´ì§€ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”');
                    }
                    
                    throw new Error(`API í˜¸ì¶œ ì‹¤íŒ¨: ${statusCode} - ${errorMessage}\n\nìì„¸í•œ ì •ë³´ëŠ” https://ai.google.dev/gemini-api/docs/rate-limits ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.`);
                }

                const data = await response.json();
                
                if (!data.candidates || data.candidates.length === 0) {
                    throw new Error('AIê°€ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì§€ì‹œì‚¬í•­ì„ ì‹œë„í•´ë³´ì„¸ìš”.');
                }

                const candidate = data.candidates[0];
                if (!candidate.content || !candidate.content.parts) {
                    throw new Error('AI ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                }

                // ì´ë¯¸ì§€ ë°ì´í„° ì°¾ê¸° (ì—¬ëŸ¬ í˜•ì‹ ì‹œë„)
                for (const part of candidate.content.parts) {
                    // inlineData í˜•ì‹
                    if (part.inlineData && part.inlineData.data) {
                        return part.inlineData.data;
                    }
                    // inline_data í˜•ì‹
                    if (part.inline_data && part.inline_data.data) {
                        return part.inline_data.data;
                    }
                    // ì§ì ‘ data í•„ë“œ
                    if (part.data) {
                        return part.data;
                    }
                }

                throw new Error('AIê°€ ìˆ˜ì •ëœ ì´ë¯¸ì§€ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì¢€ ë” êµ¬ì²´ì ì¸ ì§€ì‹œì‚¬í•­ì„ ì‹œë„í•´ë³´ì„¸ìš”.');

            } catch (error) {
                console.error('Image editing error details:', error);
                if (error.message.includes('API í˜¸ì¶œ ì‹¤íŒ¨') || error.message.includes('í˜„ì¬ API í‚¤ë¡œëŠ”')) {
                    throw error;
                }
                throw new Error(`ì´ë¯¸ì§€ ìˆ˜ì • ì‹¤íŒ¨: ${error.message}`);
            }
        }

        function showNotification(message, type = 'info') {
            // ê¸°ì¡´ ì•Œë¦¼ì´ ìˆë‹¤ë©´ ì œê±°
            const existing = document.querySelector('.notification');
            if (existing) {
                existing.remove();
            }

            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 10001;
                max-width: 450px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                backdrop-filter: blur(10px);
                transition: opacity 0.3s ease;
                line-height: 1.5;
                white-space: pre-line;
                background: ${type === 'success' ? 'linear-gradient(135deg, #4CAF50, #45a049)' : 
                           type === 'error' ? 'linear-gradient(135deg, #f44336, #da190b)' : 
                           'linear-gradient(135deg, #2196F3, #0b7dda)'};
            `;
            notification.textContent = message;

            document.body.appendChild(notification);

            // ì—ëŸ¬ ë©”ì‹œì§€ëŠ” 7ì´ˆ, ë‚˜ë¨¸ì§€ëŠ” 4ì´ˆ í›„ ìë™ ì œê±°
            const timeout = type === 'error' ? 7000 : 4000;
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, timeout);
        }

        function displayEnhancement(enhancement) {
            document.getElementById('beforeContent').innerHTML = enhancement.original.replace(/\n/g, '<br>');
            document.getElementById('afterContent').innerHTML = enhancement.enhanced.replace(/\n/g, '<br>');
            
            document.getElementById('enhancementSummary').innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h5 style="color: var(--primary-color); margin-bottom: 0.5rem;">ğŸ”§ ì£¼ìš” ë³€ê²½ì‚¬í•­</h5>
                        <ul style="margin-left: 1rem; font-size: 0.875rem;">
                            ${enhancement.changes.map(change => `<li>${change}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div>
                        <h5 style="color: var(--success-color); margin-bottom: 0.5rem;">â• ìƒˆë¡œ ì¶”ê°€ëœ ì„¹ì…˜</h5>
                        <ul style="margin-left: 1rem; font-size: 0.875rem;">
                            ${enhancement.additions.map(addition => `<li>${addition}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                
                <div style="background: var(--success-color); color: white; padding: 0.75rem; border-radius: 6px; margin-top: 1rem; text-align: center;">
                    <strong>âœ¨ í¬ìŠ¤íŒ…ì´ ì„±ê³µì ìœ¼ë¡œ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤!</strong>
                </div>
            `;
            
            // ê°•í™”ëœ ë‚´ìš©ì„ currentStateì— ì €ì¥
            currentState.enhancedBlog = enhancement;
        }

        function acceptEnhancement() {
            if (!currentState.enhancedBlog) {
                alert('ê°•í™”ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ê°•í™”ëœ ë‚´ìš©ìœ¼ë¡œ ë¸”ë¡œê·¸ ì—…ë°ì´íŠ¸
            currentState.generatedBlog.content = currentState.enhancedBlog.enhanced;
            currentState.generatedBlog.html = currentState.enhancedBlog.enhanced.replace(/\n/g, '<br>');
            currentState.generatedBlog.markdown = currentState.enhancedBlog.enhanced;
            
            // UI ì—…ë°ì´íŠ¸ - ê¸°ì¡´ showBlogOutput í•¨ìˆ˜ ì‚¬ìš©
            showBlogOutput(currentState.generatedBlog, currentState.photos);
            
            // ëª¨ë‹¬ ë‹«ê¸°
            closeEnhanceModal();
            
            alert('í¬ìŠ¤íŒ…ì´ ì„±ê³µì ìœ¼ë¡œ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // API ì„¤ì • ê´€ë ¨ í•¨ìˆ˜ë“¤
        function openApiSetupModal() {
            // API í‚¤ ë¡œë“œ
            const savedApiKey = localStorage.getItem('gemini_api_key') || '';
            document.getElementById('apiKeyInput').value = savedApiKey;
            document.getElementById('apiKey').value = savedApiKey;
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            updateApiStatus(savedApiKey);
            
            // ëª¨ë‹¬ í‘œì‹œ
            document.getElementById('apiSetupModal').classList.add('show');
        }

        function closeApiSetupModal() {
            document.getElementById('apiSetupModal').classList.remove('show');
        }

        function toggleApiKeyVisibility() {
            const input = document.getElementById('apiKeyInput');
            const button = document.getElementById('toggleApiKey');
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'ğŸ™ˆ';
            } else {
                input.type = 'password';
                button.textContent = 'ğŸ‘ï¸';
            }
        }

        async function testApiConnection() {
            const apiKey = document.getElementById('apiKeyInput').value.trim();
            
            if (!apiKey) {
                alert(t('error_api_key_required'));
                return;
            }

            const testBtn = document.getElementById('apiTestBtn');
            const originalText = testBtn.textContent;
            
            try {
                testBtn.textContent = 'í…ŒìŠ¤íŠ¸ ì¤‘...';
                testBtn.disabled = true;
                
                // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ìš”ì²­
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: 'Test connection. Please respond with "Connection successful".'
                            }]
                        }]
                    })
                });
                
                if (response.ok) {
                    alert('âœ… API ì—°ê²°ì´ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!');
                    updateApiStatus(apiKey);
                } else {
                    const errorData = await response.text();
                    console.error('API test failed:', errorData);
                    alert('âŒ API ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. API í‚¤ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
                }
            } catch (error) {
                console.error('API test error:', error);
                alert('âŒ ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            } finally {
                testBtn.textContent = originalText;
                testBtn.disabled = false;
            }
        }

        function saveApiKey() {
            const apiKey = document.getElementById('apiKeyInput').value.trim();
            
            if (!apiKey) {
                alert(t('error_api_key_required'));
                return;
            }

            // API í‚¤ ì €ì¥
            localStorage.setItem('gemini_api_key', apiKey);
            currentState.apiKey = apiKey;
            
            // ìˆ¨ê²¨ì§„ ì…ë ¥ í•„ë“œì—ë„ ë™ê¸°í™”
            document.getElementById('apiKey').value = apiKey;
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            updateApiStatus(apiKey);
            
            // ëª¨ë‹¬ ë‹«ê¸°
            closeApiSetupModal();
            
            alert('âœ… API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function updateApiStatus(apiKey) {
            const hasApiKey = apiKey && apiKey.length > 0;
            
            // ìƒíƒœ ì¹´ë“œ ì—…ë°ì´íŠ¸
            if (hasApiKey) {
                document.getElementById('apiStatusConnected').classList.remove('hidden');
                document.getElementById('apiStatusDisconnected').classList.add('hidden');
                
                // ì´ë¯¸ì§€ í¸ì§‘ ì‚¬ìš©ëŸ‰ í‘œì‹œ ì—…ë°ì´íŠ¸
                const usageText = currentState.imageEditCount > 0 
                    ? `ì´ë¯¸ì§€ í¸ì§‘: ${currentState.imageEditCount}íšŒ/ë¶„ ì‚¬ìš© ì¤‘`
                    : 'ì´ë¯¸ì§€ í¸ì§‘ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥';
                
                const statusElement = document.getElementById('apiStatusConnected');
                const usageElement = statusElement.querySelector('.api-usage-info') || 
                    (() => {
                        const el = document.createElement('div');
                        el.className = 'api-usage-info';
                        el.style.cssText = 'font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.25rem;';
                        statusElement.appendChild(el);
                        return el;
                    })();
                
                usageElement.textContent = usageText;
            } else {
                document.getElementById('apiStatusConnected').classList.add('hidden');
                document.getElementById('apiStatusDisconnected').classList.remove('hidden');
            }
            
            // í—¤ë” ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸ (ì„ íƒì‚¬í•­)
            const apiBtn = document.getElementById('apiSetupBtn');
            if (hasApiKey) {
                apiBtn.style.backgroundColor = 'var(--success-color)';
                apiBtn.style.borderColor = 'var(--success-color)';
                apiBtn.style.color = 'white';
            } else {
                apiBtn.style.backgroundColor = '';
                apiBtn.style.borderColor = '';
                apiBtn.style.color = '';
            }
        }

        function showError(message) {
            alert(message);
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }

        // í† ê¸€ ê¸°ëŠ¥
        function toggleSection(element) {
            element.classList.toggle('active');
        }

        // í† ê¸€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.toggle-header').forEach(header => {
                header.addEventListener('click', function() {
                    toggleSection(this.parentElement);
                });
            });
        });
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <!-- í”„ë¡œê·¸ë¨ ì†Œê°œ -->
                <div class="footer-section">
                    <h3>ğŸ¤– AI ë¸”ë¡œê·¸ ìë™ ìƒì„±ê¸°ë€?</h3>
                    <p>AI ë¸”ë¡œê·¸ ìë™ ìƒì„±ê¸°ëŠ” Google Gemini AIë¥¼ í™œìš©í•˜ì—¬ ì‚¬ì§„ë§Œìœ¼ë¡œ ì „ë¬¸ì ì¸ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” í˜ì‹ ì ì¸ ì›¹ ë„êµ¬ì…ë‹ˆë‹¤. ë³µì¡í•œ ê¸€ì“°ê¸° ê³¼ì • ì—†ì´ ë‹¨ ëª‡ ë¶„ë§Œì— ê³ í’ˆì§ˆì˜ ë¸”ë¡œê·¸ ì½˜í…ì¸ ë¥¼ ì™„ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>

                <!-- ì£¼ìš” ê¸°ëŠ¥ -->
                <div class="footer-section">
                    <h3>âœ¨ ì£¼ìš” ê¸°ëŠ¥</h3>
                    <ul>
                        <li>ì‚¬ì§„ ê¸°ë°˜ ìë™ ê¸€ ìƒì„±</li>
                        <li>ë‹¤ì–‘í•œ ê¸€ì ìˆ˜ ì˜µì…˜</li>
                        <li>í†¤ ì¡°ì ˆ ê¸°ëŠ¥</li>
                        <li>HTML, ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ì§€ì›</li>
                        <li>6ê°œ ì–¸ì–´ ë‹¤êµ­ì–´ ì§€ì›</li>
                        <li>ë°˜ì‘í˜• ë””ìì¸</li>
                        <li>ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ</li>
                    </ul>
                </div>

                <!-- ì¥ì  -->
                <div class="footer-section">
                    <h3>ğŸ¯ í•µì‹¬ ì¥ì </h3>
                    <ul>
                        <li>ì „ë¬¸ì ì¸ ê¸€ì“°ê¸° ì§€ì‹ ë¶ˆí•„ìš”</li>
                        <li>ì‹œê°„ ì ˆì•½ (90% ë‹¨ì¶•)</li>
                        <li>ì¼ê´€ëœ ê³ í’ˆì§ˆ ê²°ê³¼ë¬¼</li>
                        <li>SEO ìµœì í™”ëœ ì½˜í…ì¸ </li>
                        <li>ì™„ì „ ë¬´ë£Œ ì‚¬ìš©</li>
                        <li>ê°œì¸ì •ë³´ ë³´í˜¸</li>
                    </ul>
                </div>
            </div>

            <!-- í† ê¸€ ì„¹ì…˜ë“¤ -->
            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>ğŸ“– ì‚¬ìš©ë²• ë° ê°€ì´ë“œ</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>1ë‹¨ê³„: API í‚¤ ì¤€ë¹„</strong></h5>
                    <p>Google AI Studio(https://aistudio.google.com)ì—ì„œ ë¬´ë£Œ Gemini API í‚¤ë¥¼ ë°œê¸‰ë°›ìœ¼ì„¸ìš”. íšŒì›ê°€ì… í›„ 'Create API Key'ë¥¼ í´ë¦­í•˜ë©´ ë©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>2ë‹¨ê³„: ì‚¬ì§„ ì—…ë¡œë“œ</strong></h5>
                    <p>ë¸”ë¡œê·¸ ì£¼ì œì™€ ê´€ë ¨ëœ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ê³ , ê° ì‚¬ì§„ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì‘ì„±í•´ì£¼ì„¸ìš”. ì‚¬ì§„ í’ˆì§ˆì´ ì¢‹ì„ìˆ˜ë¡ ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    
                    <h5><strong>3ë‹¨ê³„: ê¸°ë³¸ ì •ë³´ ì…ë ¥</strong></h5>
                    <p>ë¸”ë¡œê·¸ ì¹´í…Œê³ ë¦¬(ì˜ˆ: ì—¬í–‰, ìŒì‹, ê¸°ìˆ )ì™€ ì£¼ì œ/ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”. êµ¬ì²´ì ì´ê³  ëª…í™•í• ìˆ˜ë¡ ì¢‹ìŠµë‹ˆë‹¤.</p>
                    
                    <h5><strong>4ë‹¨ê³„: í”„ë¡¬í”„íŠ¸ ê²€í†  ë° ìƒì„±</strong></h5>
                    <p>'í”„ë¡¬í”„íŠ¸ ê²€í† ' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ AIê°€ ìƒì„±í•  ë‚´ìš©ì„ ë¯¸ë¦¬ í™•ì¸í•˜ê³ , í•„ìš”ì‹œ ìˆ˜ì •í•œ í›„ ìƒì„±í•˜ì„¸ìš”.</p>
                    
                    <h5><strong>5ë‹¨ê³„: ê²°ê³¼ í™œìš©</strong></h5>
                    <p>ìƒì„±ëœ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ HTML, ë§ˆí¬ë‹¤ìš´, í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ë³µì‚¬í•˜ì—¬ ì›í•˜ëŠ” í”Œë«í¼ì— ê²Œì‹œí•˜ì„¸ìš”.</p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>ğŸ’¡ í™œìš© íŒ ë° ëª¨ë²” ì‚¬ë¡€</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>ìµœì ì˜ ì‚¬ì§„ ì„ íƒë²•</strong></h5>
                    <p>â€¢ ê³ í™”ì§ˆì˜ ì„ ëª…í•œ ì‚¬ì§„ ì‚¬ìš©<br>
                    â€¢ ì£¼ì œì™€ ì§ì ‘ì ìœ¼ë¡œ ì—°ê´€ëœ ì´ë¯¸ì§€ ì„ íƒ<br>
                    â€¢ ë‹¤ì–‘í•œ ê°ë„ì™€ ì‹œì ì˜ ì‚¬ì§„ ì¡°í•©<br>
                    â€¢ ì¸ë¬¼, í’ê²½, ì‚¬ë¬¼ ë“± ê· í˜•ì¡íŒ êµ¬ì„±</p>
                    
                    <h5><strong>íš¨ê³¼ì ì¸ ì„¤ëª… ì‘ì„±ë²•</strong></h5>
                    <p>â€¢ ì‚¬ì§„ì˜ í•µì‹¬ ìš”ì†Œë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ê¸°ìˆ <br>
                    â€¢ ê°ì •ì  í‘œí˜„ê³¼ ë¶„ìœ„ê¸° í¬í•¨<br>
                    â€¢ ì‹œê°„, ì¥ì†Œ, ìƒí™© ë“± ë§¥ë½ ì •ë³´ ì¶”ê°€<br>
                    â€¢ 50-100ì ë‚´ì™¸ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±</p>
                    
                    <h5><strong>ë¸”ë¡œê·¸ ì£¼ì œ ì„¤ì •</strong></h5>
                    <p>â€¢ êµ¬ì²´ì ì´ê³  ëª…í™•í•œ ì£¼ì œ ì„ ì •<br>
                    â€¢ íƒ€ê²Ÿ ë…ìì¸µì„ ê³ ë ¤í•œ ì ‘ê·¼<br>
                    â€¢ íŠ¸ë Œë“œì™€ ê´€ì‹¬ì‚¬ ë°˜ì˜<br>
                    â€¢ SEOë¥¼ ê³ ë ¤í•œ í‚¤ì›Œë“œ í¬í•¨</p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>ğŸ”§ ê¸°ìˆ ì  íŠ¹ì§• ë° í˜ì‹ </h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>AI ê¸°ìˆ  í™œìš©</strong></h5>
                    <p>Googleì˜ ìµœì‹  Gemini 2.5 Flash ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ ë¶„ì„ê³¼ í…ìŠ¤íŠ¸ ìƒì„±ì„ ë™ì‹œì— ì²˜ë¦¬í•©ë‹ˆë‹¤. ë©€í‹°ëª¨ë‹¬ AI ê¸°ìˆ ë¡œ ì‚¬ì§„ì˜ ì‹œê°ì  ì •ë³´ë¥¼ ì •í™•íˆ í•´ì„í•˜ì—¬ ê´€ë ¨ì„± ë†’ì€ ì½˜í…ì¸ ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>ìµœì í™”ëœ ì‚¬ìš©ì ê²½í—˜</strong></h5>
                    <p>â€¢ ì§ê´€ì ì¸ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì¸í„°í˜ì´ìŠ¤<br>
                    â€¢ ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° ë° ìˆ˜ì • ê¸°ëŠ¥<br>
                    â€¢ ë°˜ì‘í˜• ë””ìì¸ìœ¼ë¡œ ëª¨ë“  ê¸°ê¸° ì§€ì›<br>
                    â€¢ ë¹ ë¥¸ ì²˜ë¦¬ ì†ë„ì™€ ì•ˆì •ì„±</p>
                    
                    <h5><strong>ë³´ì•ˆ ë° í”„ë¼ì´ë²„ì‹œ</strong></h5>
                    <p>â€¢ ì‚¬ìš©ì ë°ì´í„°ëŠ” ë¡œì»¬ì—ì„œë§Œ ì²˜ë¦¬<br>
                    â€¢ API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì— ì„ì‹œ ì €ì¥<br>
                    â€¢ ì—…ë¡œë“œëœ ì´ë¯¸ì§€ëŠ” ì„¸ì…˜ ì¢…ë£Œì‹œ ìë™ ì‚­ì œ<br>
                    â€¢ HTTPS ì•”í˜¸í™” í†µì‹ </p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>ğŸ¨ ë””ìì¸ ì² í•™ ë° UX</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>ì‚¬ìš©ì ì¤‘ì‹¬ ì„¤ê³„</strong></h5>
                    <p>ë³µì¡í•œ ë¸”ë¡œê·¸ ì‘ì„± ê³¼ì •ì„ ë‹¨ìˆœí™”í•˜ì—¬ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤. ìµœì†Œí•œì˜ í´ë¦­ìœ¼ë¡œ ìµœëŒ€ì˜ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ì§ê´€ì ì¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>ì ‘ê·¼ì„± ê³ ë ¤ì‚¬í•­</strong></h5>
                    <p>â€¢ í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›<br>
                    â€¢ ê³ ëŒ€ë¹„ ëª¨ë“œ ë° ë‹¤í¬ í…Œë§ˆ<br>
                    â€¢ í™”ë©´ ë¦¬ë” í˜¸í™˜ì„±<br>
                    â€¢ ë‹¤ì–‘í•œ ì–¸ì–´ ì§€ì›ìœ¼ë¡œ ê¸€ë¡œë²Œ ì‚¬ìš©ì ê³ ë ¤</p>
                    
                    <h5><strong>ëª¨ë˜ ì›¹ í‘œì¤€</strong></h5>
                    <p>HTML5, CSS3, ìµœì‹  JavaScriptë¥¼ í™œìš©í•œ ëª¨ë˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ, ë¹ ë¥¸ ë¡œë”© ì†ë„ì™€ ë¶€ë“œëŸ¬ìš´ ì¸í„°ë™ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>ğŸ“Š ì„±ëŠ¥ ë° í†µê³„</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>ì²˜ë¦¬ ì„±ëŠ¥</strong></h5>
                    <p>â€¢ í‰ê·  ê¸€ ìƒì„± ì‹œê°„: 30-60ì´ˆ<br>
                    â€¢ ì§€ì› ì´ë¯¸ì§€ í˜•ì‹: JPG, PNG, WebP, GIF<br>
                    â€¢ ìµœëŒ€ ì´ë¯¸ì§€ í¬ê¸°: 10MB<br>
                    â€¢ ìƒì„± ê°€ëŠ¥ ê¸€ì ìˆ˜: 800-10,000ì</p>
                    
                    <h5><strong>í’ˆì§ˆ ì§€í‘œ</strong></h5>
                    <p>â€¢ SEO ìµœì í™” ì ìˆ˜: 95/100<br>
                    â€¢ ê°€ë…ì„± ì§€ìˆ˜: Aë“±ê¸‰<br>
                    â€¢ ë‹¤êµ­ì–´ ì •í™•ë„: 98%<br>
                    â€¢ ì´ë¯¸ì§€-í…ìŠ¤íŠ¸ ê´€ë ¨ì„±: 92%</p>
                    
                    <h5><strong>ì‚¬ìš©ì ë§Œì¡±ë„</strong></h5>
                    <p>ë² íƒ€ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì‚¬ìš©ìë“¤ì´ ê¸°ì¡´ ë¸”ë¡œê·¸ ì‘ì„± ì‹œê°„ì„ 90% ë‹¨ì¶•í–ˆìœ¼ë©°, ìƒì„±ëœ ì½˜í…ì¸ ì˜ í’ˆì§ˆì— ëŒ€í•´ 4.8/5ì ì˜ ë†’ì€ ë§Œì¡±ë„ë¥¼ ë³´ì˜€ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>Q: API í‚¤ëŠ” ì•ˆì „í•œê°€ìš”?</strong></h5>
                    <p>A: API í‚¤ëŠ” ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì‚¬ìš©ë˜ë©°, ì„œë²„ì— ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì„¸ì…˜ì´ ì¢…ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>Q: ìƒì„±ëœ ì½˜í…ì¸ ì˜ ì €ì‘ê¶Œì€ ëˆ„êµ¬ì—ê²Œ ìˆë‚˜ìš”?</strong></h5>
                    <p>A: ìƒì„±ëœ ëª¨ë“  ì½˜í…ì¸ ì˜ ì €ì‘ê¶Œì€ ì‚¬ìš©ìì—ê²Œ ìˆìŠµë‹ˆë‹¤. ììœ ë¡­ê²Œ ìˆ˜ì •, ë°°í¬, ìƒì—…ì  ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>Q: ì–´ë–¤ ì¢…ë¥˜ì˜ ë¸”ë¡œê·¸ì— ì í•©í•œê°€ìš”?</strong></h5>
                    <p>A: ì—¬í–‰, ìŒì‹, ë¼ì´í”„ìŠ¤íƒ€ì¼, ì œí’ˆ ë¦¬ë·°, ì´ë²¤íŠ¸ í›„ê¸° ë“± ì´ë¯¸ì§€ê°€ ì¤‘ìš”í•œ ëª¨ë“  ì¢…ë¥˜ì˜ ë¸”ë¡œê·¸ì— ì í•©í•©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>Q: ìƒì„± ë¹„ìš©ì´ ìˆë‚˜ìš”?</strong></h5>
                    <p>A: ë³¸ ë„êµ¬ëŠ” ì™„ì „ ë¬´ë£Œì…ë‹ˆë‹¤. Google AI Studioì˜ API ì‚¬ìš©ëŸ‰ ì œí•œ ë‚´ì—ì„œ ììœ ë¡­ê²Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    
                    <h5><strong>Q: ëª¨ë°”ì¼ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?</strong></h5>
                    <p>A: ë„¤, ë°˜ì‘í˜• ë””ìì¸ìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸í°, íƒœë¸”ë¦¿ ë“± ëª¨ë“  ê¸°ê¸°ì—ì„œ ìµœì í™”ëœ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>âš–ï¸ ì´ìš©ì•½ê´€ (Terms of Service)</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>ì„œë¹„ìŠ¤ ì´ìš©</strong></h5>
                    <p>ë³¸ ì„œë¹„ìŠ¤ëŠ” ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„±ì„ ìœ„í•œ ë„êµ¬ë¡œ ì œê³µë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” í•©ë²•ì ì´ê³  ìœ¤ë¦¬ì ì¸ ëª©ì ìœ¼ë¡œë§Œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>ì‚¬ìš©ì ì±…ì„</strong></h5>
                    <p>â€¢ ì—…ë¡œë“œí•˜ëŠ” ì´ë¯¸ì§€ì— ëŒ€í•œ ì‚¬ìš© ê¶Œí•œ ë³´ìœ <br>
                    â€¢ ìƒì„±ëœ ì½˜í…ì¸ ì˜ ì‚¬ì‹¤ í™•ì¸ ë° ê²€í† <br>
                    â€¢ íƒ€ì¸ì˜ ì§€ì ì¬ì‚°ê¶Œ ì¹¨í•´ ê¸ˆì§€<br>
                    â€¢ ë¶ˆë²•ì ì´ê±°ë‚˜ ìœ í•´í•œ ì½˜í…ì¸  ìƒì„± ê¸ˆì§€</p>
                    
                    <h5><strong>ì„œë¹„ìŠ¤ ì œí•œ</strong></h5>
                    <p>ê³¼ë„í•œ ì‚¬ìš©, ì„œë¹„ìŠ¤ ë‚¨ìš©, ì‹œìŠ¤í…œ ë¶€í•˜ë¥¼ ì•¼ê¸°í•˜ëŠ” í–‰ìœ„ëŠ” ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ ê°€ìš©ì„±ì€ Google APIì˜ ìƒíƒœì— ë”°ë¼ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    
                    <h5><strong>ë©´ì±… ì¡°í•­</strong></h5>
                    <p>ìƒì„±ëœ ì½˜í…ì¸ ì˜ ì •í™•ì„±, ì™„ì „ì„±ì— ëŒ€í•´ ë³´ì¥í•˜ì§€ ì•Šìœ¼ë©°, ì‚¬ìš©ìëŠ” ìµœì¢… ê²€í†  í›„ ë°œí–‰í•  ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>ğŸ”’ ê°œì¸ì •ë³´ ë³´í˜¸ì •ì±… (Privacy Policy)</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>ìˆ˜ì§‘í•˜ëŠ” ì •ë³´</strong></h5>
                    <p>â€¢ ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•˜ëŠ” ì´ë¯¸ì§€<br>
                    â€¢ ì…ë ¥í•˜ëŠ” í…ìŠ¤íŠ¸ ë° ì„¤ì • ì •ë³´<br>
                    â€¢ ë¸Œë¼ìš°ì € ì–¸ì–´ ë° í…Œë§ˆ ì„¤ì •<br>
                    â€¢ ì„œë¹„ìŠ¤ ì‚¬ìš© í†µê³„ (ìµëª…í™”)</p>
                    
                    <h5><strong>ì •ë³´ ì²˜ë¦¬ ë°©ì‹</strong></h5>
                    <p>ëª¨ë“  ë°ì´í„°ëŠ” ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ì—ì„œ ì²˜ë¦¬ë˜ë©°, ì„œë²„ì— ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. API í†µì‹ ì„ ìœ„í•´ Google ì„œë²„ì™€ ì„ì‹œì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ì§€ë§Œ, ì²˜ë¦¬ ì™„ë£Œ ì¦‰ì‹œ ì‚­ì œë©ë‹ˆë‹¤.</p>
                    
                    <h5><strong>ë°ì´í„° ë³´ì•ˆ</strong></h5>
                    <p>â€¢ HTTPS ì•”í˜¸í™” í†µì‹ <br>
                    â€¢ ì„¸ì…˜ ê¸°ë°˜ ì„ì‹œ ì €ì¥<br>
                    â€¢ ë¸Œë¼ìš°ì € ì¢…ë£Œì‹œ ìë™ ì‚­ì œ<br>
                    â€¢ ì œ3ìì™€ì˜ ë°ì´í„° ê³µìœ  ì—†ìŒ</p>
                    
                    <h5><strong>ì‚¬ìš©ì ê¶Œë¦¬</strong></h5>
                    <p>ì‚¬ìš©ìëŠ” ì–¸ì œë“ ì§€ ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ì„ í†µí•´ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìœ¼ë©°, ê°œì¸ì •ë³´ ì²˜ë¦¬ì— ëŒ€í•œ ë™ì˜ë¥¼ ì² íšŒí•  ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤.</p>
                    
                    <h5><strong>ì¿ í‚¤ ë° ì¶”ì </strong></h5>
                    <p>í•„ìˆ˜ ê¸°ëŠ¥(ì–¸ì–´ ì„¤ì •, í…Œë§ˆ ì„¤ì •) ì™¸ì—ëŠ” ì¶”ì  ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©°, ê´‘ê³ ë‚˜ ë¶„ì„ì„ ìœ„í•œ ì œ3ì ìŠ¤í¬ë¦½íŠ¸ë¥¼ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header">
                    <h4>ğŸŒŸ í–¥í›„ ê°œë°œ ê³„íš</h4>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <h5><strong>ë‹¨ê¸° ê³„íš (3-6ê°œì›”)</strong></h5>
                    <p>â€¢ ë” ë§ì€ AI ëª¨ë¸ ì§€ì› (Claude, GPT ë“±)<br>
                    â€¢ í…œí”Œë¦¿ ì‹œìŠ¤í…œ ì¶”ê°€<br>
                    â€¢ ë°°ì¹˜ ì²˜ë¦¬ ê¸°ëŠ¥<br>
                    â€¢ ì†Œì…œ ë¯¸ë””ì–´ ìµœì í™”</p>
                    
                    <h5><strong>ì¤‘ê¸° ê³„íš (6-12ê°œì›”)</strong></h5>
                    <p>â€¢ ì‚¬ìš©ì ê³„ì • ì‹œìŠ¤í…œ<br>
                    â€¢ ì½˜í…ì¸  íˆìŠ¤í† ë¦¬ ê´€ë¦¬<br>
                    â€¢ íŒ€ í˜‘ì—… ê¸°ëŠ¥<br>
                    â€¢ ê³ ê¸‰ SEO ë„êµ¬</p>
                    
                    <h5><strong>ì¥ê¸° ë¹„ì „</strong></h5>
                    <p>AI ê¸°ë°˜ ì¢…í•© ì½˜í…ì¸  ì œì‘ í”Œë«í¼ìœ¼ë¡œ ë°œì „í•˜ì—¬, ë¸”ë¡œê·¸ë¿ë§Œ ì•„ë‹ˆë¼ ì†Œì…œ ë¯¸ë””ì–´, ì´ë©”ì¼ ë‰´ìŠ¤ë ˆí„°, ë§ˆì¼€íŒ… ìë£Œê¹Œì§€ ì•„ìš°ë¥´ëŠ” ì˜¬ì¸ì› ì†”ë£¨ì…˜ì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <div class="copyright">
                <p>&copy; 2024 AI ë¸”ë¡œê·¸ ìë™ ìƒì„±ê¸°. All rights reserved. | 
                Made with â¤ï¸ for content creators | 
                Powered by Google Gemini AI</p>
                <p>ë³¸ ì„œë¹„ìŠ¤ëŠ” êµìœ¡ ë° ê°œì¸ ì‚¬ìš©ì„ ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>
    </footer>

    <!-- Authentication Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-modal-content">
            <form id="authForm" class="auth-form" novalidate>
                <h2 id="authTitle">ë¡œê·¸ì¸</h2>
                
                <!-- Error Message -->
                <div id="authError" class="auth-error" style="display: none;"></div>
                
                <!-- Email Input -->
                <div class="form-group">
                    <label for="authEmail">ì´ë©”ì¼ ì£¼ì†Œ</label>
                    <input 
                        type="email" 
                        id="authEmail" 
                        class="input" 
                        required 
                        placeholder="your@email.com"
                        autocomplete="email"
                    >
                </div>
                
                <!-- Password Input -->
                <div class="form-group">
                    <label for="authPassword">ë¹„ë°€ë²ˆí˜¸</label>
                    <input 
                        type="password" 
                        id="authPassword" 
                        class="input" 
                        required 
                        placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                        autocomplete="current-password"
                        minlength="6"
                    >
                </div>
                
                <!-- Submit Button -->
                <button type="submit" id="authSubmit" class="btn btn-primary">
                    ë¡œê·¸ì¸
                </button>
                
                <!-- Mode Toggle -->
                <div style="text-align: center; margin-top: 1rem;">
                    <p style="color: var(--text-secondary); font-size: 0.9rem;">
                        ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? 
                        <a href="#" id="toggleAuthMode" style="color: var(--primary-color); text-decoration: none;">íšŒì›ê°€ì…</a>
                    </p>
                </div>
                
                <!-- Close Button -->
                <button type="button" id="closeAuthModal" class="btn btn-secondary" style="margin-top: 1rem;">
                    ì·¨ì†Œ
                </button>
            </form>
        </div>
    </div>

    <!-- Image Editor Modal -->
    <div id="imageEditorModal" class="image-editor-modal">
        <div class="image-editor-modal-overlay">
            <div class="image-editor-modal-content">
                <!-- Header -->
                <div class="image-editor-header">
                    <h3>ì´ë¯¸ì§€ ìˆ˜ì •í•˜ê¸°</h3>
                    <button type="button" class="modal-close-btn" onclick="closeImageEditor()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                
                <!-- Body -->
                <div class="image-editor-body">
                    <!-- Preview Area -->
                    <div class="image-editor-preview">
                        <img id="imageEditorPreview" src="" alt="ë¯¸ë¦¬ë³´ê¸°" />
                        
                        <!-- Loading Overlay -->
                        <div id="imageLoadingOverlay" class="image-loading-overlay" style="display: none;">
                            <div class="loading-spinner"></div>
                            <div>ì´ë¯¸ì§€ë¥¼ ìˆ˜ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                        </div>
                    </div>
                    
                    <!-- Controls Area -->
                    <div class="image-editor-controls">
                        <!-- Prompt Input -->
                        <div class="prompt-input-group">
                            <label for="imageEditPrompt">ìˆ˜ì • ìš”ì²­ì‚¬í•­</label>
                            <textarea 
                                id="imageEditPrompt" 
                                placeholder="ì›í•˜ëŠ” ìˆ˜ì •ì‚¬í•­ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”.&#10;ì˜ˆ: ë°°ê²½ì„ íŒŒë€ í•˜ëŠ˜ë¡œ ë°”ê¿”ì£¼ì„¸ìš”, ì‚¬ëŒì„ ì œê±°í•´ì£¼ì„¸ìš”, ìƒ‰ìƒì„ ë” ë°ê²Œ í•´ì£¼ì„¸ìš”"
                                rows="4"></textarea>
                        </div>
                        
                        <!-- Prompt Suggestions -->
                        <div class="prompt-suggestions">
                            <p class="suggestions-title">ì¶”ì²œ ìˆ˜ì •ì‚¬í•­</p>
                            <div class="suggestion-buttons">
                                <button class="suggestion-btn" onclick="setSuggestion('ë°°ê²½ì„ íë¦° ì²˜ë¦¬í•´ì£¼ì„¸ìš”')">ë°°ê²½ íë¦¼</button>
                                <button class="suggestion-btn" onclick="setSuggestion('ìƒ‰ìƒì„ ë” ë°ê³  ì„ ëª…í•˜ê²Œ í•´ì£¼ì„¸ìš”')">ìƒ‰ìƒ ê°œì„ </button>
                                <button class="suggestion-btn" onclick="setSuggestion('ë¶ˆí•„ìš”í•œ ê°ì²´ë“¤ì„ ì œê±°í•´ì£¼ì„¸ìš”')">ê°ì²´ ì œê±°</button>
                                <button class="suggestion-btn" onclick="setSuggestion('ì „ì²´ì ì¸ ì¡°ëª…ì„ ê°œì„ í•´ì£¼ì„¸ìš”')">ì¡°ëª… ê°œì„ </button>
                            </div>
                        </div>
                        
                        <!-- Actions -->
                        <div class="editor-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeImageEditor()">
                                ì·¨ì†Œ
                            </button>
                            <button type="button" id="applyImageEditBtn" class="btn btn-primary" onclick="applyImageEdit()">
                                ìˆ˜ì • ì ìš©
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Subscription Plans Modal -->
    <div id="subscriptionModal" class="subscription-modal">
        <div class="subscription-modal-overlay">
            <div class="subscription-modal-content">
                <div class="payment-modal-header">
                    <h3>êµ¬ë… í”Œëœ ì„ íƒ</h3>
                    <button type="button" class="modal-close-btn" onclick="closeSubscriptionModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                
                <div style="padding: 2rem;">
                    <div class="subscription-plans">
                        <!-- ë² ì´ì§ í”Œëœ -->
                        <div class="plan-card">
                            <div class="plan-name">ë² ì´ì§</div>
                            <div class="plan-price">â‚©9,900</div>
                            <div class="plan-period">ì›” êµ¬ë…</div>
                            <ul class="plan-features">
                                <li>ì›” 100ì¥ ì´ë¯¸ì§€ ì²˜ë¦¬</li>
                                <li>ê¸°ë³¸ ë¸”ë¡œê·¸ ìƒì„±</li>
                                <li>ì´ë©”ì¼ ì§€ì›</li>
                                <li>í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ 5GB</li>
                            </ul>
                            <button class="subscribe-btn" onclick="selectPlan('basic')">ë² ì´ì§ ì‹œì‘í•˜ê¸°</button>
                        </div>
                        
                        <!-- í”„ë¦¬ë¯¸ì—„ í”Œëœ -->
                        <div class="plan-card featured">
                            <div class="plan-name">í”„ë¦¬ë¯¸ì—„</div>
                            <div class="plan-price">â‚©19,900</div>
                            <div class="plan-period">ì›” êµ¬ë…</div>
                            <ul class="plan-features">
                                <li>ì›” 500ì¥ ì´ë¯¸ì§€ ì²˜ë¦¬</li>
                                <li>ê³ ê¸‰ AI ë¸”ë¡œê·¸ ìƒì„±</li>
                                <li>ì´ë¯¸ì§€ ìˆ˜ì • ê¸°ëŠ¥</li>
                                <li>ìš°ì„  ê³ ê° ì§€ì›</li>
                                <li>í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ 50GB</li>
                            </ul>
                            <button class="subscribe-btn" onclick="selectPlan('premium')">í”„ë¦¬ë¯¸ì—„ ì‹œì‘í•˜ê¸°</button>
                        </div>
                        
                        <!-- í”„ë¡œ í”Œëœ -->
                        <div class="plan-card">
                            <div class="plan-name">í”„ë¡œ</div>
                            <div class="plan-price">â‚©39,900</div>
                            <div class="plan-period">ì›” êµ¬ë…</div>
                            <ul class="plan-features">
                                <li>ë¬´ì œí•œ ì´ë¯¸ì§€ ì²˜ë¦¬</li>
                                <li>AI ì´ë¯¸ì§€ ìˆ˜ì • ë¬´ì œí•œ</li>
                                <li>ê³ ê¸‰ í…œí”Œë¦¿ ì œê³µ</li>
                                <li>24ì‹œê°„ ê³ ê° ì§€ì›</li>
                                <li>í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ 200GB</li>
                                <li>API ì ‘ê·¼ ê¶Œí•œ</li>
                            </ul>
                            <button class="subscribe-btn" onclick="selectPlan('pro')">í”„ë¡œ ì‹œì‘í•˜ê¸°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toss Payment Modal -->
    <div id="tossPaymentModal" class="toss-payment-modal">
        <div class="toss-payment-modal-overlay">
            <div class="toss-payment-modal-content">
                <!-- Header -->
                <div class="payment-modal-header">
                    <h3>êµ¬ë… ê²°ì œ</h3>
                    <button type="button" class="modal-close-btn" onclick="closeTossPaymentModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                
                <!-- Body -->
                <div class="payment-modal-body">
                    <!-- Plan Info -->
                    <div class="payment-plan-info">
                        <div class="payment-plan-summary">
                            <div id="selectedPlanName" class="payment-plan-name">í”Œëœëª…</div>
                            <div id="selectedPlanPrice" class="payment-plan-price">â‚©0</div>
                            <ul id="selectedPlanFeatures" class="payment-plan-features">
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Toss Payment Area -->
                    <div class="toss-payment-area">
                        <div class="payment-section-title">ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ</div>
                        <div id="tossPaymentMethods"></div>
                        
                        <div class="payment-section-title">ì´ìš©ì•½ê´€ ë™ì˜</div>
                        <div id="tossAgreement"></div>
                    </div>
                </div>
                
                <!-- Actions -->
                <div class="payment-action-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeTossPaymentModal()">
                        ì·¨ì†Œ
                    </button>
                    <button type="button" id="processPaymentBtn" class="btn btn-primary">
                        ê²°ì œí•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth CSS -->
    <link rel="stylesheet" href="auth.css">
    <link rel="stylesheet" href="premium.css">
    <link rel="stylesheet" href="image-editor.css">
    <link rel="stylesheet" href="toss-payments.css">

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    
    <!-- Auth JavaScript -->
    <!-- Mock Auth for testing (commented out for real auth) -->
    <!-- <script src="auth-mock.js"></script> -->
    <script src="auth.js"></script>
    <script src="premium.js"></script>
    <script src="image-editor.js"></script>
    <script src="toss-payments.js"></script>
</body>
</html>